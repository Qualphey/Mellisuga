{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/after/index.js","webpack:///./node_modules/arraybuffer.slice/index.js","webpack:///./node_modules/backo2/index.js","webpack:///./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","webpack:///./node_modules/blob/index.js","webpack:///./node_modules/codemirror/addon/edit/closebrackets.js","webpack:///./node_modules/codemirror/addon/edit/closetag.js","webpack:///./node_modules/codemirror/addon/edit/matchbrackets.js","webpack:///./node_modules/codemirror/addon/edit/matchtags.js","webpack:///./node_modules/codemirror/addon/fold/xml-fold.js","webpack:///./node_modules/codemirror/addon/scroll/simplescrollbars.css?0d3a","webpack:///./node_modules/codemirror/addon/scroll/simplescrollbars.js","webpack:///./node_modules/codemirror/lib/codemirror.css?e45d","webpack:///./node_modules/codemirror/lib/codemirror.js","webpack:///./node_modules/codemirror/mode/css/css.js","webpack:///./node_modules/codemirror/mode/htmlmixed/htmlmixed.js","webpack:///./node_modules/codemirror/mode/javascript/javascript.js","webpack:///./node_modules/codemirror/mode/xml/xml.js","webpack:///./node_modules/codemirror/theme/base16-dark.css?9c15","webpack:///./node_modules/component-bind/index.js","webpack:///./node_modules/component-emitter/index.js","webpack:///./node_modules/component-inherit/index.js","webpack:///./node_modules/codemirror/addon/scroll/simplescrollbars.css","webpack:///./node_modules/codemirror/lib/codemirror.css","webpack:///./node_modules/codemirror/theme/base16-dark.css","webpack:///./src/edit/codemirror.ui/noscroll.css","webpack:///./src/edit/editor.ui/theme.css","webpack:///./src/edit/split.ui/theme.css","webpack:///./src/edit/tabs.ui/horz.css","webpack:///./src/edit/theme.css","webpack:///./src/edit/treefm.ui/style.css","webpack:///./src/edit/window.ui/sheet.css","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/debug/src/browser.js","webpack:///./node_modules/debug/src/debug.js","webpack:///./node_modules/engine.io-client/lib/index.js","webpack:///./node_modules/engine.io-client/lib/socket.js","webpack:///./node_modules/engine.io-client/lib/transport.js","webpack:///./node_modules/engine.io-client/lib/transports/index.js","webpack:///./node_modules/engine.io-client/lib/transports/polling-jsonp.js","webpack:///./node_modules/engine.io-client/lib/transports/polling-xhr.js","webpack:///./node_modules/engine.io-client/lib/transports/polling.js","webpack:///./node_modules/engine.io-client/lib/transports/websocket.js","webpack:///./node_modules/engine.io-client/lib/xmlhttprequest.js","webpack:///./node_modules/engine.io-client/node_modules/debug/src/browser.js","webpack:///./node_modules/engine.io-client/node_modules/debug/src/debug.js","webpack:///./node_modules/engine.io-parser/lib/browser.js","webpack:///./node_modules/engine.io-parser/lib/keys.js","webpack:///./node_modules/engine.io-parser/lib/utf8.js","webpack:///./node_modules/has-binary2/index.js","webpack:///./node_modules/has-binary2/node_modules/isarray/index.js","webpack:///./node_modules/has-cors/index.js","webpack:///./node_modules/indexof/index.js","webpack:///./node_modules/ms/index.js","webpack:///./node_modules/parseqs/index.js","webpack:///./node_modules/parseuri/index.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/socket.io-client/lib/index.js","webpack:///./node_modules/socket.io-client/lib/manager.js","webpack:///./node_modules/socket.io-client/lib/on.js","webpack:///./node_modules/socket.io-client/lib/socket.js","webpack:///./node_modules/socket.io-client/lib/url.js","webpack:///./node_modules/socket.io-parser/binary.js","webpack:///./node_modules/socket.io-parser/index.js","webpack:///./node_modules/socket.io-parser/is-buffer.js","webpack:///./node_modules/socket.io-parser/node_modules/debug/src/browser.js","webpack:///./node_modules/socket.io-parser/node_modules/debug/src/debug.js","webpack:///./node_modules/socket.io-parser/node_modules/isarray/index.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./node_modules/to-array/index.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/yeast/index.js","webpack:///./src/edit/body.html","webpack:///./src/edit/codemirror.ui/index.js","webpack:///./src/edit/codemirror.ui/noscroll.css?6d80","webpack:///./src/edit/editor.ui/index.js","webpack:///./src/edit/editor.ui/session.js","webpack:///./src/edit/editor.ui/theme.css?3d94","webpack:///./src/edit/index.js","webpack:///./src/edit/split.ui/index.js","webpack:///./src/edit/split.ui/theme.css?088b","webpack:///./src/edit/tabs.ui/horz.css?e3a2","webpack:///./src/edit/tabs.ui/index.js","webpack:///./src/edit/tabs.ui/tab.js","webpack:///./src/edit/theme.css?a175","webpack:///./src/edit/treefm.ui/contextmenu.html","webpack:///./src/edit/treefm.ui/contextmenu.js","webpack:///./src/edit/treefm.ui/dir.js","webpack:///./src/edit/treefm.ui/file.js","webpack:///./src/edit/treefm.ui/index.js","webpack:///./src/edit/treefm.ui/style.css?d3b6","webpack:///./src/edit/window.ui/body.html","webpack:///./src/edit/window.ui/index.js","webpack:///./src/edit/window.ui/sheet.css?bb40","webpack:///./src/utils/xhr.js","webpack:///./src/utils/xhr_async.js","webpack:///ws (ignored)"],"names":["module","exports","after","count","callback","err_cb","bail","noop","proxy","err","result","Error","arraybuffer","start","end","bytes","byteLength","slice","ArrayBuffer","abv","Uint8Array","i","ii","buffer","Backoff","opts","ms","min","max","factor","jitter","attempts","prototype","duration","Math","pow","rand","random","deviation","floor","reset","setMin","setMax","setJitter","chars","lookup","length","charCodeAt","encode","len","base64","substring","decode","bufferLength","p","encoded1","encoded2","encoded3","encoded4","BlobBuilder","global","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","a","Blob","size","e","blobSupportsArrayBufferView","b","blobBuilderSupported","append","getBlob","mapArrayBufferViews","ary","chunk","buf","copy","set","byteOffset","BlobBuilderConstructor","options","bb","type","BlobConstructor","undefined","mod","require","CodeMirror","defaults","pairs","triples","explode","Pos","defineOption","cm","val","old","Init","removeKeyMap","keyMap","state","closeBrackets","ensureBound","getOption","addKeyMap","conf","name","Backspace","handleBackspace","Enter","handleEnter","ch","charAt","key","handler","handleChar","getConfig","deflt","override","mode","getModeAt","getCursor","Pass","ranges","listSelections","empty","around","charsAround","head","indexOf","cur","replaceRange","line","operation","linesep","lineSeparator","replaceSelection","execCommand","indentLine","contractSelection","sel","inverted","cmpPos","anchor","pos","identical","opening","range","curType","next","getRange","stringStartsAfter","test","getTokenTypeAt","prev","isWordChar","getLine","isClosingBracket","left","right","sels","getSelections","replaceSelections","setSelections","triggerElectric","lastIndexOf","str","token","getTokenAt","map","whenClosing","autoCloseSlash","whenOpening","autoCloseGT","htmlDontClose","htmlIndent","replacements","opt","tok","inner","innerMode","getMode","tagName","html","configuration","dontCloseTags","indentTags","lowerTagName","toLowerCase","string","closingTagExists","indent","text","newPos","dontIndentOnAutoClose","info","autoCloseCurrent","typingSlash","dontIndentOnSlash","replacement","context","commands","closeTag","collection","elt","newTag","scanForClosingTag","lastLine","nextClose","tag","cx","onCx","to","ie_lt8","navigator","userAgent","document","documentMode","matching","findMatchingBracket","where","config","getLineHandle","afterCursor","getWrapperElement","className","match","dir","strict","style","found","scanForBracket","from","forward","maxScanLen","maxScanLineLength","maxScanLines","stack","re","bracketRegex","lineEnd","firstLine","lineNo","push","pop","matchBrackets","autoclear","maxHighlightLen","maxHighlightLineLength","marks","markText","focused","focus","clear","setTimeout","doMatchBrackets","currentlyHighlighted","off","on","defineExtension","oldConfig","doMatchTags","maybeUpdateMatch","matchBothTags","bothTags","tagHit","tagOther","failedTagMatch","somethingSelected","getViewport","findMatchingTag","hit","at","open","close","other","toMatchingTag","extendSelection","cmp","nameStartChar","nameChar","xmlTagStart","RegExp","Iter","tagAt","iter","nextLine","prevLine","toTagEnd","gt","lastSlash","selfClose","toTagStart","lt","lastIndex","exec","index","toNextTag","toPrevTag","findMatchingClose","startLine","startCh","findMatchingOpen","endLine","endCh","registerHelper","openTag","startPos","endPos","here","findEnclosingTag","Bar","cls","orientation","scroll","screen","total","node","createElement","appendChild","self","which","e_preventDefault","axis","startpos","done","move","moveTo","innerBox","getBoundingClientRect","clientX","clientY","top","bottom","onWheel","moved","wheelEventPixels","oldPos","setPos","force","minButtonSize","update","scrollSize","clientSize","barSize","sizeChanged","buttonSize","SimpleScrollbars","place","addClass","horiz","vert","width","measure","window","getComputedStyle","currentStyle","parseInt","height","needsH","scrollWidth","clientWidth","needsV","scrollHeight","clientHeight","display","viewHeight","viewWidth","barLeft","setScrollTop","setScrollLeft","parent","parentNode","removeChild","scrollbarModel","simple","overlay","factory","platform","gecko","ie_upto10","ie_11up","edge","ie","ie_version","webkit","qtwebkit","chrome","presto","safari","vendor","mac_geMountainLion","phantom","ios","android","mobile","mac","chromeOS","windows","presto_version","Number","flipCtrlCmd","captureRightClick","classTest","rmClass","current","removeChildren","childNodes","firstChild","removeChildrenAndAdd","content","cssText","createTextNode","eltP","setAttribute","createRange","endNode","r","setEnd","setStart","body","createTextRange","moveToElementText","collapse","moveEnd","moveStart","contains","child","nodeType","host","activeElt","activeElement","shadowRoot","joinClasses","as","split","selectInput","select","selectionStart","selectionEnd","value","_e","bind","f","args","Array","call","arguments","apply","copyObj","obj","target","overwrite","prop","hasOwnProperty","countColumn","tabSize","startIndex","startValue","search","n","nextTab","Delayed","id","clearTimeout","array","scrollerGap","toString","sel_dontScroll","sel_mouse","origin","sel_move","findColumn","goal","col","skipped","spaceStrs","spaceStr","lst","arr","out","insertSorted","score","priority","splice","nothing","createObj","base","props","inst","Object","create","nonASCIISingleCaseWordChar","isWordCharBasic","toUpperCase","helper","source","isEmpty","extendingChars","isExtendingChar","skipExtendingChars","findFirst","pred","midF","mid","ceil","Display","doc","input","d","scrollbarFiller","gutterFiller","lineDiv","selectionDiv","cursorDiv","lineMeasure","lineSpace","lines","mover","sizer","sizerWidth","heightForcer","gutters","lineGutter","scroller","wrapper","zIndex","paddingRight","draggable","viewFrom","viewTo","first","reportedViewFrom","reportedViewTo","view","renderedView","externalMeasured","viewOffset","lastWrapHeight","lastWrapWidth","updateLineNumbers","nativeBarWidth","barHeight","barWidth","scrollbarsClipped","lineNumWidth","lineNumInnerWidth","lineNumChars","alignWidgets","cachedCharWidth","cachedTextHeight","cachedPaddingH","maxLine","maxLineLength","maxLineChanged","wheelDX","wheelDY","wheelStartX","wheelStartY","shift","selForContextMenu","activeTouch","init","children","sz","chunkSize","getBetween","getLines","updateLineHeight","diff","no","lineAtHeight","h","outer","i$1","lh","isLine","l","lineNumberFor","String","lineNumberFormatter","firstLineNumber","sticky","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","clipPos","last","clipToLen","linelen","clipPosArray","sawReadOnlySpans","sawCollapsedSpans","seeReadOnlySpans","seeCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","markedSpans","concat","attachLine","markedSpansBefore","isInsert","nw","startsBefore","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","stretchSpansOverChange","change","full","oldFirst","oldLast","sameLine","offset","span$1","found$1","clearEmptySpans","newMarkers","gap","gapMarkers","i$2","i$3","clearWhenEmpty","removeReadOnlyRanges","markers","mark","readOnly","parts","mk","m","find","j","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","conflictingCollapsedRange","lineNo$$1","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","lineLength","findMaxLine","iterateBidiSections","order","part","level","bidiOther","getBidiPartAt","bidiOrdering","lowTypes","arabicTypes","charType","code","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","direction","outerType","types","type$1","prev$1","type$2","i$4","type$3","replace","i$5","cur$1","type$4","i$6","end$1","before","replace$1","j$1","i$7","j$2","nstart","unshift","reverse","getOrder","noHandlers","emitter","addEventListener","attachEvent","map$$1","_handlers","getHandlers","removeEventListener","detachEvent","signal","handlers","signalDOMEvent","preventDefault","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","button","ctrlKey","dragAndDrop","div","zwspSupported","zeroWidthElement","offsetHeight","offsetWidth","badBidiRects","hasBadBidiRects","txt","r0","r1","splitLinesAuto","nl","rt","hasSelection","getSelection","te","range$$1","ownerDocument","selection","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","hasBadZoomedRects","normal","fromRange","abs","modes","mimeModes","defineMode","dependencies","defineMIME","mime","spec","resolveMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","nstate","startState","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","eol","sol","peek","eat","ok","eatWhile","eatSpace","this$1","skipToEnd","skipTo","backUp","column","indentation","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","lookAhead","oracle","baseToken","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","fromSaved","saved","save","highlightLine","forceToEnd","st","modeGen","lineClasses","runMode","loop","o","overlays","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","styleClasses","highlightFrontier","modeFrontier","precise","findStartLine","processLine","startAt","stream","callBlankLine","readToken","blankLine","Token","takeToken","asArray","tokens","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","indented","retreatFrontier","Line","estimateHeight","updateLine","estHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","rest","addToken","buildToken","buildTokenBadBidi","allowFrontierUpdate","insertLineContent","maps","caches","lastChild","querySelector","defaultSpecialCharPlaceholder","title","startStyle","endStyle","css","displayText","special","specialChars","mustWrap","createDocumentFragment","txt$1","tabWidth","specialCharPlaceholder","fullStyle","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","widget","needsContentAttribute","setUneditable","allText","nextChange","spanStyle","spanEndStyle","spanStartStyle","Infinity","foundBookmarks","endStyles","upto","tokenText","LineView","hidden","buildViewArray","nextPos","operationGroup","pushOperation","op","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","callbacks","cursorActivityCalled","finishOperation","endCb","orphanDelayedCallbacks","signalLater","list","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","updateLineBackground","background","wrap","insertBefore","getLineContent","ext","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","k","gutterWidth","alignable","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","eventInWidget","getAttribute","paddingTop","offsetTop","paddingVert","paddingH","data","isNaN","scrollGap","displayWidth","displayHeight","ensureLineHeights","rect","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","mapFromLineView","updateExternalMeasurement","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","measureCharInner","bogus","rtop","rbottom","nullRect","nodeAndOffsetInLineMap","mStart","mEnd","coverStart","coverEnd","getUsefulRect","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","pageScrollX","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","cursorCoords","preparedMeasure","get","getBidi","partPos","invert","estimateCoords","PosWithInfo","outside","xRel","coordsChar","y","coordsCharInner","mergedPos","wrappedLineExtent","begin","wrappedLineExtentChar","targetTop","boxIsAfter","box","widgetHeight$$1","ltr","coordsBidiPartWrapped","coordsBidiPart","chAround","boxAround","baseX","atLeft","atStart","_lineNo","ref","closestDist","endX","dist","measureText","textHeight","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","space","colDiff","round","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","primIndex","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursor","cursorHeight","otherCursor","cmpCoords","fragment","padding","leftSide","rightSide","docLTR","add","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","fromPos","toPos","openStart","openEnd","openLeft","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","clearInterval","blinker","visibility","cursorBlinkRate","setInterval","ensureFocus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","receivedFocus","updateHeightsInViewport","prevBottom","updateWidgetHeight","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","alignHorizontally","comp","gutterW","align","maybeUpdateLineNumberWidth","innerW","updateGutterSpace","maybeScrollWindow","doScroll","innerHeight","scrollNode","scrollIntoView","scrollPosIntoView","margin","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","startWorker","forceScroll","scrollbars","isScroller","measureForScrollbars","docH","docHeight","NativeScrollbars","checkedZeroWidth","minHeight","minWidth","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","delay","maybeDisable","elt$$1","elementFromPoint","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","borderBottom","coverGutterNextToScrollbar","initScrollbars","scrollbarStyle","nextOpId","startOperation","viewChanged","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","methodOp","docMethodOp","regChange","lendiff","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","time","highlight","highlightWorker","Date","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","marginBottom","borderRightWidth","selectionSnapshot","hasFocus","active","anchorNode","extend","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","removeAllRanges","addRange","viewportMargin","different","toUpdate","selSnapshot","patchDisplay","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","updateGutters","specs","gElt","setGuttersForLineNumbers","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","delta","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","there","deepCopy","Range","normalizeSelection","prim","sort","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","estimateHeight$$1","spansFor","linesFor","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","directionChanged","History","startGen","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","history","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","addSelectionToHistory","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","event","newChanges","extendRange","posBefore","setSelection","extendSelections","heads","newSel","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","filter","returned","v","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","assign","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","copied","changeLine","handle","changeType","LeafChunk","removeInner","insertInner","iterN","BranchChunk","oldHeight","remaining","leaf","maybeSpill","me","spilled","sibling","myIndex","used","LineWidget","adjustScrollWhenAboveVisible","oldH","addLineWidget","insertAt","aboveVisible","nextMarkerId","TextMarker","withOp","visual","dHeight","markTextShared","replacedWith","addToHistory","curLine","clearOnEnter","clearHistory","SharedTextMarker","cloneNode","isParent","findSharedMarkers","findMarks","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","constructor","getValue","join","setValue","getLineNumber","getLineHandleVisualStart","lineCount","setCursor","extendSelectionsBy","addSelection","dup","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","CodeMirror$1","link","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","read","loadFile","file","allowDropFileTypes","reader","onload","readAsText","draggingText","text$1","getData","selected","onDragStart","setData","effectAllowed","setDragImage","img","src","_top","onDragOver","frag","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","globalsRegistered","ensureGlobalHandlers","registerGlobalHandlers","resizeTimer","onResize","setSize","keyNames","fromCharCode","basic","pcDefault","fallthrough","emacsy","macDefault","normalizeKeyName","alt","ctrl","cmd","normalizeKeyMap","keymap","keyname","keys","lookupKey","getKeyMap","isModifierKey","keyCode","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","moveInStorageOrder","prep","moveVisually","bidi","mv","getWrappedLineExtent","searchInVisualLine","getRes","res","nextCh","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","leftPos","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","transposeChars","newlineAndIndent","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","lookupKeyForEditor","keyMaps","extraKeys","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","handleKeyBinding","motion","handleCharBinding","lastStoppedKey","onKeyDown","handled","showCrossHair","up","onKeyUp","onKeyPress","charCode","DOUBLECLICK_DELAY","PastClick","compare","lastClick","lastDoubleClick","clickRepeat","now","onMouseDown","supportsTouch","clickInGutter","repeat","selectingText","handleMappedButton","leftButtonDown","onContextMenu","configureMouse","option","unit","addNew","moveOnDrag","behavior","contained","dragDrop","leftButtonStartDrag","leftButtonSelect","dragEnd","mouseMove","dragStart","e2","rangeForUnit","findWordAt","ourRange","ourIndex","startSel","lastPos","extendTo","startCol","posCol","oldRange","ranges$1","bidiSimplify","editorSize","counter","curCount","anchorLine","boundary","headIndex","usePart","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","theme","optionHandlers","defineOptions","notOnInit","newBreaks","refresh","getInputField","spellcheck","guttersChanged","detach","attach","wrappingChanged","integer","blur","readOnlyChanged","dragDropChanged","resetPosition","getField","tabIndex","wasOn","funcs","dragFunctions","toggle","enter","over","leave","drop","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","registerEventHandlers","finishInit","initHooks","textRendering","word","touchFinished","prevTouch","finishTouch","isMouseLikeTouchEvent","touch","radiusX","radiusY","farAway","pageX","pageY","inp","defineInitHook","how","aggressive","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","hiddenTextarea","border","addEditorMethods","helpers","setOption","getDoc","addOverlay","modeSpec","removeOverlay","newRanges","getLineTokens","getHelper","getHelpers","help","_global","getStateAfter","defaultTextHeight","defaultCharWidth","addWidget","vspace","hspace","triggerOnKeyDown","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","hitSide","rtlMoveVisually","findPosV","goalColumn","goals","headPos","startChar","check","scrollTo","getScrollInfo","interpret","swapDoc","getScrollerElement","getGutterElement","registerGlobalHelper","predicate","origDir","findNextLine","moveOnce","boundToLine","sawType","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","updateFromDOM","readFromDOMSoon","forceCompositionEnd","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","showMultipleSelections","curAnchor","domToPos","curFocus","bad","posToDOM","rangeCount","getRangeAt","rng","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","pollSelection","poll","pollInterval","isInGutter","pollContent","fromIndex","fromNode","toIndex","toNode","previousSibling","newText","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","scan","badPos","closing","recognizeMarker","addText","walk","cmText","textContent","markerID","isBlock","nodeName","nodeValue","lineNode","locateNodeInLineView","textNode","topNode","curNode","dist$1","TextareaInput","prevInput","pollingFast","textarea","fastPoll","prepareCopyCut","moveInputWithCursor","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldCSS","oldWrapperCSS","wrapperBox","oldScrollY","scrollY","detectingSelectAll","prepareSelectAllHack","extval","rehide","mouseup","disabled","fromTextArea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","addLegacyProps","dontDelegate","method","func","defineDocExtension","version","parserConfig","inline","propertyKeywords","tokenHooks","documentTypes","mediaTypes","mediaFeatures","mediaValueKeywords","nonStandardPropertyKeywords","fontProperties","counterDescriptors","colorKeywords","valueKeywords","allowNested","lineComment","supportsAtComponent","ret","tp","tokenBase","tokenize","tokenString","tokenParenthesized","quote","escaped","pushContext","popContext","pass","states","popAndPass","wordAsValue","stateArg","block","maybeprop","propBlock","_stream","parens","pseudo","atBlock","atComponentBlock","atBlock_parens","restricted_atBlock_before","restricted_atBlock","keyframes","interpolation","textAfter","blockCommentStart","blockCommentEnd","blockCommentContinue","fold","keySet","documentTypes_","mediaTypes_","mediaFeatures_","mediaValueKeywords_","propertyKeywords_","nonStandardPropertyKeywords_","fontProperties_","counterDescriptors_","colorKeywords_","valueKeywords_","allWords","tokenCComment","maybeEnd","defaultTags","script","maybeBackup","pat","attrRegexpCache","getAttrRegexp","attr","regexp","getAttrValue","getTagRegexp","anchored","addTags","findMatchingMode","tagInfo","tagText","htmlMode","multilineTagIndentFactor","multilineTagIndentPastTag","tags","configTags","configScript","scriptTypes","matches","htmlState","inTag","endTagA","endTag","localState","localMode","local","statementIndent","jsonldMode","jsonld","jsonMode","json","isTS","typescript","wordRE","wordCharacters","keywords","kw","A","B","C","D","operator","atom","isOperatorChar","isJsonldKeyword","readRegexp","inSet","cont","tokenComment","expressionAllowed","tokenQuasi","lexical","lastType","propertyIsEnumerable","brackets","findFatArrow","fatArrowAt","arrow","depth","sawSomething","bracket","atomicTypes","JSLexical","inScope","varname","localVars","vars","parseJS","cc","marked","combinator","expression","statement","lex","register","inList","globalVars","isModifier","defaultVars","pushcontext","popcontext","pushlex","poplex","expect","wanted","exp","vardef","parenExpr","maybeexpression","maybeelse","functiondef","forspec","enumdef","typeexpr","maybelabel","funarg","afterExport","afterImport","expressionInner","expressionNoComma","noComma","arrowBodyNoComma","arrowBody","commasep","maybeop","maybeoperatorNoComma","maybeoperatorComma","classExpression","arrayLiteral","contCommasep","objprop","quasi","maybeTarget","expr","property","continueQuasi","targetNoComma","maybeTypeArgs","_","getterSetter","afterprop","maybetype","what","sep","proceed","mayberettype","isKW","afterType","typeprop","typearg","maybeReturnType","typeparam","maybeTypeDefault","maybeAssign","vardefCont","proppattern","_type","forspec1","forspec2","formaybeinof","forspec3","classNameAfter","classBody","classfield","maybeFrom","exportField","importSpec","maybeMoreImports","maybeAs","enummember","isContinuedStatement","basecolumn","firstChar","c","doubleIndentSwitch","skipExpression","htmlConfig","autoSelfClosers","implicitlyClosed","contextGrabbers","doNotIndent","allowUnquoted","allowMissing","caseFold","xmlConfig","allowMissingTagName","editorConf","config_","setStyle","inText","chain","parser","inBlock","doctype","isInText","baseState","tagStart","inAttribute","stringStartCol","closure","isInAttribute","terminator","startOfLine","noIndent","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","attrState","matchClosing","closeState","closeStateErr","attrEqState","attrValueState","attrContinuedState","baseIndent","fullLine","alignCDATA","tagAfter","grabbers","skipAttribute","fn","Emitter","mixin","_callbacks","once","removeListener","removeAllListeners","cb","emit","listeners","hasListeners","useSourceMap","item","cssWithMappingToString","modules","mediaQuery","alreadyImportedModules","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","sourceRoot","sourceMap","unescape","encodeURIComponent","JSON","stringify","log","formatArgs","load","useColors","storage","localstorage","colors","process","WebkitAppearance","console","firebug","exception","table","$1","formatters","message","namespace","humanize","color","lastC","Function","namespaces","removeItem","debug","env","DEBUG","enable","localStorage","createDebug","coerce","disable","enabled","names","skips","prevTime","selectColor","hash","curr","format","formatter","logFn","transports","parseuri","parseqs","Socket","uri","hostname","secure","protocol","port","query","location","agent","upgrade","path","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","transportOptions","readyState","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","freeGlobal","extraHeaders","localAddress","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","Transport","createTransport","clone","EIO","transport","sid","socket","requestTimeout","protocols","setTransport","onDrain","packet","onPacket","onError","onClose","probe","failed","onTransportOpen","upgradeLosesBinary","supportsBinary","send","msg","upgrading","pause","cleanup","flush","freezeTransport","onerror","error","onTransportClose","onclose","onupgrade","onOpen","onHandshake","parse","setPing","filterUpgrades","onHeartbeat","timeout","ping","sendPacket","writable","write","compress","waitForUpgrade","cleanupAndClose","reason","desc","filteredUpgrades","description","doOpen","doClose","packets","onData","decodePacket","XMLHttpRequest","XHR","JSONP","websocket","xhr","xd","xs","isSSL","xdomain","xscheme","Polling","inherit","JSONPPolling","rNewline","rEscapedNewline","___eio","iframe","doPoll","async","getElementsByTagName","isUAgecko","doWrite","area","iframeId","action","complete","initIframe","onreadystatechange","Request","request","isBinary","req","sendXhr","pollXhr","setDisableHeaderCheck","setRequestHeader","responseType","withCredentials","hasXDR","onLoad","responseText","contentType","getResponseHeader","status","requestsCount","requests","onSuccess","fromError","abort","response","XDomainRequest","unloadHandler","yeast","hasXHR2","onPause","decodePayload","callbackfn","encodePayload","schema","b64","ipv6","BrowserWebSocket","WebSocket","MozWebSocket","NodeWebSocket","WS","usingBrowserWebSocket","headers","supports","binary","addEventListeners","onopen","onmessage","ev","encodePacket","Buffer","hasCORS","instances","destroy","instance","hasBinary","sliceBuffer","utf8","base64encoder","isAndroid","isPhantomJS","dontSendBlobs","pong","packetslist","utf8encode","encodeArrayBuffer","encodeBlob","encodeBase64Object","encoded","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","readAsArrayBuffer","blob","readAsDataURL","b64data","typed","utf8decode","decodeBase64Packet","tryDecode","encodePayloadAsBlob","encodePayloadAsArrayBuffer","setLengthHeader","encodeOne","doneCallback","results","each","eachWithIndex","el","decodePayloadAsBinary","chr","encodedPackets","totalLength","reduce","acc","resultArray","bufferIndex","forEach","isString","ab","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","tailArray","msgLength","has","root","freeExports","freeModule","stringFromCharCode","ucs2decode","extra","ucs2encode","checkScalarValue","codePoint","createByte","encodeCodePoint","symbol","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","tmp","define","isArray","withNativeBlob","withNativeFile","isBuffer","toJSON","s","long","fmtLong","fmtShort","parseFloat","plural","qs","qry","pair","decodeURIComponent","authority","ipv6uri","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","run","nextTick","Item","browser","argv","versions","addListener","prependListener","prependOnceListener","binding","cwd","chdir","umask","url","Manager","managers","parsed","sameNamespace","nsps","newConnection","forceNew","multiplex","io","connect","eio","subs","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","connecting","lastPing","encoding","packetBuffer","_parser","encoder","Encoder","decoder","Decoder","autoConnect","emitAll","nsp","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","reconnecting","reconnect","skipReconnect","openSub","errorSub","timer","onping","onpong","ondata","ondecoded","onConnecting","processPacketQueue","pack","subsLength","disconnect","onreconnect","attempt","toArray","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","subEvents","EVENT","flags","CONNECT","onpacket","onconnect","onevent","BINARY_EVENT","ACK","onack","BINARY_ACK","DISCONNECT","ondisconnect","ERROR","ack","sent","emitBuffered","loc","href","isBuf","deconstructPacket","packetData","_deconstructPacket","attachments","_placeholder","num","newData","reconstructPacket","_reconstructPacket","removeBlobs","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","bloblessData","hasBin","encodeAsBinary","encodeAsString","writeEncoding","deconstruction","reconstructor","decodeString","BinaryReconstructor","reconPack","takeBinaryData","payload","tryParse","isPayloadValid","finishedReconstruction","binData","isView","baseUrl","currentDir","pathname","fixedCss","fullMatch","origUrl","unquotedOrigUrl","trim","newUrl","eval","webpackPolyfill","deprecate","paths","defineProperty","enumerable","alphabet","seed","decoded","readonly","init_cfg","element","this_class","innerHTML","cfg","disable_scrollbar","autoCloseTags","autoCloseBrackets","XHRA","WindowUI","SplitUI","Session","stats","contentWindow","DOM","resize_cb","auto_resize","editor_window","overflow","global_local_switch","classList","webpack_button","chstate","command","post","local_session","append_session_elements","global_session","session","treefm","tabs","TreeFM","TabsUI","template_prefix","page_prefix","refresh_path","last_save_callback","file_cb","tab","rel_path","read_file","file_content","extension","original_extension","html_editor","save_cur_file","write_file","Editor","template","getParamByName","page","target_name","tools","editor_btn","editor_replaced","n_window","listener","hide","dipslay","getElementById","firstLoad","floadID","editor","last_pathname","socondLoad","sloadID","new_pathname","new_root_dir","dom","min_piece_width","min_piece_height","pieces","split_div_width","piece_width","resize_line","startX","resize_drag","deltaX","target_left","target_right","left_width","right_width_dec","right_width","left_width_dec","split_div","old_width","delta_width","piece_delta_width","next_delta","new_width","Tab","menu","display_div","displayed_tab","t","padding_left","Dir","padding_index","name_div","content_div","displayed","new_file","name_input","contextmenu","file_path","new_folder","mkdir","upload","enctype","target_input","path_input","upload_input","multiple","click","formData","FormData","entries","upload_files","rename","dir_arr","delete","rm_dir","hide_contextmenu","child_file","child_dir","rm_file","ContextMenu","dir_tree","root_dir","new_path","min_width","min_height","init_width","init_height","titlebar","maximized","window_mod_move","minimize","maximize","resize_controls","N","NE","E","SE","S","SW","W","NW","mouse_div","fresh","window_mod_init","win","div_up","up_cb","startY","drag","stopDrag","eClientX","eClientY","nX","nX2","innerWidth","nY","nY2","curTarget","curFollower","make","directions","makeN","makeNE","makeE","makeSE","makeS","makeSW","makeW","makeNW","screen_padding","dragN","stopDragN","nHeight","dragNE","stopDragNE","dragE","stopDragE","dragSE","stopDragSE","dragS","stopDragS","dragSW","stopDragSW","nWidth","dragW","stopDragW","dragNW","stopDragNW","arrayMethods","getOwnPropertyNames","attachArrayMethodsToNodeList","methodName","NodeList","arg","mem_layout","params","param_str","regex","Promise","resolve"],"mappings":"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;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;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","file":"edit.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/edit/index.js\");\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n","/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var defaults = {\n    pairs: \"()[]{}''\\\"\\\"\",\n    triples: \"\",\n    explode: \"[]{}\"\n  };\n\n  var Pos = CodeMirror.Pos;\n\n  CodeMirror.defineOption(\"autoCloseBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.removeKeyMap(keyMap);\n      cm.state.closeBrackets = null;\n    }\n    if (val) {\n      ensureBound(getOption(val, \"pairs\"))\n      cm.state.closeBrackets = val;\n      cm.addKeyMap(keyMap);\n    }\n  });\n\n  function getOption(conf, name) {\n    if (name == \"pairs\" && typeof conf == \"string\") return conf;\n    if (typeof conf == \"object\" && conf[name] != null) return conf[name];\n    return defaults[name];\n  }\n\n  var keyMap = {Backspace: handleBackspace, Enter: handleEnter};\n  function ensureBound(chars) {\n    for (var i = 0; i < chars.length; i++) {\n      var ch = chars.charAt(i), key = \"'\" + ch + \"'\"\n      if (!keyMap[key]) keyMap[key] = handler(ch)\n    }\n  }\n  ensureBound(defaults.pairs + \"`\")\n\n  function handler(ch) {\n    return function(cm) { return handleChar(cm, ch); };\n  }\n\n  function getConfig(cm) {\n    var deflt = cm.state.closeBrackets;\n    if (!deflt || deflt.override) return deflt;\n    var mode = cm.getModeAt(cm.getCursor());\n    return mode.closeBrackets || deflt;\n  }\n\n  function handleBackspace(cm) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || pairs.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var cur = ranges[i].head;\n      cm.replaceRange(\"\", Pos(cur.line, cur.ch - 1), Pos(cur.line, cur.ch + 1), \"+delete\");\n    }\n  }\n\n  function handleEnter(cm) {\n    var conf = getConfig(cm);\n    var explode = conf && getOption(conf, \"explode\");\n    if (!explode || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || explode.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    cm.operation(function() {\n      var linesep = cm.lineSeparator() || \"\\n\";\n      cm.replaceSelection(linesep + linesep, null);\n      cm.execCommand(\"goCharLeft\");\n      ranges = cm.listSelections();\n      for (var i = 0; i < ranges.length; i++) {\n        var line = ranges[i].head.line;\n        cm.indentLine(line, null, true);\n        cm.indentLine(line + 1, null, true);\n      }\n    });\n  }\n\n  function contractSelection(sel) {\n    var inverted = CodeMirror.cmpPos(sel.anchor, sel.head) > 0;\n    return {anchor: new Pos(sel.anchor.line, sel.anchor.ch + (inverted ? -1 : 1)),\n            head: new Pos(sel.head.line, sel.head.ch + (inverted ? 1 : -1))};\n  }\n\n  function handleChar(cm, ch) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var pos = pairs.indexOf(ch);\n    if (pos == -1) return CodeMirror.Pass;\n    var triples = getOption(conf, \"triples\");\n\n    var identical = pairs.charAt(pos + 1) == ch;\n    var ranges = cm.listSelections();\n    var opening = pos % 2 == 0;\n\n    var type;\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], cur = range.head, curType;\n      var next = cm.getRange(cur, Pos(cur.line, cur.ch + 1));\n      if (opening && !range.empty()) {\n        curType = \"surround\";\n      } else if ((identical || !opening) && next == ch) {\n        if (identical && stringStartsAfter(cm, cur))\n          curType = \"both\";\n        else if (triples.indexOf(ch) >= 0 && cm.getRange(cur, Pos(cur.line, cur.ch + 3)) == ch + ch + ch)\n          curType = \"skipThree\";\n        else\n          curType = \"skip\";\n      } else if (identical && cur.ch > 1 && triples.indexOf(ch) >= 0 &&\n                 cm.getRange(Pos(cur.line, cur.ch - 2), cur) == ch + ch) {\n        if (cur.ch > 2 && /\\bstring/.test(cm.getTokenTypeAt(Pos(cur.line, cur.ch - 2)))) return CodeMirror.Pass;\n        curType = \"addFour\";\n      } else if (identical) {\n        var prev = cur.ch == 0 ? \" \" : cm.getRange(Pos(cur.line, cur.ch - 1), cur)\n        if (!CodeMirror.isWordChar(next) && prev != ch && !CodeMirror.isWordChar(prev)) curType = \"both\";\n        else return CodeMirror.Pass;\n      } else if (opening && (cm.getLine(cur.line).length == cur.ch ||\n                             isClosingBracket(next, pairs) ||\n                             /\\s/.test(next))) {\n        curType = \"both\";\n      } else {\n        return CodeMirror.Pass;\n      }\n      if (!type) type = curType;\n      else if (type != curType) return CodeMirror.Pass;\n    }\n\n    var left = pos % 2 ? pairs.charAt(pos - 1) : ch;\n    var right = pos % 2 ? ch : pairs.charAt(pos + 1);\n    cm.operation(function() {\n      if (type == \"skip\") {\n        cm.execCommand(\"goCharRight\");\n      } else if (type == \"skipThree\") {\n        for (var i = 0; i < 3; i++)\n          cm.execCommand(\"goCharRight\");\n      } else if (type == \"surround\") {\n        var sels = cm.getSelections();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = left + sels[i] + right;\n        cm.replaceSelections(sels, \"around\");\n        sels = cm.listSelections().slice();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = contractSelection(sels[i]);\n        cm.setSelections(sels);\n      } else if (type == \"both\") {\n        cm.replaceSelection(left + right, null);\n        cm.triggerElectric(left + right);\n        cm.execCommand(\"goCharLeft\");\n      } else if (type == \"addFour\") {\n        cm.replaceSelection(left + left + left + left, \"before\");\n        cm.execCommand(\"goCharRight\");\n      }\n    });\n  }\n\n  function isClosingBracket(ch, pairs) {\n    var pos = pairs.lastIndexOf(ch);\n    return pos > -1 && pos % 2 == 1;\n  }\n\n  function charsAround(cm, pos) {\n    var str = cm.getRange(Pos(pos.line, pos.ch - 1),\n                          Pos(pos.line, pos.ch + 1));\n    return str.length == 2 ? str : null;\n  }\n\n  function stringStartsAfter(cm, pos) {\n    var token = cm.getTokenAt(Pos(pos.line, pos.ch + 1))\n    return /\\bstring/.test(token.type) && token.start == pos.ch &&\n      (pos.ch == 0 || !/\\bstring/.test(cm.getTokenTypeAt(pos)))\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n/**\n * Tag-closer extension for CodeMirror.\n *\n * This extension adds an \"autoCloseTags\" option that can be set to\n * either true to get the default behavior, or an object to further\n * configure its behavior.\n *\n * These are supported options:\n *\n * `whenClosing` (default true)\n *   Whether to autoclose when the '/' of a closing tag is typed.\n * `whenOpening` (default true)\n *   Whether to autoclose the tag when the final '>' of an opening\n *   tag is typed.\n * `dontCloseTags` (default is empty tags for HTML, none for XML)\n *   An array of tag names that should not be autoclosed.\n * `indentTags` (default is block tags for HTML, none for XML)\n *   An array of tag names that should, when opened, cause a\n *   blank line to be added inside the tag, and the blank line and\n *   closing line to be indented.\n *\n * See demos/closetag.html for a usage example.\n */\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../fold/xml-fold\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../fold/xml-fold\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  CodeMirror.defineOption(\"autoCloseTags\", false, function(cm, val, old) {\n    if (old != CodeMirror.Init && old)\n      cm.removeKeyMap(\"autoCloseTags\");\n    if (!val) return;\n    var map = {name: \"autoCloseTags\"};\n    if (typeof val != \"object\" || val.whenClosing)\n      map[\"'/'\"] = function(cm) { return autoCloseSlash(cm); };\n    if (typeof val != \"object\" || val.whenOpening)\n      map[\"'>'\"] = function(cm) { return autoCloseGT(cm); };\n    cm.addKeyMap(map);\n  });\n\n  var htmlDontClose = [\"area\", \"base\", \"br\", \"col\", \"command\", \"embed\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"meta\", \"param\",\n                       \"source\", \"track\", \"wbr\"];\n  var htmlIndent = [\"applet\", \"blockquote\", \"body\", \"button\", \"div\", \"dl\", \"fieldset\", \"form\", \"frameset\", \"h1\", \"h2\", \"h3\", \"h4\",\n                    \"h5\", \"h6\", \"head\", \"html\", \"iframe\", \"layer\", \"legend\", \"object\", \"ol\", \"p\", \"select\", \"table\", \"ul\"];\n\n  function autoCloseGT(cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    var ranges = cm.listSelections(), replacements = [];\n    var opt = cm.getOption(\"autoCloseTags\");\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var pos = ranges[i].head, tok = cm.getTokenAt(pos);\n      var inner = CodeMirror.innerMode(cm.getMode(), tok.state), state = inner.state;\n      if (inner.mode.name != \"xml\" || !state.tagName) return CodeMirror.Pass;\n\n      var html = inner.mode.configuration == \"html\";\n      var dontCloseTags = (typeof opt == \"object\" && opt.dontCloseTags) || (html && htmlDontClose);\n      var indentTags = (typeof opt == \"object\" && opt.indentTags) || (html && htmlIndent);\n\n      var tagName = state.tagName;\n      if (tok.end > pos.ch) tagName = tagName.slice(0, tagName.length - tok.end + pos.ch);\n      var lowerTagName = tagName.toLowerCase();\n      // Don't process the '>' at the end of an end-tag or self-closing tag\n      if (!tagName ||\n          tok.type == \"string\" && (tok.end != pos.ch || !/[\\\"\\']/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1) ||\n          tok.type == \"tag\" && state.type == \"closeTag\" ||\n          tok.string.indexOf(\"/\") == (tok.string.length - 1) || // match something like <someTagName />\n          dontCloseTags && indexOf(dontCloseTags, lowerTagName) > -1 ||\n          closingTagExists(cm, tagName, pos, state, true))\n        return CodeMirror.Pass;\n\n      var indent = indentTags && indexOf(indentTags, lowerTagName) > -1;\n      replacements[i] = {indent: indent,\n                         text: \">\" + (indent ? \"\\n\\n\" : \"\") + \"</\" + tagName + \">\",\n                         newPos: indent ? CodeMirror.Pos(pos.line + 1, 0) : CodeMirror.Pos(pos.line, pos.ch + 1)};\n    }\n\n    var dontIndentOnAutoClose = (typeof opt == \"object\" && opt.dontIndentOnAutoClose);\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var info = replacements[i];\n      cm.replaceRange(info.text, ranges[i].head, ranges[i].anchor, \"+insert\");\n      var sel = cm.listSelections().slice(0);\n      sel[i] = {head: info.newPos, anchor: info.newPos};\n      cm.setSelections(sel);\n      if (!dontIndentOnAutoClose && info.indent) {\n        cm.indentLine(info.newPos.line, null, true);\n        cm.indentLine(info.newPos.line + 1, null, true);\n      }\n    }\n  }\n\n  function autoCloseCurrent(cm, typingSlash) {\n    var ranges = cm.listSelections(), replacements = [];\n    var head = typingSlash ? \"/\" : \"</\";\n    var opt = cm.getOption(\"autoCloseTags\");\n    var dontIndentOnAutoClose = (typeof opt == \"object\" && opt.dontIndentOnSlash);\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var pos = ranges[i].head, tok = cm.getTokenAt(pos);\n      var inner = CodeMirror.innerMode(cm.getMode(), tok.state), state = inner.state;\n      if (typingSlash && (tok.type == \"string\" || tok.string.charAt(0) != \"<\" ||\n                          tok.start != pos.ch - 1))\n        return CodeMirror.Pass;\n      // Kludge to get around the fact that we are not in XML mode\n      // when completing in JS/CSS snippet in htmlmixed mode. Does not\n      // work for other XML embedded languages (there is no general\n      // way to go from a mixed mode to its current XML state).\n      var replacement;\n      if (inner.mode.name != \"xml\") {\n        if (cm.getMode().name == \"htmlmixed\" && inner.mode.name == \"javascript\")\n          replacement = head + \"script\";\n        else if (cm.getMode().name == \"htmlmixed\" && inner.mode.name == \"css\")\n          replacement = head + \"style\";\n        else\n          return CodeMirror.Pass;\n      } else {\n        if (!state.context || !state.context.tagName ||\n            closingTagExists(cm, state.context.tagName, pos, state))\n          return CodeMirror.Pass;\n        replacement = head + state.context.tagName;\n      }\n      if (cm.getLine(pos.line).charAt(tok.end) != \">\") replacement += \">\";\n      replacements[i] = replacement;\n    }\n    cm.replaceSelections(replacements);\n    ranges = cm.listSelections();\n    if (!dontIndentOnAutoClose) {\n        for (var i = 0; i < ranges.length; i++)\n            if (i == ranges.length - 1 || ranges[i].head.line < ranges[i + 1].head.line)\n                cm.indentLine(ranges[i].head.line);\n    }\n  }\n\n  function autoCloseSlash(cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    return autoCloseCurrent(cm, true);\n  }\n\n  CodeMirror.commands.closeTag = function(cm) { return autoCloseCurrent(cm); };\n\n  function indexOf(collection, elt) {\n    if (collection.indexOf) return collection.indexOf(elt);\n    for (var i = 0, e = collection.length; i < e; ++i)\n      if (collection[i] == elt) return i;\n    return -1;\n  }\n\n  // If xml-fold is loaded, we use its functionality to try and verify\n  // whether a given tag is actually unclosed.\n  function closingTagExists(cm, tagName, pos, state, newTag) {\n    if (!CodeMirror.scanForClosingTag) return false;\n    var end = Math.min(cm.lastLine() + 1, pos.line + 500);\n    var nextClose = CodeMirror.scanForClosingTag(cm, pos, null, end);\n    if (!nextClose || nextClose.tag != tagName) return false;\n    var cx = state.context;\n    // If the immediate wrapping context contains onCx instances of\n    // the same tag, a closing tag only exists if there are at least\n    // that many closing tags of that type following.\n    for (var onCx = newTag ? 1 : 0; cx && cx.tagName == tagName; cx = cx.prev) ++onCx;\n    pos = nextClose.to;\n    for (var i = 1; i < onCx; i++) {\n      var next = CodeMirror.scanForClosingTag(cm, pos, null, end);\n      if (!next || next.tag != tagName) return false;\n      pos = next.to;\n    }\n    return true;\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var ie_lt8 = /MSIE \\d/.test(navigator.userAgent) &&\n    (document.documentMode == null || document.documentMode < 8);\n\n  var Pos = CodeMirror.Pos;\n\n  var matching = {\"(\": \")>\", \")\": \"(<\", \"[\": \"]>\", \"]\": \"[<\", \"{\": \"}>\", \"}\": \"{<\"};\n\n  function findMatchingBracket(cm, where, config) {\n    var line = cm.getLineHandle(where.line), pos = where.ch - 1;\n    var afterCursor = config && config.afterCursor\n    if (afterCursor == null)\n      afterCursor = /(^| )cm-fat-cursor($| )/.test(cm.getWrapperElement().className)\n\n    // A cursor is defined as between two characters, but in in vim command mode\n    // (i.e. not insert mode), the cursor is visually represented as a\n    // highlighted box on top of the 2nd character. Otherwise, we allow matches\n    // from before or after the cursor.\n    var match = (!afterCursor && pos >= 0 && matching[line.text.charAt(pos)]) ||\n        matching[line.text.charAt(++pos)];\n    if (!match) return null;\n    var dir = match.charAt(1) == \">\" ? 1 : -1;\n    if (config && config.strict && (dir > 0) != (pos == where.ch)) return null;\n    var style = cm.getTokenTypeAt(Pos(where.line, pos + 1));\n\n    var found = scanForBracket(cm, Pos(where.line, pos + (dir > 0 ? 1 : 0)), dir, style || null, config);\n    if (found == null) return null;\n    return {from: Pos(where.line, pos), to: found && found.pos,\n            match: found && found.ch == match.charAt(0), forward: dir > 0};\n  }\n\n  // bracketRegex is used to specify which type of bracket to scan\n  // should be a regexp, e.g. /[[\\]]/\n  //\n  // Note: If \"where\" is on an open bracket, then this bracket is ignored.\n  //\n  // Returns false when no bracket was found, null when it reached\n  // maxScanLines and gave up\n  function scanForBracket(cm, where, dir, style, config) {\n    var maxScanLen = (config && config.maxScanLineLength) || 10000;\n    var maxScanLines = (config && config.maxScanLines) || 1000;\n\n    var stack = [];\n    var re = config && config.bracketRegex ? config.bracketRegex : /[(){}[\\]]/;\n    var lineEnd = dir > 0 ? Math.min(where.line + maxScanLines, cm.lastLine() + 1)\n                          : Math.max(cm.firstLine() - 1, where.line - maxScanLines);\n    for (var lineNo = where.line; lineNo != lineEnd; lineNo += dir) {\n      var line = cm.getLine(lineNo);\n      if (!line) continue;\n      var pos = dir > 0 ? 0 : line.length - 1, end = dir > 0 ? line.length : -1;\n      if (line.length > maxScanLen) continue;\n      if (lineNo == where.line) pos = where.ch - (dir < 0 ? 1 : 0);\n      for (; pos != end; pos += dir) {\n        var ch = line.charAt(pos);\n        if (re.test(ch) && (style === undefined || cm.getTokenTypeAt(Pos(lineNo, pos + 1)) == style)) {\n          var match = matching[ch];\n          if ((match.charAt(1) == \">\") == (dir > 0)) stack.push(ch);\n          else if (!stack.length) return {pos: Pos(lineNo, pos), ch: ch};\n          else stack.pop();\n        }\n      }\n    }\n    return lineNo - dir == (dir > 0 ? cm.lastLine() : cm.firstLine()) ? false : null;\n  }\n\n  function matchBrackets(cm, autoclear, config) {\n    // Disable brace matching in long lines, since it'll cause hugely slow updates\n    var maxHighlightLen = cm.state.matchBrackets.maxHighlightLineLength || 1000;\n    var marks = [], ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      var match = ranges[i].empty() && findMatchingBracket(cm, ranges[i].head, config);\n      if (match && cm.getLine(match.from.line).length <= maxHighlightLen) {\n        var style = match.match ? \"CodeMirror-matchingbracket\" : \"CodeMirror-nonmatchingbracket\";\n        marks.push(cm.markText(match.from, Pos(match.from.line, match.from.ch + 1), {className: style}));\n        if (match.to && cm.getLine(match.to.line).length <= maxHighlightLen)\n          marks.push(cm.markText(match.to, Pos(match.to.line, match.to.ch + 1), {className: style}));\n      }\n    }\n\n    if (marks.length) {\n      // Kludge to work around the IE bug from issue #1193, where text\n      // input stops going to the textare whever this fires.\n      if (ie_lt8 && cm.state.focused) cm.focus();\n\n      var clear = function() {\n        cm.operation(function() {\n          for (var i = 0; i < marks.length; i++) marks[i].clear();\n        });\n      };\n      if (autoclear) setTimeout(clear, 800);\n      else return clear;\n    }\n  }\n\n  function doMatchBrackets(cm) {\n    cm.operation(function() {\n      if (cm.state.matchBrackets.currentlyHighlighted) {\n        cm.state.matchBrackets.currentlyHighlighted();\n        cm.state.matchBrackets.currentlyHighlighted = null;\n      }\n      cm.state.matchBrackets.currentlyHighlighted = matchBrackets(cm, false, cm.state.matchBrackets);\n    });\n  }\n\n  CodeMirror.defineOption(\"matchBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"cursorActivity\", doMatchBrackets);\n      if (cm.state.matchBrackets && cm.state.matchBrackets.currentlyHighlighted) {\n        cm.state.matchBrackets.currentlyHighlighted();\n        cm.state.matchBrackets.currentlyHighlighted = null;\n      }\n    }\n    if (val) {\n      cm.state.matchBrackets = typeof val == \"object\" ? val : {};\n      cm.on(\"cursorActivity\", doMatchBrackets);\n    }\n  });\n\n  CodeMirror.defineExtension(\"matchBrackets\", function() {matchBrackets(this, true);});\n  CodeMirror.defineExtension(\"findMatchingBracket\", function(pos, config, oldConfig){\n    // Backwards-compatibility kludge\n    if (oldConfig || typeof config == \"boolean\") {\n      if (!oldConfig) {\n        config = config ? {strict: true} : null\n      } else {\n        oldConfig.strict = config\n        config = oldConfig\n      }\n    }\n    return findMatchingBracket(this, pos, config)\n  });\n  CodeMirror.defineExtension(\"scanForBracket\", function(pos, dir, style, config){\n    return scanForBracket(this, pos, dir, style, config);\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../fold/xml-fold\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../fold/xml-fold\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"matchTags\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"cursorActivity\", doMatchTags);\n      cm.off(\"viewportChange\", maybeUpdateMatch);\n      clear(cm);\n    }\n    if (val) {\n      cm.state.matchBothTags = typeof val == \"object\" && val.bothTags;\n      cm.on(\"cursorActivity\", doMatchTags);\n      cm.on(\"viewportChange\", maybeUpdateMatch);\n      doMatchTags(cm);\n    }\n  });\n\n  function clear(cm) {\n    if (cm.state.tagHit) cm.state.tagHit.clear();\n    if (cm.state.tagOther) cm.state.tagOther.clear();\n    cm.state.tagHit = cm.state.tagOther = null;\n  }\n\n  function doMatchTags(cm) {\n    cm.state.failedTagMatch = false;\n    cm.operation(function() {\n      clear(cm);\n      if (cm.somethingSelected()) return;\n      var cur = cm.getCursor(), range = cm.getViewport();\n      range.from = Math.min(range.from, cur.line); range.to = Math.max(cur.line + 1, range.to);\n      var match = CodeMirror.findMatchingTag(cm, cur, range);\n      if (!match) return;\n      if (cm.state.matchBothTags) {\n        var hit = match.at == \"open\" ? match.open : match.close;\n        if (hit) cm.state.tagHit = cm.markText(hit.from, hit.to, {className: \"CodeMirror-matchingtag\"});\n      }\n      var other = match.at == \"close\" ? match.open : match.close;\n      if (other)\n        cm.state.tagOther = cm.markText(other.from, other.to, {className: \"CodeMirror-matchingtag\"});\n      else\n        cm.state.failedTagMatch = true;\n    });\n  }\n\n  function maybeUpdateMatch(cm) {\n    if (cm.state.failedTagMatch) doMatchTags(cm);\n  }\n\n  CodeMirror.commands.toMatchingTag = function(cm) {\n    var found = CodeMirror.findMatchingTag(cm, cm.getCursor());\n    if (found) {\n      var other = found.at == \"close\" ? found.open : found.close;\n      if (other) cm.extendSelection(other.to, other.from);\n    }\n  };\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var Pos = CodeMirror.Pos;\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch; }\n\n  var nameStartChar = \"A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\";\n  var nameChar = nameStartChar + \"\\-\\:\\.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040\";\n  var xmlTagStart = new RegExp(\"<(/?)([\" + nameStartChar + \"][\" + nameChar + \"]*)\", \"g\");\n\n  function Iter(cm, line, ch, range) {\n    this.line = line; this.ch = ch;\n    this.cm = cm; this.text = cm.getLine(line);\n    this.min = range ? Math.max(range.from, cm.firstLine()) : cm.firstLine();\n    this.max = range ? Math.min(range.to - 1, cm.lastLine()) : cm.lastLine();\n  }\n\n  function tagAt(iter, ch) {\n    var type = iter.cm.getTokenTypeAt(Pos(iter.line, ch));\n    return type && /\\btag\\b/.test(type);\n  }\n\n  function nextLine(iter) {\n    if (iter.line >= iter.max) return;\n    iter.ch = 0;\n    iter.text = iter.cm.getLine(++iter.line);\n    return true;\n  }\n  function prevLine(iter) {\n    if (iter.line <= iter.min) return;\n    iter.text = iter.cm.getLine(--iter.line);\n    iter.ch = iter.text.length;\n    return true;\n  }\n\n  function toTagEnd(iter) {\n    for (;;) {\n      var gt = iter.text.indexOf(\">\", iter.ch);\n      if (gt == -1) { if (nextLine(iter)) continue; else return; }\n      if (!tagAt(iter, gt + 1)) { iter.ch = gt + 1; continue; }\n      var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n      var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n      iter.ch = gt + 1;\n      return selfClose ? \"selfClose\" : \"regular\";\n    }\n  }\n  function toTagStart(iter) {\n    for (;;) {\n      var lt = iter.ch ? iter.text.lastIndexOf(\"<\", iter.ch - 1) : -1;\n      if (lt == -1) { if (prevLine(iter)) continue; else return; }\n      if (!tagAt(iter, lt + 1)) { iter.ch = lt; continue; }\n      xmlTagStart.lastIndex = lt;\n      iter.ch = lt;\n      var match = xmlTagStart.exec(iter.text);\n      if (match && match.index == lt) return match;\n    }\n  }\n\n  function toNextTag(iter) {\n    for (;;) {\n      xmlTagStart.lastIndex = iter.ch;\n      var found = xmlTagStart.exec(iter.text);\n      if (!found) { if (nextLine(iter)) continue; else return; }\n      if (!tagAt(iter, found.index + 1)) { iter.ch = found.index + 1; continue; }\n      iter.ch = found.index + found[0].length;\n      return found;\n    }\n  }\n  function toPrevTag(iter) {\n    for (;;) {\n      var gt = iter.ch ? iter.text.lastIndexOf(\">\", iter.ch - 1) : -1;\n      if (gt == -1) { if (prevLine(iter)) continue; else return; }\n      if (!tagAt(iter, gt + 1)) { iter.ch = gt; continue; }\n      var lastSlash = iter.text.lastIndexOf(\"/\", gt);\n      var selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n      iter.ch = gt + 1;\n      return selfClose ? \"selfClose\" : \"regular\";\n    }\n  }\n\n  function findMatchingClose(iter, tag) {\n    var stack = [];\n    for (;;) {\n      var next = toNextTag(iter), end, startLine = iter.line, startCh = iter.ch - (next ? next[0].length : 0);\n      if (!next || !(end = toTagEnd(iter))) return;\n      if (end == \"selfClose\") continue;\n      if (next[1]) { // closing tag\n        for (var i = stack.length - 1; i >= 0; --i) if (stack[i] == next[2]) {\n          stack.length = i;\n          break;\n        }\n        if (i < 0 && (!tag || tag == next[2])) return {\n          tag: next[2],\n          from: Pos(startLine, startCh),\n          to: Pos(iter.line, iter.ch)\n        };\n      } else { // opening tag\n        stack.push(next[2]);\n      }\n    }\n  }\n  function findMatchingOpen(iter, tag) {\n    var stack = [];\n    for (;;) {\n      var prev = toPrevTag(iter);\n      if (!prev) return;\n      if (prev == \"selfClose\") { toTagStart(iter); continue; }\n      var endLine = iter.line, endCh = iter.ch;\n      var start = toTagStart(iter);\n      if (!start) return;\n      if (start[1]) { // closing tag\n        stack.push(start[2]);\n      } else { // opening tag\n        for (var i = stack.length - 1; i >= 0; --i) if (stack[i] == start[2]) {\n          stack.length = i;\n          break;\n        }\n        if (i < 0 && (!tag || tag == start[2])) return {\n          tag: start[2],\n          from: Pos(iter.line, iter.ch),\n          to: Pos(endLine, endCh)\n        };\n      }\n    }\n  }\n\n  CodeMirror.registerHelper(\"fold\", \"xml\", function(cm, start) {\n    var iter = new Iter(cm, start.line, 0);\n    for (;;) {\n      var openTag = toNextTag(iter), end;\n      if (!openTag || !(end = toTagEnd(iter)) || iter.line != start.line) return;\n      if (!openTag[1] && end != \"selfClose\") {\n        var startPos = Pos(iter.line, iter.ch);\n        var endPos = findMatchingClose(iter, openTag[2]);\n        return endPos && {from: startPos, to: endPos.from};\n      }\n    }\n  });\n  CodeMirror.findMatchingTag = function(cm, pos, range) {\n    var iter = new Iter(cm, pos.line, pos.ch, range);\n    if (iter.text.indexOf(\">\") == -1 && iter.text.indexOf(\"<\") == -1) return;\n    var end = toTagEnd(iter), to = end && Pos(iter.line, iter.ch);\n    var start = end && toTagStart(iter);\n    if (!end || !start || cmp(iter, pos) > 0) return;\n    var here = {from: Pos(iter.line, iter.ch), to: to, tag: start[2]};\n    if (end == \"selfClose\") return {open: here, close: null, at: \"open\"};\n\n    if (start[1]) { // closing tag\n      return {open: findMatchingOpen(iter, start[2]), close: here, at: \"close\"};\n    } else { // opening tag\n      iter = new Iter(cm, to.line, to.ch, range);\n      return {open: here, close: findMatchingClose(iter, start[2]), at: \"open\"};\n    }\n  };\n\n  CodeMirror.findEnclosingTag = function(cm, pos, range, tag) {\n    var iter = new Iter(cm, pos.line, pos.ch, range);\n    for (;;) {\n      var open = findMatchingOpen(iter, tag);\n      if (!open) break;\n      var forward = new Iter(cm, pos.line, pos.ch, range);\n      var close = findMatchingClose(forward, open.tag);\n      if (close) return {open: open, close: close};\n    }\n  };\n\n  // Used by addon/edit/closetag.js\n  CodeMirror.scanForClosingTag = function(cm, pos, name, end) {\n    var iter = new Iter(cm, pos.line, pos.ch, end ? {from: 0, to: end} : null);\n    return findMatchingClose(iter, name);\n  };\n});\n","\nvar content = require(\"!!../../../css-loader/index.js??ref--6-1!./simplescrollbars.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../css-loader/index.js??ref--6-1!./simplescrollbars.css\", function() {\n\t\tvar newContent = require(\"!!../../../css-loader/index.js??ref--6-1!./simplescrollbars.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function Bar(cls, orientation, scroll) {\n    this.orientation = orientation;\n    this.scroll = scroll;\n    this.screen = this.total = this.size = 1;\n    this.pos = 0;\n\n    this.node = document.createElement(\"div\");\n    this.node.className = cls + \"-\" + orientation;\n    this.inner = this.node.appendChild(document.createElement(\"div\"));\n\n    var self = this;\n    CodeMirror.on(this.inner, \"mousedown\", function(e) {\n      if (e.which != 1) return;\n      CodeMirror.e_preventDefault(e);\n      var axis = self.orientation == \"horizontal\" ? \"pageX\" : \"pageY\";\n      var start = e[axis], startpos = self.pos;\n      function done() {\n        CodeMirror.off(document, \"mousemove\", move);\n        CodeMirror.off(document, \"mouseup\", done);\n      }\n      function move(e) {\n        if (e.which != 1) return done();\n        self.moveTo(startpos + (e[axis] - start) * (self.total / self.size));\n      }\n      CodeMirror.on(document, \"mousemove\", move);\n      CodeMirror.on(document, \"mouseup\", done);\n    });\n\n    CodeMirror.on(this.node, \"click\", function(e) {\n      CodeMirror.e_preventDefault(e);\n      var innerBox = self.inner.getBoundingClientRect(), where;\n      if (self.orientation == \"horizontal\")\n        where = e.clientX < innerBox.left ? -1 : e.clientX > innerBox.right ? 1 : 0;\n      else\n        where = e.clientY < innerBox.top ? -1 : e.clientY > innerBox.bottom ? 1 : 0;\n      self.moveTo(self.pos + where * self.screen);\n    });\n\n    function onWheel(e) {\n      var moved = CodeMirror.wheelEventPixels(e)[self.orientation == \"horizontal\" ? \"x\" : \"y\"];\n      var oldPos = self.pos;\n      self.moveTo(self.pos + moved);\n      if (self.pos != oldPos) CodeMirror.e_preventDefault(e);\n    }\n    CodeMirror.on(this.node, \"mousewheel\", onWheel);\n    CodeMirror.on(this.node, \"DOMMouseScroll\", onWheel);\n  }\n\n  Bar.prototype.setPos = function(pos, force) {\n    if (pos < 0) pos = 0;\n    if (pos > this.total - this.screen) pos = this.total - this.screen;\n    if (!force && pos == this.pos) return false;\n    this.pos = pos;\n    this.inner.style[this.orientation == \"horizontal\" ? \"left\" : \"top\"] =\n      (pos * (this.size / this.total)) + \"px\";\n    return true\n  };\n\n  Bar.prototype.moveTo = function(pos) {\n    if (this.setPos(pos)) this.scroll(pos, this.orientation);\n  }\n\n  var minButtonSize = 10;\n\n  Bar.prototype.update = function(scrollSize, clientSize, barSize) {\n    var sizeChanged = this.screen != clientSize || this.total != scrollSize || this.size != barSize\n    if (sizeChanged) {\n      this.screen = clientSize;\n      this.total = scrollSize;\n      this.size = barSize;\n    }\n\n    var buttonSize = this.screen * (this.size / this.total);\n    if (buttonSize < minButtonSize) {\n      this.size -= minButtonSize - buttonSize;\n      buttonSize = minButtonSize;\n    }\n    this.inner.style[this.orientation == \"horizontal\" ? \"width\" : \"height\"] =\n      buttonSize + \"px\";\n    this.setPos(this.pos, sizeChanged);\n  };\n\n  function SimpleScrollbars(cls, place, scroll) {\n    this.addClass = cls;\n    this.horiz = new Bar(cls, \"horizontal\", scroll);\n    place(this.horiz.node);\n    this.vert = new Bar(cls, \"vertical\", scroll);\n    place(this.vert.node);\n    this.width = null;\n  }\n\n  SimpleScrollbars.prototype.update = function(measure) {\n    if (this.width == null) {\n      var style = window.getComputedStyle ? window.getComputedStyle(this.horiz.node) : this.horiz.node.currentStyle;\n      if (style) this.width = parseInt(style.height);\n    }\n    var width = this.width || 0;\n\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    this.vert.node.style.display = needsV ? \"block\" : \"none\";\n    this.horiz.node.style.display = needsH ? \"block\" : \"none\";\n\n    if (needsV) {\n      this.vert.update(measure.scrollHeight, measure.clientHeight,\n                       measure.viewHeight - (needsH ? width : 0));\n      this.vert.node.style.bottom = needsH ? width + \"px\" : \"0\";\n    }\n    if (needsH) {\n      this.horiz.update(measure.scrollWidth, measure.clientWidth,\n                        measure.viewWidth - (needsV ? width : 0) - measure.barLeft);\n      this.horiz.node.style.right = needsV ? width + \"px\" : \"0\";\n      this.horiz.node.style.left = measure.barLeft + \"px\";\n    }\n\n    return {right: needsV ? width : 0, bottom: needsH ? width : 0};\n  };\n\n  SimpleScrollbars.prototype.setScrollTop = function(pos) {\n    this.vert.setPos(pos);\n  };\n\n  SimpleScrollbars.prototype.setScrollLeft = function(pos) {\n    this.horiz.setPos(pos);\n  };\n\n  SimpleScrollbars.prototype.clear = function() {\n    var parent = this.horiz.node.parentNode;\n    parent.removeChild(this.horiz.node);\n    parent.removeChild(this.vert.node);\n  };\n\n  CodeMirror.scrollbarModel.simple = function(place, scroll) {\n    return new SimpleScrollbars(\"CodeMirror-simplescroll\", place, scroll);\n  };\n  CodeMirror.scrollbarModel.overlay = function(place, scroll) {\n    return new SimpleScrollbars(\"CodeMirror-overlayscroll\", place, scroll);\n  };\n});\n","\nvar content = require(\"!!../../css-loader/index.js??ref--6-1!./codemirror.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../css-loader/index.js??ref--6-1!./codemirror.css\", function() {\n\t\tvar newContent = require(\"!!../../css-loader/index.js??ref--6-1!./codemirror.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n// This is CodeMirror (http://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n// Kludges for bugs and behavior differences that can't be feature\n// detected are enabled based on userAgent etc sniffing.\nvar userAgent = navigator.userAgent;\nvar platform = navigator.platform;\n\nvar gecko = /gecko\\/\\d/i.test(userAgent);\nvar ie_upto10 = /MSIE \\d/.test(userAgent);\nvar ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\nvar edge = /Edge\\/(\\d+)/.exec(userAgent);\nvar ie = ie_upto10 || ie_11up || edge;\nvar ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\nvar webkit = !edge && /WebKit\\//.test(userAgent);\nvar qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\nvar chrome = !edge && /Chrome\\//.test(userAgent);\nvar presto = /Opera\\//.test(userAgent);\nvar safari = /Apple Computer/.test(navigator.vendor);\nvar mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\nvar phantom = /PhantomJS/.test(userAgent);\n\nvar ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\nvar android = /Android/.test(userAgent);\n// This is woefully incomplete. Suggestions for alternative methods welcome.\nvar mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\nvar mac = ios || /Mac/.test(platform);\nvar chromeOS = /\\bCrOS\\b/.test(userAgent);\nvar windows = /win/i.test(platform);\n\nvar presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\nif (presto_version) { presto_version = Number(presto_version[1]); }\nif (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n// Some browsers use the wrong event properties to signal cmd/ctrl on OS X\nvar flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\nvar captureRightClick = gecko || (ie && ie_version >= 9);\n\nfunction classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\nvar rmClass = function(node, cls) {\n  var current = node.className;\n  var match = classTest(cls).exec(current);\n  if (match) {\n    var after = current.slice(match.index + match[0].length);\n    node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n  }\n};\n\nfunction removeChildren(e) {\n  for (var count = e.childNodes.length; count > 0; --count)\n    { e.removeChild(e.firstChild); }\n  return e\n}\n\nfunction removeChildrenAndAdd(parent, e) {\n  return removeChildren(parent).appendChild(e)\n}\n\nfunction elt(tag, content, className, style) {\n  var e = document.createElement(tag);\n  if (className) { e.className = className; }\n  if (style) { e.style.cssText = style; }\n  if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n  else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n  return e\n}\n// wrapper for elt, which removes the elt from the accessibility tree\nfunction eltP(tag, content, className, style) {\n  var e = elt(tag, content, className, style);\n  e.setAttribute(\"role\", \"presentation\");\n  return e\n}\n\nvar range;\nif (document.createRange) { range = function(node, start, end, endNode) {\n  var r = document.createRange();\n  r.setEnd(endNode || node, end);\n  r.setStart(node, start);\n  return r\n}; }\nelse { range = function(node, start, end) {\n  var r = document.body.createTextRange();\n  try { r.moveToElementText(node.parentNode); }\n  catch(e) { return r }\n  r.collapse(true);\n  r.moveEnd(\"character\", end);\n  r.moveStart(\"character\", start);\n  return r\n}; }\n\nfunction contains(parent, child) {\n  if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n    { child = child.parentNode; }\n  if (parent.contains)\n    { return parent.contains(child) }\n  do {\n    if (child.nodeType == 11) { child = child.host; }\n    if (child == parent) { return true }\n  } while (child = child.parentNode)\n}\n\nfunction activeElt() {\n  // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n  // IE < 10 will throw when accessed while the page is loading or in an iframe.\n  // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n  var activeElement;\n  try {\n    activeElement = document.activeElement;\n  } catch(e) {\n    activeElement = document.body || null;\n  }\n  while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n    { activeElement = activeElement.shadowRoot.activeElement; }\n  return activeElement\n}\n\nfunction addClass(node, cls) {\n  var current = node.className;\n  if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n}\nfunction joinClasses(a, b) {\n  var as = a.split(\" \");\n  for (var i = 0; i < as.length; i++)\n    { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n  return b\n}\n\nvar selectInput = function(node) { node.select(); };\nif (ios) // Mobile Safari apparently has a bug where select() is broken.\n  { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\nelse if (ie) // Suppress mysterious IE10 errors\n  { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\nfunction bind(f) {\n  var args = Array.prototype.slice.call(arguments, 1);\n  return function(){return f.apply(null, args)}\n}\n\nfunction copyObj(obj, target, overwrite) {\n  if (!target) { target = {}; }\n  for (var prop in obj)\n    { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n      { target[prop] = obj[prop]; } }\n  return target\n}\n\n// Counts the column offset in a string, taking tabs into account.\n// Used mostly to find indentation.\nfunction countColumn(string, end, tabSize, startIndex, startValue) {\n  if (end == null) {\n    end = string.search(/[^\\s\\u00a0]/);\n    if (end == -1) { end = string.length; }\n  }\n  for (var i = startIndex || 0, n = startValue || 0;;) {\n    var nextTab = string.indexOf(\"\\t\", i);\n    if (nextTab < 0 || nextTab >= end)\n      { return n + (end - i) }\n    n += nextTab - i;\n    n += tabSize - (n % tabSize);\n    i = nextTab + 1;\n  }\n}\n\nvar Delayed = function() {this.id = null;};\nDelayed.prototype.set = function (ms, f) {\n  clearTimeout(this.id);\n  this.id = setTimeout(f, ms);\n};\n\nfunction indexOf(array, elt) {\n  for (var i = 0; i < array.length; ++i)\n    { if (array[i] == elt) { return i } }\n  return -1\n}\n\n// Number of pixels added to scroller and sizer to hide scrollbar\nvar scrollerGap = 30;\n\n// Returned or thrown by various protocols to signal 'I'm not\n// handling this'.\nvar Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n// Reused option objects for setSelection & friends\nvar sel_dontScroll = {scroll: false};\nvar sel_mouse = {origin: \"*mouse\"};\nvar sel_move = {origin: \"+move\"};\n\n// The inverse of countColumn -- find the offset that corresponds to\n// a particular column.\nfunction findColumn(string, goal, tabSize) {\n  for (var pos = 0, col = 0;;) {\n    var nextTab = string.indexOf(\"\\t\", pos);\n    if (nextTab == -1) { nextTab = string.length; }\n    var skipped = nextTab - pos;\n    if (nextTab == string.length || col + skipped >= goal)\n      { return pos + Math.min(skipped, goal - col) }\n    col += nextTab - pos;\n    col += tabSize - (col % tabSize);\n    pos = nextTab + 1;\n    if (col >= goal) { return pos }\n  }\n}\n\nvar spaceStrs = [\"\"];\nfunction spaceStr(n) {\n  while (spaceStrs.length <= n)\n    { spaceStrs.push(lst(spaceStrs) + \" \"); }\n  return spaceStrs[n]\n}\n\nfunction lst(arr) { return arr[arr.length-1] }\n\nfunction map(array, f) {\n  var out = [];\n  for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n  return out\n}\n\nfunction insertSorted(array, value, score) {\n  var pos = 0, priority = score(value);\n  while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n  array.splice(pos, 0, value);\n}\n\nfunction nothing() {}\n\nfunction createObj(base, props) {\n  var inst;\n  if (Object.create) {\n    inst = Object.create(base);\n  } else {\n    nothing.prototype = base;\n    inst = new nothing();\n  }\n  if (props) { copyObj(props, inst); }\n  return inst\n}\n\nvar nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\nfunction isWordCharBasic(ch) {\n  return /\\w/.test(ch) || ch > \"\\x80\" &&\n    (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n}\nfunction isWordChar(ch, helper) {\n  if (!helper) { return isWordCharBasic(ch) }\n  if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n  return helper.test(ch)\n}\n\nfunction isEmpty(obj) {\n  for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n  return true\n}\n\n// Extending unicode characters. A series of a non-extending char +\n// any number of extending chars is treated as a single unit as far\n// as editing and measuring is concerned. This is not fully correct,\n// since some scripts/fonts/browsers also treat other configurations\n// of code points as a group.\nvar extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\nfunction isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n// Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\nfunction skipExtendingChars(str, pos, dir) {\n  while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n  return pos\n}\n\n// Returns the value from the range [`from`; `to`] that satisfies\n// `pred` and is closest to `from`. Assumes that at least `to`\n// satisfies `pred`. Supports `from` being greater than `to`.\nfunction findFirst(pred, from, to) {\n  // At any point we are certain `to` satisfies `pred`, don't know\n  // whether `from` does.\n  var dir = from > to ? -1 : 1;\n  for (;;) {\n    if (from == to) { return from }\n    var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n    if (mid == from) { return pred(mid) ? from : to }\n    if (pred(mid)) { to = mid; }\n    else { from = mid + dir; }\n  }\n}\n\n// The display handles the DOM integration, both for input reading\n// and content drawing. It holds references to DOM nodes and\n// display-related state.\n\nfunction Display(place, doc, input) {\n  var d = this;\n  this.input = input;\n\n  // Covers bottom-right square when both scrollbars are present.\n  d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n  d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n  // Covers bottom of gutter when coverGutterNextToScrollbar is on\n  // and h scrollbar is present.\n  d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n  d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n  // Will contain the actual code, positioned to cover the viewport.\n  d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n  // Elements are added to these to represent selection and cursors.\n  d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n  d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n  // A visibility: hidden element used to find the size of things.\n  d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n  // When lines outside of the viewport are measured, they are drawn in this.\n  d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n  // Wraps everything that needs to exist inside the vertically-padded coordinate system\n  d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                    null, \"position: relative; outline: none\");\n  var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n  // Moved around its parent to cover visible view.\n  d.mover = elt(\"div\", [lines], null, \"position: relative\");\n  // Set to the height of the document, allowing scrolling.\n  d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n  d.sizerWidth = null;\n  // Behavior of elts with overflow: auto and padding is\n  // inconsistent across browsers. This is used to ensure the\n  // scrollable area is big enough.\n  d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n  // Will contain the gutters, if any.\n  d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n  d.lineGutter = null;\n  // Actual scrollable element.\n  d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n  d.scroller.setAttribute(\"tabIndex\", \"-1\");\n  // The element in which the editor lives.\n  d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n  // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n  if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n  if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n  if (place) {\n    if (place.appendChild) { place.appendChild(d.wrapper); }\n    else { place(d.wrapper); }\n  }\n\n  // Current rendered range (may be bigger than the view window).\n  d.viewFrom = d.viewTo = doc.first;\n  d.reportedViewFrom = d.reportedViewTo = doc.first;\n  // Information about the rendered lines.\n  d.view = [];\n  d.renderedView = null;\n  // Holds info about a single rendered line when it was rendered\n  // for measurement, while not in view.\n  d.externalMeasured = null;\n  // Empty space (in pixels) above the view\n  d.viewOffset = 0;\n  d.lastWrapHeight = d.lastWrapWidth = 0;\n  d.updateLineNumbers = null;\n\n  d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n  d.scrollbarsClipped = false;\n\n  // Used to only resize the line number gutter when necessary (when\n  // the amount of lines crosses a boundary that makes its width change)\n  d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n  // Set to true when a non-horizontal-scrolling line widget is\n  // added. As an optimization, line widget aligning is skipped when\n  // this is false.\n  d.alignWidgets = false;\n\n  d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n  // Tracks the maximum line length so that the horizontal scrollbar\n  // can be kept static when scrolling.\n  d.maxLine = null;\n  d.maxLineLength = 0;\n  d.maxLineChanged = false;\n\n  // Used for measuring wheel scrolling granularity\n  d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n  // True when shift is held down.\n  d.shift = false;\n\n  // Used to track whether anything happened since the context menu\n  // was opened.\n  d.selForContextMenu = null;\n\n  d.activeTouch = null;\n\n  input.init(d);\n}\n\n// Find the line object corresponding to the given line number.\nfunction getLine(doc, n) {\n  n -= doc.first;\n  if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n  var chunk = doc;\n  while (!chunk.lines) {\n    for (var i = 0;; ++i) {\n      var child = chunk.children[i], sz = child.chunkSize();\n      if (n < sz) { chunk = child; break }\n      n -= sz;\n    }\n  }\n  return chunk.lines[n]\n}\n\n// Get the part of a document between two positions, as an array of\n// strings.\nfunction getBetween(doc, start, end) {\n  var out = [], n = start.line;\n  doc.iter(start.line, end.line + 1, function (line) {\n    var text = line.text;\n    if (n == end.line) { text = text.slice(0, end.ch); }\n    if (n == start.line) { text = text.slice(start.ch); }\n    out.push(text);\n    ++n;\n  });\n  return out\n}\n// Get the lines between from and to, as array of strings.\nfunction getLines(doc, from, to) {\n  var out = [];\n  doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n  return out\n}\n\n// Update the height of a line, propagating the height change\n// upwards to parent nodes.\nfunction updateLineHeight(line, height) {\n  var diff = height - line.height;\n  if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n}\n\n// Given a line object, find its line number by walking up through\n// its parent links.\nfunction lineNo(line) {\n  if (line.parent == null) { return null }\n  var cur = line.parent, no = indexOf(cur.lines, line);\n  for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n    for (var i = 0;; ++i) {\n      if (chunk.children[i] == cur) { break }\n      no += chunk.children[i].chunkSize();\n    }\n  }\n  return no + cur.first\n}\n\n// Find the line at the given vertical position, using the height\n// information in the document tree.\nfunction lineAtHeight(chunk, h) {\n  var n = chunk.first;\n  outer: do {\n    for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n      var child = chunk.children[i$1], ch = child.height;\n      if (h < ch) { chunk = child; continue outer }\n      h -= ch;\n      n += child.chunkSize();\n    }\n    return n\n  } while (!chunk.lines)\n  var i = 0;\n  for (; i < chunk.lines.length; ++i) {\n    var line = chunk.lines[i], lh = line.height;\n    if (h < lh) { break }\n    h -= lh;\n  }\n  return n + i\n}\n\nfunction isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\nfunction lineNumberFor(options, i) {\n  return String(options.lineNumberFormatter(i + options.firstLineNumber))\n}\n\n// A Pos instance represents a position within the text.\nfunction Pos(line, ch, sticky) {\n  if ( sticky === void 0 ) sticky = null;\n\n  if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n  this.line = line;\n  this.ch = ch;\n  this.sticky = sticky;\n}\n\n// Compare two positions, return 0 if they are the same, a negative\n// number when a is less, and a positive number otherwise.\nfunction cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\nfunction equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\nfunction copyPos(x) {return Pos(x.line, x.ch)}\nfunction maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\nfunction minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n// Most of the external API clips given positions to make sure they\n// actually exist within the document.\nfunction clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\nfunction clipPos(doc, pos) {\n  if (pos.line < doc.first) { return Pos(doc.first, 0) }\n  var last = doc.first + doc.size - 1;\n  if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n  return clipToLen(pos, getLine(doc, pos.line).text.length)\n}\nfunction clipToLen(pos, linelen) {\n  var ch = pos.ch;\n  if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n  else if (ch < 0) { return Pos(pos.line, 0) }\n  else { return pos }\n}\nfunction clipPosArray(doc, array) {\n  var out = [];\n  for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n  return out\n}\n\n// Optimize some code when these features are not used.\nvar sawReadOnlySpans = false;\nvar sawCollapsedSpans = false;\n\nfunction seeReadOnlySpans() {\n  sawReadOnlySpans = true;\n}\n\nfunction seeCollapsedSpans() {\n  sawCollapsedSpans = true;\n}\n\n// TEXTMARKER SPANS\n\nfunction MarkedSpan(marker, from, to) {\n  this.marker = marker;\n  this.from = from; this.to = to;\n}\n\n// Search an array of spans for a span matching the given marker.\nfunction getMarkedSpanFor(spans, marker) {\n  if (spans) { for (var i = 0; i < spans.length; ++i) {\n    var span = spans[i];\n    if (span.marker == marker) { return span }\n  } }\n}\n// Remove a span from an array, returning undefined if no spans are\n// left (we don't store arrays for lines without spans).\nfunction removeMarkedSpan(spans, span) {\n  var r;\n  for (var i = 0; i < spans.length; ++i)\n    { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n  return r\n}\n// Add a span to a line.\nfunction addMarkedSpan(line, span) {\n  line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n  span.marker.attachLine(line);\n}\n\n// Used for the algorithm that adjusts markers for a change in the\n// document. These functions cut an array of spans at a given\n// character position, returning an array of remaining chunks (or\n// undefined if nothing remains).\nfunction markedSpansBefore(old, startCh, isInsert) {\n  var nw;\n  if (old) { for (var i = 0; i < old.length; ++i) {\n    var span = old[i], marker = span.marker;\n    var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n    if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n    }\n  } }\n  return nw\n}\nfunction markedSpansAfter(old, endCh, isInsert) {\n  var nw;\n  if (old) { for (var i = 0; i < old.length; ++i) {\n    var span = old[i], marker = span.marker;\n    var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n    if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                            span.to == null ? null : span.to - endCh));\n    }\n  } }\n  return nw\n}\n\n// Given a change object, compute the new set of marker spans that\n// cover the line in which the change took place. Removes spans\n// entirely within the change, reconnects spans belonging to the\n// same marker that appear on both sides of the change, and cuts off\n// spans partially within the change. Returns an array of span\n// arrays with one element for each line in (after) the change.\nfunction stretchSpansOverChange(doc, change) {\n  if (change.full) { return null }\n  var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n  var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n  if (!oldFirst && !oldLast) { return null }\n\n  var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n  // Get the spans that 'stick out' on both sides\n  var first = markedSpansBefore(oldFirst, startCh, isInsert);\n  var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n  // Next, merge those two ends\n  var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n  if (first) {\n    // Fix up .to properties of first\n    for (var i = 0; i < first.length; ++i) {\n      var span = first[i];\n      if (span.to == null) {\n        var found = getMarkedSpanFor(last, span.marker);\n        if (!found) { span.to = startCh; }\n        else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n      }\n    }\n  }\n  if (last) {\n    // Fix up .from in last (or move them into first in case of sameLine)\n    for (var i$1 = 0; i$1 < last.length; ++i$1) {\n      var span$1 = last[i$1];\n      if (span$1.to != null) { span$1.to += offset; }\n      if (span$1.from == null) {\n        var found$1 = getMarkedSpanFor(first, span$1.marker);\n        if (!found$1) {\n          span$1.from = offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      } else {\n        span$1.from += offset;\n        if (sameLine) { (first || (first = [])).push(span$1); }\n      }\n    }\n  }\n  // Make sure we didn't create any zero-length spans\n  if (first) { first = clearEmptySpans(first); }\n  if (last && last != first) { last = clearEmptySpans(last); }\n\n  var newMarkers = [first];\n  if (!sameLine) {\n    // Fill gap with whole-line-spans\n    var gap = change.text.length - 2, gapMarkers;\n    if (gap > 0 && first)\n      { for (var i$2 = 0; i$2 < first.length; ++i$2)\n        { if (first[i$2].to == null)\n          { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n    for (var i$3 = 0; i$3 < gap; ++i$3)\n      { newMarkers.push(gapMarkers); }\n    newMarkers.push(last);\n  }\n  return newMarkers\n}\n\n// Remove spans that are empty and don't have a clearWhenEmpty\n// option of false.\nfunction clearEmptySpans(spans) {\n  for (var i = 0; i < spans.length; ++i) {\n    var span = spans[i];\n    if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n      { spans.splice(i--, 1); }\n  }\n  if (!spans.length) { return null }\n  return spans\n}\n\n// Used to 'clip' out readOnly ranges when making a change.\nfunction removeReadOnlyRanges(doc, from, to) {\n  var markers = null;\n  doc.iter(from.line, to.line + 1, function (line) {\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var mark = line.markedSpans[i].marker;\n      if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n        { (markers || (markers = [])).push(mark); }\n    } }\n  });\n  if (!markers) { return null }\n  var parts = [{from: from, to: to}];\n  for (var i = 0; i < markers.length; ++i) {\n    var mk = markers[i], m = mk.find(0);\n    for (var j = 0; j < parts.length; ++j) {\n      var p = parts[j];\n      if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n      var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n      if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n        { newParts.push({from: p.from, to: m.from}); }\n      if (dto > 0 || !mk.inclusiveRight && !dto)\n        { newParts.push({from: m.to, to: p.to}); }\n      parts.splice.apply(parts, newParts);\n      j += newParts.length - 3;\n    }\n  }\n  return parts\n}\n\n// Connect or disconnect spans from a line.\nfunction detachMarkedSpans(line) {\n  var spans = line.markedSpans;\n  if (!spans) { return }\n  for (var i = 0; i < spans.length; ++i)\n    { spans[i].marker.detachLine(line); }\n  line.markedSpans = null;\n}\nfunction attachMarkedSpans(line, spans) {\n  if (!spans) { return }\n  for (var i = 0; i < spans.length; ++i)\n    { spans[i].marker.attachLine(line); }\n  line.markedSpans = spans;\n}\n\n// Helpers used when computing which overlapping collapsed span\n// counts as the larger one.\nfunction extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\nfunction extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n// Returns a number indicating which of two overlapping collapsed\n// spans is larger (and thus includes the other). Falls back to\n// comparing ids when the spans cover exactly the same range.\nfunction compareCollapsedMarkers(a, b) {\n  var lenDiff = a.lines.length - b.lines.length;\n  if (lenDiff != 0) { return lenDiff }\n  var aPos = a.find(), bPos = b.find();\n  var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n  if (fromCmp) { return -fromCmp }\n  var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n  if (toCmp) { return toCmp }\n  return b.id - a.id\n}\n\n// Find out whether a line ends or starts in a collapsed span. If\n// so, return the marker for that span.\nfunction collapsedSpanAtSide(line, start) {\n  var sps = sawCollapsedSpans && line.markedSpans, found;\n  if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n    sp = sps[i];\n    if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n        (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n      { found = sp.marker; }\n  } }\n  return found\n}\nfunction collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\nfunction collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n// Test whether there exists a collapsed span that partially\n// overlaps (covers the start or end, but not both) of a new span.\n// Such overlap is not allowed.\nfunction conflictingCollapsedRange(doc, lineNo$$1, from, to, marker) {\n  var line = getLine(doc, lineNo$$1);\n  var sps = sawCollapsedSpans && line.markedSpans;\n  if (sps) { for (var i = 0; i < sps.length; ++i) {\n    var sp = sps[i];\n    if (!sp.marker.collapsed) { continue }\n    var found = sp.marker.find(0);\n    var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n    var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n    if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n    if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n        fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n      { return true }\n  } }\n}\n\n// A visual line is a line as drawn on the screen. Folding, for\n// example, can cause multiple logical lines to appear on the same\n// visual line. This finds the start of the visual line that the\n// given line is part of (usually that is the line itself).\nfunction visualLine(line) {\n  var merged;\n  while (merged = collapsedSpanAtStart(line))\n    { line = merged.find(-1, true).line; }\n  return line\n}\n\nfunction visualLineEnd(line) {\n  var merged;\n  while (merged = collapsedSpanAtEnd(line))\n    { line = merged.find(1, true).line; }\n  return line\n}\n\n// Returns an array of logical lines that continue the visual line\n// started by the argument, or undefined if there are no such lines.\nfunction visualLineContinued(line) {\n  var merged, lines;\n  while (merged = collapsedSpanAtEnd(line)) {\n    line = merged.find(1, true).line\n    ;(lines || (lines = [])).push(line);\n  }\n  return lines\n}\n\n// Get the line number of the start of the visual line that the\n// given line number is part of.\nfunction visualLineNo(doc, lineN) {\n  var line = getLine(doc, lineN), vis = visualLine(line);\n  if (line == vis) { return lineN }\n  return lineNo(vis)\n}\n\n// Get the line number of the start of the next visual line after\n// the given line.\nfunction visualLineEndNo(doc, lineN) {\n  if (lineN > doc.lastLine()) { return lineN }\n  var line = getLine(doc, lineN), merged;\n  if (!lineIsHidden(doc, line)) { return lineN }\n  while (merged = collapsedSpanAtEnd(line))\n    { line = merged.find(1, true).line; }\n  return lineNo(line) + 1\n}\n\n// Compute whether a line is hidden. Lines count as hidden when they\n// are part of a visual line that starts with another line, or when\n// they are entirely covered by collapsed, non-widget span.\nfunction lineIsHidden(doc, line) {\n  var sps = sawCollapsedSpans && line.markedSpans;\n  if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n    sp = sps[i];\n    if (!sp.marker.collapsed) { continue }\n    if (sp.from == null) { return true }\n    if (sp.marker.widgetNode) { continue }\n    if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n      { return true }\n  } }\n}\nfunction lineIsHiddenInner(doc, line, span) {\n  if (span.to == null) {\n    var end = span.marker.find(1, true);\n    return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n  }\n  if (span.marker.inclusiveRight && span.to == line.text.length)\n    { return true }\n  for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n    sp = line.markedSpans[i];\n    if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n        (sp.to == null || sp.to != span.from) &&\n        (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n        lineIsHiddenInner(doc, line, sp)) { return true }\n  }\n}\n\n// Find the height above the given line.\nfunction heightAtLine(lineObj) {\n  lineObj = visualLine(lineObj);\n\n  var h = 0, chunk = lineObj.parent;\n  for (var i = 0; i < chunk.lines.length; ++i) {\n    var line = chunk.lines[i];\n    if (line == lineObj) { break }\n    else { h += line.height; }\n  }\n  for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n    for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n      var cur = p.children[i$1];\n      if (cur == chunk) { break }\n      else { h += cur.height; }\n    }\n  }\n  return h\n}\n\n// Compute the character length of a line, taking into account\n// collapsed ranges (see markText) that might hide parts, and join\n// other lines onto it.\nfunction lineLength(line) {\n  if (line.height == 0) { return 0 }\n  var len = line.text.length, merged, cur = line;\n  while (merged = collapsedSpanAtStart(cur)) {\n    var found = merged.find(0, true);\n    cur = found.from.line;\n    len += found.from.ch - found.to.ch;\n  }\n  cur = line;\n  while (merged = collapsedSpanAtEnd(cur)) {\n    var found$1 = merged.find(0, true);\n    len -= cur.text.length - found$1.from.ch;\n    cur = found$1.to.line;\n    len += cur.text.length - found$1.to.ch;\n  }\n  return len\n}\n\n// Find the longest line in the document.\nfunction findMaxLine(cm) {\n  var d = cm.display, doc = cm.doc;\n  d.maxLine = getLine(doc, doc.first);\n  d.maxLineLength = lineLength(d.maxLine);\n  d.maxLineChanged = true;\n  doc.iter(function (line) {\n    var len = lineLength(line);\n    if (len > d.maxLineLength) {\n      d.maxLineLength = len;\n      d.maxLine = line;\n    }\n  });\n}\n\n// BIDI HELPERS\n\nfunction iterateBidiSections(order, from, to, f) {\n  if (!order) { return f(from, to, \"ltr\", 0) }\n  var found = false;\n  for (var i = 0; i < order.length; ++i) {\n    var part = order[i];\n    if (part.from < to && part.to > from || from == to && part.to == from) {\n      f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n      found = true;\n    }\n  }\n  if (!found) { f(from, to, \"ltr\"); }\n}\n\nvar bidiOther = null;\nfunction getBidiPartAt(order, ch, sticky) {\n  var found;\n  bidiOther = null;\n  for (var i = 0; i < order.length; ++i) {\n    var cur = order[i];\n    if (cur.from < ch && cur.to > ch) { return i }\n    if (cur.to == ch) {\n      if (cur.from != cur.to && sticky == \"before\") { found = i; }\n      else { bidiOther = i; }\n    }\n    if (cur.from == ch) {\n      if (cur.from != cur.to && sticky != \"before\") { found = i; }\n      else { bidiOther = i; }\n    }\n  }\n  return found != null ? found : bidiOther\n}\n\n// Bidirectional ordering algorithm\n// See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n// that this (partially) implements.\n\n// One-char codes used for character types:\n// L (L):   Left-to-Right\n// R (R):   Right-to-Left\n// r (AL):  Right-to-Left Arabic\n// 1 (EN):  European Number\n// + (ES):  European Number Separator\n// % (ET):  European Number Terminator\n// n (AN):  Arabic Number\n// , (CS):  Common Number Separator\n// m (NSM): Non-Spacing Mark\n// b (BN):  Boundary Neutral\n// s (B):   Paragraph Separator\n// t (S):   Segment Separator\n// w (WS):  Whitespace\n// N (ON):  Other Neutrals\n\n// Returns null if characters are ordered as they appear\n// (left-to-right), or an array of sections ({from, to, level}\n// objects) in the order in which they occur visually.\nvar bidiOrdering = (function() {\n  // Character types for codepoints 0 to 0xff\n  var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n  // Character types for codepoints 0x600 to 0x6f9\n  var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n  function charType(code) {\n    if (code <= 0xf7) { return lowTypes.charAt(code) }\n    else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n    else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n    else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n    else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n    else if (code == 0x200c) { return \"b\" }\n    else { return \"L\" }\n  }\n\n  var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n  var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n  function BidiSpan(level, from, to) {\n    this.level = level;\n    this.from = from; this.to = to;\n  }\n\n  return function(str, direction) {\n    var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n    if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n    var len = str.length, types = [];\n    for (var i = 0; i < len; ++i)\n      { types.push(charType(str.charCodeAt(i))); }\n\n    // W1. Examine each non-spacing mark (NSM) in the level run, and\n    // change the type of the NSM to the type of the previous\n    // character. If the NSM is at the start of the level run, it will\n    // get the type of sor.\n    for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n      var type = types[i$1];\n      if (type == \"m\") { types[i$1] = prev; }\n      else { prev = type; }\n    }\n\n    // W2. Search backwards from each instance of a European number\n    // until the first strong type (R, L, AL, or sor) is found. If an\n    // AL is found, change the type of the European number to Arabic\n    // number.\n    // W3. Change all ALs to R.\n    for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n      var type$1 = types[i$2];\n      if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n      else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n    }\n\n    // W4. A single European separator between two European numbers\n    // changes to a European number. A single common separator between\n    // two numbers of the same type changes to that type.\n    for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n      var type$2 = types[i$3];\n      if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n      else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n               (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n      prev$1 = type$2;\n    }\n\n    // W5. A sequence of European terminators adjacent to European\n    // numbers changes to all European numbers.\n    // W6. Otherwise, separators and terminators change to Other\n    // Neutral.\n    for (var i$4 = 0; i$4 < len; ++i$4) {\n      var type$3 = types[i$4];\n      if (type$3 == \",\") { types[i$4] = \"N\"; }\n      else if (type$3 == \"%\") {\n        var end = (void 0);\n        for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n        var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n        for (var j = i$4; j < end; ++j) { types[j] = replace; }\n        i$4 = end - 1;\n      }\n    }\n\n    // W7. Search backwards from each instance of a European number\n    // until the first strong type (R, L, or sor) is found. If an L is\n    // found, then change the type of the European number to L.\n    for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n      var type$4 = types[i$5];\n      if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n      else if (isStrong.test(type$4)) { cur$1 = type$4; }\n    }\n\n    // N1. A sequence of neutrals takes the direction of the\n    // surrounding strong text if the text on both sides has the same\n    // direction. European and Arabic numbers act as if they were R in\n    // terms of their influence on neutrals. Start-of-level-run (sor)\n    // and end-of-level-run (eor) are used at level run boundaries.\n    // N2. Any remaining neutrals take the embedding direction.\n    for (var i$6 = 0; i$6 < len; ++i$6) {\n      if (isNeutral.test(types[i$6])) {\n        var end$1 = (void 0);\n        for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n        var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n        var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n        var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n        for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n        i$6 = end$1 - 1;\n      }\n    }\n\n    // Here we depart from the documented algorithm, in order to avoid\n    // building up an actual levels array. Since there are only three\n    // levels (0, 1, 2) in an implementation that doesn't take\n    // explicit embedding into account, we can build up the order on\n    // the fly, without following the level-based algorithm.\n    var order = [], m;\n    for (var i$7 = 0; i$7 < len;) {\n      if (countsAsLeft.test(types[i$7])) {\n        var start = i$7;\n        for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n        order.push(new BidiSpan(0, start, i$7));\n      } else {\n        var pos = i$7, at = order.length;\n        for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n        for (var j$2 = pos; j$2 < i$7;) {\n          if (countsAsNum.test(types[j$2])) {\n            if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); }\n            var nstart = j$2;\n            for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n            order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n            pos = j$2;\n          } else { ++j$2; }\n        }\n        if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n      }\n    }\n    if (direction == \"ltr\") {\n      if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n        order[0].from = m[0].length;\n        order.unshift(new BidiSpan(0, 0, m[0].length));\n      }\n      if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n        lst(order).to -= m[0].length;\n        order.push(new BidiSpan(0, len - m[0].length, len));\n      }\n    }\n\n    return direction == \"rtl\" ? order.reverse() : order\n  }\n})();\n\n// Get the bidi ordering for the given line (and cache it). Returns\n// false for lines that are fully left-to-right, and an array of\n// BidiSpan objects otherwise.\nfunction getOrder(line, direction) {\n  var order = line.order;\n  if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n  return order\n}\n\n// EVENT HANDLING\n\n// Lightweight event framework. on/off also work on DOM nodes,\n// registering native DOM handlers.\n\nvar noHandlers = [];\n\nvar on = function(emitter, type, f) {\n  if (emitter.addEventListener) {\n    emitter.addEventListener(type, f, false);\n  } else if (emitter.attachEvent) {\n    emitter.attachEvent(\"on\" + type, f);\n  } else {\n    var map$$1 = emitter._handlers || (emitter._handlers = {});\n    map$$1[type] = (map$$1[type] || noHandlers).concat(f);\n  }\n};\n\nfunction getHandlers(emitter, type) {\n  return emitter._handlers && emitter._handlers[type] || noHandlers\n}\n\nfunction off(emitter, type, f) {\n  if (emitter.removeEventListener) {\n    emitter.removeEventListener(type, f, false);\n  } else if (emitter.detachEvent) {\n    emitter.detachEvent(\"on\" + type, f);\n  } else {\n    var map$$1 = emitter._handlers, arr = map$$1 && map$$1[type];\n    if (arr) {\n      var index = indexOf(arr, f);\n      if (index > -1)\n        { map$$1[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n    }\n  }\n}\n\nfunction signal(emitter, type /*, values...*/) {\n  var handlers = getHandlers(emitter, type);\n  if (!handlers.length) { return }\n  var args = Array.prototype.slice.call(arguments, 2);\n  for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n}\n\n// The DOM events that CodeMirror handles can be overridden by\n// registering a (non-DOM) handler on the editor for the event name,\n// and preventDefault-ing the event in that handler.\nfunction signalDOMEvent(cm, e, override) {\n  if (typeof e == \"string\")\n    { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n  signal(cm, override || e.type, cm, e);\n  return e_defaultPrevented(e) || e.codemirrorIgnore\n}\n\nfunction signalCursorActivity(cm) {\n  var arr = cm._handlers && cm._handlers.cursorActivity;\n  if (!arr) { return }\n  var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n  for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n    { set.push(arr[i]); } }\n}\n\nfunction hasHandler(emitter, type) {\n  return getHandlers(emitter, type).length > 0\n}\n\n// Add on and off methods to a constructor's prototype, to make\n// registering events on such objects more convenient.\nfunction eventMixin(ctor) {\n  ctor.prototype.on = function(type, f) {on(this, type, f);};\n  ctor.prototype.off = function(type, f) {off(this, type, f);};\n}\n\n// Due to the fact that we still support jurassic IE versions, some\n// compatibility wrappers are needed.\n\nfunction e_preventDefault(e) {\n  if (e.preventDefault) { e.preventDefault(); }\n  else { e.returnValue = false; }\n}\nfunction e_stopPropagation(e) {\n  if (e.stopPropagation) { e.stopPropagation(); }\n  else { e.cancelBubble = true; }\n}\nfunction e_defaultPrevented(e) {\n  return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n}\nfunction e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\nfunction e_target(e) {return e.target || e.srcElement}\nfunction e_button(e) {\n  var b = e.which;\n  if (b == null) {\n    if (e.button & 1) { b = 1; }\n    else if (e.button & 2) { b = 3; }\n    else if (e.button & 4) { b = 2; }\n  }\n  if (mac && e.ctrlKey && b == 1) { b = 3; }\n  return b\n}\n\n// Detect drag-and-drop\nvar dragAndDrop = function() {\n  // There is *some* kind of drag-and-drop support in IE6-8, but I\n  // couldn't get it to work yet.\n  if (ie && ie_version < 9) { return false }\n  var div = elt('div');\n  return \"draggable\" in div || \"dragDrop\" in div\n}();\n\nvar zwspSupported;\nfunction zeroWidthElement(measure) {\n  if (zwspSupported == null) {\n    var test = elt(\"span\", \"\\u200b\");\n    removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n    if (measure.firstChild.offsetHeight != 0)\n      { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n  }\n  var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n    elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n  node.setAttribute(\"cm-text\", \"\");\n  return node\n}\n\n// Feature-detect IE's crummy client rect reporting for bidi text\nvar badBidiRects;\nfunction hasBadBidiRects(measure) {\n  if (badBidiRects != null) { return badBidiRects }\n  var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n  var r0 = range(txt, 0, 1).getBoundingClientRect();\n  var r1 = range(txt, 1, 2).getBoundingClientRect();\n  removeChildren(measure);\n  if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n  return badBidiRects = (r1.right - r0.right < 3)\n}\n\n// See if \"\".split is the broken IE version, if so, provide an\n// alternative way to split lines.\nvar splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n  var pos = 0, result = [], l = string.length;\n  while (pos <= l) {\n    var nl = string.indexOf(\"\\n\", pos);\n    if (nl == -1) { nl = string.length; }\n    var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n    var rt = line.indexOf(\"\\r\");\n    if (rt != -1) {\n      result.push(line.slice(0, rt));\n      pos += rt + 1;\n    } else {\n      result.push(line);\n      pos = nl + 1;\n    }\n  }\n  return result\n} : function (string) { return string.split(/\\r\\n?|\\n/); };\n\nvar hasSelection = window.getSelection ? function (te) {\n  try { return te.selectionStart != te.selectionEnd }\n  catch(e) { return false }\n} : function (te) {\n  var range$$1;\n  try {range$$1 = te.ownerDocument.selection.createRange();}\n  catch(e) {}\n  if (!range$$1 || range$$1.parentElement() != te) { return false }\n  return range$$1.compareEndPoints(\"StartToEnd\", range$$1) != 0\n};\n\nvar hasCopyEvent = (function () {\n  var e = elt(\"div\");\n  if (\"oncopy\" in e) { return true }\n  e.setAttribute(\"oncopy\", \"return;\");\n  return typeof e.oncopy == \"function\"\n})();\n\nvar badZoomedRects = null;\nfunction hasBadZoomedRects(measure) {\n  if (badZoomedRects != null) { return badZoomedRects }\n  var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n  var normal = node.getBoundingClientRect();\n  var fromRange = range(node, 0, 1).getBoundingClientRect();\n  return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n}\n\n// Known modes, by name and by MIME\nvar modes = {};\nvar mimeModes = {};\n\n// Extra arguments are stored as the mode's dependencies, which is\n// used by (legacy) mechanisms like loadmode.js to automatically\n// load a mode. (Preferred mechanism is the require/define calls.)\nfunction defineMode(name, mode) {\n  if (arguments.length > 2)\n    { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n  modes[name] = mode;\n}\n\nfunction defineMIME(mime, spec) {\n  mimeModes[mime] = spec;\n}\n\n// Given a MIME type, a {name, ...options} config object, or a name\n// string, return a mode config object.\nfunction resolveMode(spec) {\n  if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n    spec = mimeModes[spec];\n  } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n    var found = mimeModes[spec.name];\n    if (typeof found == \"string\") { found = {name: found}; }\n    spec = createObj(found, spec);\n    spec.name = found.name;\n  } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n    return resolveMode(\"application/xml\")\n  } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n    return resolveMode(\"application/json\")\n  }\n  if (typeof spec == \"string\") { return {name: spec} }\n  else { return spec || {name: \"null\"} }\n}\n\n// Given a mode spec (anything that resolveMode accepts), find and\n// initialize an actual mode object.\nfunction getMode(options, spec) {\n  spec = resolveMode(spec);\n  var mfactory = modes[spec.name];\n  if (!mfactory) { return getMode(options, \"text/plain\") }\n  var modeObj = mfactory(options, spec);\n  if (modeExtensions.hasOwnProperty(spec.name)) {\n    var exts = modeExtensions[spec.name];\n    for (var prop in exts) {\n      if (!exts.hasOwnProperty(prop)) { continue }\n      if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n      modeObj[prop] = exts[prop];\n    }\n  }\n  modeObj.name = spec.name;\n  if (spec.helperType) { modeObj.helperType = spec.helperType; }\n  if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n    { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n  return modeObj\n}\n\n// This can be used to attach properties to mode objects from\n// outside the actual mode definition.\nvar modeExtensions = {};\nfunction extendMode(mode, properties) {\n  var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n  copyObj(properties, exts);\n}\n\nfunction copyState(mode, state) {\n  if (state === true) { return state }\n  if (mode.copyState) { return mode.copyState(state) }\n  var nstate = {};\n  for (var n in state) {\n    var val = state[n];\n    if (val instanceof Array) { val = val.concat([]); }\n    nstate[n] = val;\n  }\n  return nstate\n}\n\n// Given a mode and a state (for that mode), find the inner mode and\n// state at the position that the state refers to.\nfunction innerMode(mode, state) {\n  var info;\n  while (mode.innerMode) {\n    info = mode.innerMode(state);\n    if (!info || info.mode == mode) { break }\n    state = info.state;\n    mode = info.mode;\n  }\n  return info || {mode: mode, state: state}\n}\n\nfunction startState(mode, a1, a2) {\n  return mode.startState ? mode.startState(a1, a2) : true\n}\n\n// STRING STREAM\n\n// Fed to the mode parsers, provides helper functions to make\n// parsers more succinct.\n\nvar StringStream = function(string, tabSize, lineOracle) {\n  this.pos = this.start = 0;\n  this.string = string;\n  this.tabSize = tabSize || 8;\n  this.lastColumnPos = this.lastColumnValue = 0;\n  this.lineStart = 0;\n  this.lineOracle = lineOracle;\n};\n\nStringStream.prototype.eol = function () {return this.pos >= this.string.length};\nStringStream.prototype.sol = function () {return this.pos == this.lineStart};\nStringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\nStringStream.prototype.next = function () {\n  if (this.pos < this.string.length)\n    { return this.string.charAt(this.pos++) }\n};\nStringStream.prototype.eat = function (match) {\n  var ch = this.string.charAt(this.pos);\n  var ok;\n  if (typeof match == \"string\") { ok = ch == match; }\n  else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n  if (ok) {++this.pos; return ch}\n};\nStringStream.prototype.eatWhile = function (match) {\n  var start = this.pos;\n  while (this.eat(match)){}\n  return this.pos > start\n};\nStringStream.prototype.eatSpace = function () {\n    var this$1 = this;\n\n  var start = this.pos;\n  while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this$1.pos; }\n  return this.pos > start\n};\nStringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\nStringStream.prototype.skipTo = function (ch) {\n  var found = this.string.indexOf(ch, this.pos);\n  if (found > -1) {this.pos = found; return true}\n};\nStringStream.prototype.backUp = function (n) {this.pos -= n;};\nStringStream.prototype.column = function () {\n  if (this.lastColumnPos < this.start) {\n    this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n    this.lastColumnPos = this.start;\n  }\n  return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n};\nStringStream.prototype.indentation = function () {\n  return countColumn(this.string, null, this.tabSize) -\n    (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n};\nStringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n  if (typeof pattern == \"string\") {\n    var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n    var substr = this.string.substr(this.pos, pattern.length);\n    if (cased(substr) == cased(pattern)) {\n      if (consume !== false) { this.pos += pattern.length; }\n      return true\n    }\n  } else {\n    var match = this.string.slice(this.pos).match(pattern);\n    if (match && match.index > 0) { return null }\n    if (match && consume !== false) { this.pos += match[0].length; }\n    return match\n  }\n};\nStringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\nStringStream.prototype.hideFirstChars = function (n, inner) {\n  this.lineStart += n;\n  try { return inner() }\n  finally { this.lineStart -= n; }\n};\nStringStream.prototype.lookAhead = function (n) {\n  var oracle = this.lineOracle;\n  return oracle && oracle.lookAhead(n)\n};\nStringStream.prototype.baseToken = function () {\n  var oracle = this.lineOracle;\n  return oracle && oracle.baseToken(this.pos)\n};\n\nvar SavedContext = function(state, lookAhead) {\n  this.state = state;\n  this.lookAhead = lookAhead;\n};\n\nvar Context = function(doc, state, line, lookAhead) {\n  this.state = state;\n  this.doc = doc;\n  this.line = line;\n  this.maxLookAhead = lookAhead || 0;\n  this.baseTokens = null;\n  this.baseTokenPos = 1;\n};\n\nContext.prototype.lookAhead = function (n) {\n  var line = this.doc.getLine(this.line + n);\n  if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n  return line\n};\n\nContext.prototype.baseToken = function (n) {\n    var this$1 = this;\n\n  if (!this.baseTokens) { return null }\n  while (this.baseTokens[this.baseTokenPos] <= n)\n    { this$1.baseTokenPos += 2; }\n  var type = this.baseTokens[this.baseTokenPos + 1];\n  return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n          size: this.baseTokens[this.baseTokenPos] - n}\n};\n\nContext.prototype.nextLine = function () {\n  this.line++;\n  if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n};\n\nContext.fromSaved = function (doc, saved, line) {\n  if (saved instanceof SavedContext)\n    { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n  else\n    { return new Context(doc, copyState(doc.mode, saved), line) }\n};\n\nContext.prototype.save = function (copy) {\n  var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n  return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n};\n\n\n// Compute a style array (an array starting with a mode generation\n// -- for invalidation -- followed by pairs of end positions and\n// style strings), which is used to highlight the tokens on the\n// line.\nfunction highlightLine(cm, line, context, forceToEnd) {\n  // A styles array always starts with a number identifying the\n  // mode/overlays that it is based on (for easy invalidation).\n  var st = [cm.state.modeGen], lineClasses = {};\n  // Compute the base array of styles\n  runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n          lineClasses, forceToEnd);\n  var state = context.state;\n\n  // Run overlays, adjust style array.\n  var loop = function ( o ) {\n    context.baseTokens = st;\n    var overlay = cm.state.overlays[o], i = 1, at = 0;\n    context.state = true;\n    runMode(cm, line.text, overlay.mode, context, function (end, style) {\n      var start = i;\n      // Ensure there's a token end at the current position, and that i points at it\n      while (at < end) {\n        var i_end = st[i];\n        if (i_end > end)\n          { st.splice(i, 1, end, st[i+1], i_end); }\n        i += 2;\n        at = Math.min(end, i_end);\n      }\n      if (!style) { return }\n      if (overlay.opaque) {\n        st.splice(start, i - start, end, \"overlay \" + style);\n        i = start + 2;\n      } else {\n        for (; start < i; start += 2) {\n          var cur = st[start+1];\n          st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n        }\n      }\n    }, lineClasses);\n    context.state = state;\n    context.baseTokens = null;\n    context.baseTokenPos = 1;\n  };\n\n  for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n  return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n}\n\nfunction getLineStyles(cm, line, updateFrontier) {\n  if (!line.styles || line.styles[0] != cm.state.modeGen) {\n    var context = getContextBefore(cm, lineNo(line));\n    var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n    var result = highlightLine(cm, line, context);\n    if (resetState) { context.state = resetState; }\n    line.stateAfter = context.save(!resetState);\n    line.styles = result.styles;\n    if (result.classes) { line.styleClasses = result.classes; }\n    else if (line.styleClasses) { line.styleClasses = null; }\n    if (updateFrontier === cm.doc.highlightFrontier)\n      { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n  }\n  return line.styles\n}\n\nfunction getContextBefore(cm, n, precise) {\n  var doc = cm.doc, display = cm.display;\n  if (!doc.mode.startState) { return new Context(doc, true, n) }\n  var start = findStartLine(cm, n, precise);\n  var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n  var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n  doc.iter(start, n, function (line) {\n    processLine(cm, line.text, context);\n    var pos = context.line;\n    line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n    context.nextLine();\n  });\n  if (precise) { doc.modeFrontier = context.line; }\n  return context\n}\n\n// Lightweight form of highlight -- proceed over this line and\n// update state, but don't save a style array. Used for lines that\n// aren't currently visible.\nfunction processLine(cm, text, context, startAt) {\n  var mode = cm.doc.mode;\n  var stream = new StringStream(text, cm.options.tabSize, context);\n  stream.start = stream.pos = startAt || 0;\n  if (text == \"\") { callBlankLine(mode, context.state); }\n  while (!stream.eol()) {\n    readToken(mode, stream, context.state);\n    stream.start = stream.pos;\n  }\n}\n\nfunction callBlankLine(mode, state) {\n  if (mode.blankLine) { return mode.blankLine(state) }\n  if (!mode.innerMode) { return }\n  var inner = innerMode(mode, state);\n  if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n}\n\nfunction readToken(mode, stream, state, inner) {\n  for (var i = 0; i < 10; i++) {\n    if (inner) { inner[0] = innerMode(mode, state).mode; }\n    var style = mode.token(stream, state);\n    if (stream.pos > stream.start) { return style }\n  }\n  throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n}\n\nvar Token = function(stream, type, state) {\n  this.start = stream.start; this.end = stream.pos;\n  this.string = stream.current();\n  this.type = type || null;\n  this.state = state;\n};\n\n// Utility for getTokenAt and getLineTokens\nfunction takeToken(cm, pos, precise, asArray) {\n  var doc = cm.doc, mode = doc.mode, style;\n  pos = clipPos(doc, pos);\n  var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n  var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n  if (asArray) { tokens = []; }\n  while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n    stream.start = stream.pos;\n    style = readToken(mode, stream, context.state);\n    if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n  }\n  return asArray ? tokens : new Token(stream, style, context.state)\n}\n\nfunction extractLineClasses(type, output) {\n  if (type) { for (;;) {\n    var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n    if (!lineClass) { break }\n    type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n    var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n    if (output[prop] == null)\n      { output[prop] = lineClass[2]; }\n    else if (!(new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\")).test(output[prop]))\n      { output[prop] += \" \" + lineClass[2]; }\n  } }\n  return type\n}\n\n// Run the given mode's parser over a line, calling f for each token.\nfunction runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n  var flattenSpans = mode.flattenSpans;\n  if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n  var curStart = 0, curStyle = null;\n  var stream = new StringStream(text, cm.options.tabSize, context), style;\n  var inner = cm.options.addModeClass && [null];\n  if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n  while (!stream.eol()) {\n    if (stream.pos > cm.options.maxHighlightLength) {\n      flattenSpans = false;\n      if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n      stream.pos = text.length;\n      style = null;\n    } else {\n      style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n    }\n    if (inner) {\n      var mName = inner[0].name;\n      if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n    }\n    if (!flattenSpans || curStyle != style) {\n      while (curStart < stream.start) {\n        curStart = Math.min(stream.start, curStart + 5000);\n        f(curStart, curStyle);\n      }\n      curStyle = style;\n    }\n    stream.start = stream.pos;\n  }\n  while (curStart < stream.pos) {\n    // Webkit seems to refuse to render text nodes longer than 57444\n    // characters, and returns inaccurate measurements in nodes\n    // starting around 5000 chars.\n    var pos = Math.min(stream.pos, curStart + 5000);\n    f(pos, curStyle);\n    curStart = pos;\n  }\n}\n\n// Finds the line to start with when starting a parse. Tries to\n// find a line with a stateAfter, so that it can start with a\n// valid state. If that fails, it returns the line with the\n// smallest indentation, which tends to need the least context to\n// parse correctly.\nfunction findStartLine(cm, n, precise) {\n  var minindent, minline, doc = cm.doc;\n  var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n  for (var search = n; search > lim; --search) {\n    if (search <= doc.first) { return doc.first }\n    var line = getLine(doc, search - 1), after = line.stateAfter;\n    if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n      { return search }\n    var indented = countColumn(line.text, null, cm.options.tabSize);\n    if (minline == null || minindent > indented) {\n      minline = search - 1;\n      minindent = indented;\n    }\n  }\n  return minline\n}\n\nfunction retreatFrontier(doc, n) {\n  doc.modeFrontier = Math.min(doc.modeFrontier, n);\n  if (doc.highlightFrontier < n - 10) { return }\n  var start = doc.first;\n  for (var line = n - 1; line > start; line--) {\n    var saved = getLine(doc, line).stateAfter;\n    // change is on 3\n    // state on line 1 looked ahead 2 -- so saw 3\n    // test 1 + 2 < 3 should cover this\n    if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n      start = line + 1;\n      break\n    }\n  }\n  doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n}\n\n// LINE DATA STRUCTURE\n\n// Line objects. These hold state related to a line, including\n// highlighting info (the styles array).\nvar Line = function(text, markedSpans, estimateHeight) {\n  this.text = text;\n  attachMarkedSpans(this, markedSpans);\n  this.height = estimateHeight ? estimateHeight(this) : 1;\n};\n\nLine.prototype.lineNo = function () { return lineNo(this) };\neventMixin(Line);\n\n// Change the content (text, markers) of a line. Automatically\n// invalidates cached information and tries to re-estimate the\n// line's height.\nfunction updateLine(line, text, markedSpans, estimateHeight) {\n  line.text = text;\n  if (line.stateAfter) { line.stateAfter = null; }\n  if (line.styles) { line.styles = null; }\n  if (line.order != null) { line.order = null; }\n  detachMarkedSpans(line);\n  attachMarkedSpans(line, markedSpans);\n  var estHeight = estimateHeight ? estimateHeight(line) : 1;\n  if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n}\n\n// Detach a line from the document tree and its markers.\nfunction cleanUpLine(line) {\n  line.parent = null;\n  detachMarkedSpans(line);\n}\n\n// Convert a style as returned by a mode (either null, or a string\n// containing one or more styles) to a CSS style. This is cached,\n// and also looks for line-wide styles.\nvar styleToClassCache = {};\nvar styleToClassCacheWithMode = {};\nfunction interpretTokenStyle(style, options) {\n  if (!style || /^\\s*$/.test(style)) { return null }\n  var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n  return cache[style] ||\n    (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n}\n\n// Render the DOM representation of the text of a line. Also builds\n// up a 'line map', which points at the DOM nodes that represent\n// specific stretches of text, and is used by the measuring code.\n// The returned object contains the DOM node, this map, and\n// information about line-wide styles that were set by the mode.\nfunction buildLineContent(cm, lineView) {\n  // The padding-right forces the element to have a 'border', which\n  // is needed on Webkit to be able to get line-level bounding\n  // rectangles for it (in measureChar).\n  var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n  var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                 col: 0, pos: 0, cm: cm,\n                 trailingSpace: false,\n                 splitSpaces: (ie || webkit) && cm.getOption(\"lineWrapping\")};\n  lineView.measure = {};\n\n  // Iterate over the logical lines that make up this visual line.\n  for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n    var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n    builder.pos = 0;\n    builder.addToken = buildToken;\n    // Optionally wire in some hacks into the token-rendering\n    // algorithm, to deal with browser quirks.\n    if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n      { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n    builder.map = [];\n    var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n    insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n    if (line.styleClasses) {\n      if (line.styleClasses.bgClass)\n        { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n      if (line.styleClasses.textClass)\n        { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n    }\n\n    // Ensure at least a single node is present, for measuring.\n    if (builder.map.length == 0)\n      { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n    // Store the map and a cache object for the current logical line\n    if (i == 0) {\n      lineView.measure.map = builder.map;\n      lineView.measure.cache = {};\n    } else {\n      (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n      ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n    }\n  }\n\n  // See issue #2901\n  if (webkit) {\n    var last = builder.content.lastChild;\n    if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n      { builder.content.className = \"cm-tab-wrap-hack\"; }\n  }\n\n  signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n  if (builder.pre.className)\n    { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n  return builder\n}\n\nfunction defaultSpecialCharPlaceholder(ch) {\n  var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n  token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n  token.setAttribute(\"aria-label\", token.title);\n  return token\n}\n\n// Build up the DOM representation for a single token, and add it to\n// the line map. Takes care to render special characters separately.\nfunction buildToken(builder, text, style, startStyle, endStyle, title, css) {\n  if (!text) { return }\n  var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n  var special = builder.cm.state.specialChars, mustWrap = false;\n  var content;\n  if (!special.test(text)) {\n    builder.col += text.length;\n    content = document.createTextNode(displayText);\n    builder.map.push(builder.pos, builder.pos + text.length, content);\n    if (ie && ie_version < 9) { mustWrap = true; }\n    builder.pos += text.length;\n  } else {\n    content = document.createDocumentFragment();\n    var pos = 0;\n    while (true) {\n      special.lastIndex = pos;\n      var m = special.exec(text);\n      var skipped = m ? m.index - pos : text.length - pos;\n      if (skipped) {\n        var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n        if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n        else { content.appendChild(txt); }\n        builder.map.push(builder.pos, builder.pos + skipped, txt);\n        builder.col += skipped;\n        builder.pos += skipped;\n      }\n      if (!m) { break }\n      pos += skipped + 1;\n      var txt$1 = (void 0);\n      if (m[0] == \"\\t\") {\n        var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n        txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n        txt$1.setAttribute(\"role\", \"presentation\");\n        txt$1.setAttribute(\"cm-text\", \"\\t\");\n        builder.col += tabWidth;\n      } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n        txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n        txt$1.setAttribute(\"cm-text\", m[0]);\n        builder.col += 1;\n      } else {\n        txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n        txt$1.setAttribute(\"cm-text\", m[0]);\n        if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n        else { content.appendChild(txt$1); }\n        builder.col += 1;\n      }\n      builder.map.push(builder.pos, builder.pos + 1, txt$1);\n      builder.pos++;\n    }\n  }\n  builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n  if (style || startStyle || endStyle || mustWrap || css) {\n    var fullStyle = style || \"\";\n    if (startStyle) { fullStyle += startStyle; }\n    if (endStyle) { fullStyle += endStyle; }\n    var token = elt(\"span\", [content], fullStyle, css);\n    if (title) { token.title = title; }\n    return builder.content.appendChild(token)\n  }\n  builder.content.appendChild(content);\n}\n\nfunction splitSpaces(text, trailingBefore) {\n  if (text.length > 1 && !/  /.test(text)) { return text }\n  var spaceBefore = trailingBefore, result = \"\";\n  for (var i = 0; i < text.length; i++) {\n    var ch = text.charAt(i);\n    if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n      { ch = \"\\u00a0\"; }\n    result += ch;\n    spaceBefore = ch == \" \";\n  }\n  return result\n}\n\n// Work around nonsense dimensions being reported for stretches of\n// right-to-left text.\nfunction buildTokenBadBidi(inner, order) {\n  return function (builder, text, style, startStyle, endStyle, title, css) {\n    style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n    var start = builder.pos, end = start + text.length;\n    for (;;) {\n      // Find the part that overlaps with the start of this text\n      var part = (void 0);\n      for (var i = 0; i < order.length; i++) {\n        part = order[i];\n        if (part.to > start && part.from <= start) { break }\n      }\n      if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, title, css) }\n      inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);\n      startStyle = null;\n      text = text.slice(part.to - start);\n      start = part.to;\n    }\n  }\n}\n\nfunction buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n  var widget = !ignoreWidget && marker.widgetNode;\n  if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n  if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n    if (!widget)\n      { widget = builder.content.appendChild(document.createElement(\"span\")); }\n    widget.setAttribute(\"cm-marker\", marker.id);\n  }\n  if (widget) {\n    builder.cm.display.input.setUneditable(widget);\n    builder.content.appendChild(widget);\n  }\n  builder.pos += size;\n  builder.trailingSpace = false;\n}\n\n// Outputs a number of spans to make up a line, taking highlighting\n// and marked text into account.\nfunction insertLineContent(line, builder, styles) {\n  var spans = line.markedSpans, allText = line.text, at = 0;\n  if (!spans) {\n    for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n      { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n    return\n  }\n\n  var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n  var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, title, collapsed;\n  for (;;) {\n    if (nextChange == pos) { // Update current marker set\n      spanStyle = spanEndStyle = spanStartStyle = title = css = \"\";\n      collapsed = null; nextChange = Infinity;\n      var foundBookmarks = [], endStyles = (void 0);\n      for (var j = 0; j < spans.length; ++j) {\n        var sp = spans[j], m = sp.marker;\n        if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n          foundBookmarks.push(m);\n        } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n          if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n            nextChange = sp.to;\n            spanEndStyle = \"\";\n          }\n          if (m.className) { spanStyle += \" \" + m.className; }\n          if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n          if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n          if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n          if (m.title && !title) { title = m.title; }\n          if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n            { collapsed = sp; }\n        } else if (sp.from > pos && nextChange > sp.from) {\n          nextChange = sp.from;\n        }\n      }\n      if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n        { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n      if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n        { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n      if (collapsed && (collapsed.from || 0) == pos) {\n        buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                           collapsed.marker, collapsed.from == null);\n        if (collapsed.to == null) { return }\n        if (collapsed.to == pos) { collapsed = false; }\n      }\n    }\n    if (pos >= len) { break }\n\n    var upto = Math.min(len, nextChange);\n    while (true) {\n      if (text) {\n        var end = pos + text.length;\n        if (!collapsed) {\n          var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n          builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                           spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", title, css);\n        }\n        if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n        pos = end;\n        spanStartStyle = \"\";\n      }\n      text = allText.slice(at, at = styles[i++]);\n      style = interpretTokenStyle(styles[i++], builder.cm.options);\n    }\n  }\n}\n\n\n// These objects are used to represent the visible (currently drawn)\n// part of the document. A LineView may correspond to multiple\n// logical lines, if those are connected by collapsed ranges.\nfunction LineView(doc, line, lineN) {\n  // The starting line\n  this.line = line;\n  // Continuing lines, if any\n  this.rest = visualLineContinued(line);\n  // Number of logical lines in this visual line\n  this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n  this.node = this.text = null;\n  this.hidden = lineIsHidden(doc, line);\n}\n\n// Create a range of LineView objects for the given lines.\nfunction buildViewArray(cm, from, to) {\n  var array = [], nextPos;\n  for (var pos = from; pos < to; pos = nextPos) {\n    var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n    nextPos = pos + view.size;\n    array.push(view);\n  }\n  return array\n}\n\nvar operationGroup = null;\n\nfunction pushOperation(op) {\n  if (operationGroup) {\n    operationGroup.ops.push(op);\n  } else {\n    op.ownsGroup = operationGroup = {\n      ops: [op],\n      delayedCallbacks: []\n    };\n  }\n}\n\nfunction fireCallbacksForOps(group) {\n  // Calls delayed callbacks and cursorActivity handlers until no\n  // new ones appear\n  var callbacks = group.delayedCallbacks, i = 0;\n  do {\n    for (; i < callbacks.length; i++)\n      { callbacks[i].call(null); }\n    for (var j = 0; j < group.ops.length; j++) {\n      var op = group.ops[j];\n      if (op.cursorActivityHandlers)\n        { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n          { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n    }\n  } while (i < callbacks.length)\n}\n\nfunction finishOperation(op, endCb) {\n  var group = op.ownsGroup;\n  if (!group) { return }\n\n  try { fireCallbacksForOps(group); }\n  finally {\n    operationGroup = null;\n    endCb(group);\n  }\n}\n\nvar orphanDelayedCallbacks = null;\n\n// Often, we want to signal events at a point where we are in the\n// middle of some work, but don't want the handler to start calling\n// other methods on the editor, which might be in an inconsistent\n// state or simply not expect any other events to happen.\n// signalLater looks whether there are any handlers, and schedules\n// them to be executed when the last operation ends, or, if no\n// operation is active, when a timeout fires.\nfunction signalLater(emitter, type /*, values...*/) {\n  var arr = getHandlers(emitter, type);\n  if (!arr.length) { return }\n  var args = Array.prototype.slice.call(arguments, 2), list;\n  if (operationGroup) {\n    list = operationGroup.delayedCallbacks;\n  } else if (orphanDelayedCallbacks) {\n    list = orphanDelayedCallbacks;\n  } else {\n    list = orphanDelayedCallbacks = [];\n    setTimeout(fireOrphanDelayed, 0);\n  }\n  var loop = function ( i ) {\n    list.push(function () { return arr[i].apply(null, args); });\n  };\n\n  for (var i = 0; i < arr.length; ++i)\n    loop( i );\n}\n\nfunction fireOrphanDelayed() {\n  var delayed = orphanDelayedCallbacks;\n  orphanDelayedCallbacks = null;\n  for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n}\n\n// When an aspect of a line changes, a string is added to\n// lineView.changes. This updates the relevant part of the line's\n// DOM structure.\nfunction updateLineForChanges(cm, lineView, lineN, dims) {\n  for (var j = 0; j < lineView.changes.length; j++) {\n    var type = lineView.changes[j];\n    if (type == \"text\") { updateLineText(cm, lineView); }\n    else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n    else if (type == \"class\") { updateLineClasses(cm, lineView); }\n    else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n  }\n  lineView.changes = null;\n}\n\n// Lines with gutter elements, widgets or a background class need to\n// be wrapped, and have the extra elements added to the wrapper div\nfunction ensureLineWrapped(lineView) {\n  if (lineView.node == lineView.text) {\n    lineView.node = elt(\"div\", null, null, \"position: relative\");\n    if (lineView.text.parentNode)\n      { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n    lineView.node.appendChild(lineView.text);\n    if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n  }\n  return lineView.node\n}\n\nfunction updateLineBackground(cm, lineView) {\n  var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n  if (cls) { cls += \" CodeMirror-linebackground\"; }\n  if (lineView.background) {\n    if (cls) { lineView.background.className = cls; }\n    else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n  } else if (cls) {\n    var wrap = ensureLineWrapped(lineView);\n    lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n    cm.display.input.setUneditable(lineView.background);\n  }\n}\n\n// Wrapper around buildLineContent which will reuse the structure\n// in display.externalMeasured when possible.\nfunction getLineContent(cm, lineView) {\n  var ext = cm.display.externalMeasured;\n  if (ext && ext.line == lineView.line) {\n    cm.display.externalMeasured = null;\n    lineView.measure = ext.measure;\n    return ext.built\n  }\n  return buildLineContent(cm, lineView)\n}\n\n// Redraw the line's text. Interacts with the background and text\n// classes because the mode may output tokens that influence these\n// classes.\nfunction updateLineText(cm, lineView) {\n  var cls = lineView.text.className;\n  var built = getLineContent(cm, lineView);\n  if (lineView.text == lineView.node) { lineView.node = built.pre; }\n  lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n  lineView.text = built.pre;\n  if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n    lineView.bgClass = built.bgClass;\n    lineView.textClass = built.textClass;\n    updateLineClasses(cm, lineView);\n  } else if (cls) {\n    lineView.text.className = cls;\n  }\n}\n\nfunction updateLineClasses(cm, lineView) {\n  updateLineBackground(cm, lineView);\n  if (lineView.line.wrapClass)\n    { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n  else if (lineView.node != lineView.text)\n    { lineView.node.className = \"\"; }\n  var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n  lineView.text.className = textClass || \"\";\n}\n\nfunction updateLineGutter(cm, lineView, lineN, dims) {\n  if (lineView.gutter) {\n    lineView.node.removeChild(lineView.gutter);\n    lineView.gutter = null;\n  }\n  if (lineView.gutterBackground) {\n    lineView.node.removeChild(lineView.gutterBackground);\n    lineView.gutterBackground = null;\n  }\n  if (lineView.line.gutterClass) {\n    var wrap = ensureLineWrapped(lineView);\n    lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                    (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n    cm.display.input.setUneditable(lineView.gutterBackground);\n    wrap.insertBefore(lineView.gutterBackground, lineView.text);\n  }\n  var markers = lineView.line.gutterMarkers;\n  if (cm.options.lineNumbers || markers) {\n    var wrap$1 = ensureLineWrapped(lineView);\n    var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n    cm.display.input.setUneditable(gutterWrap);\n    wrap$1.insertBefore(gutterWrap, lineView.text);\n    if (lineView.line.gutterClass)\n      { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n    if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n      { lineView.lineNumber = gutterWrap.appendChild(\n        elt(\"div\", lineNumberFor(cm.options, lineN),\n            \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n            (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n    if (markers) { for (var k = 0; k < cm.options.gutters.length; ++k) {\n      var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id];\n      if (found)\n        { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                   (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n    } }\n  }\n}\n\nfunction updateLineWidgets(cm, lineView, dims) {\n  if (lineView.alignable) { lineView.alignable = null; }\n  for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n    next = node.nextSibling;\n    if (node.className == \"CodeMirror-linewidget\")\n      { lineView.node.removeChild(node); }\n  }\n  insertLineWidgets(cm, lineView, dims);\n}\n\n// Build a line's DOM representation from scratch\nfunction buildLineElement(cm, lineView, lineN, dims) {\n  var built = getLineContent(cm, lineView);\n  lineView.text = lineView.node = built.pre;\n  if (built.bgClass) { lineView.bgClass = built.bgClass; }\n  if (built.textClass) { lineView.textClass = built.textClass; }\n\n  updateLineClasses(cm, lineView);\n  updateLineGutter(cm, lineView, lineN, dims);\n  insertLineWidgets(cm, lineView, dims);\n  return lineView.node\n}\n\n// A lineView may contain multiple logical lines (when merged by\n// collapsed spans). The widgets for all of them need to be drawn.\nfunction insertLineWidgets(cm, lineView, dims) {\n  insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n  if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n    { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n}\n\nfunction insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n  if (!line.widgets) { return }\n  var wrap = ensureLineWrapped(lineView);\n  for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n    var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n    if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n    positionLineWidget(widget, node, lineView, dims);\n    cm.display.input.setUneditable(node);\n    if (allowAbove && widget.above)\n      { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n    else\n      { wrap.appendChild(node); }\n    signalLater(widget, \"redraw\");\n  }\n}\n\nfunction positionLineWidget(widget, node, lineView, dims) {\n  if (widget.noHScroll) {\n    (lineView.alignable || (lineView.alignable = [])).push(node);\n    var width = dims.wrapperWidth;\n    node.style.left = dims.fixedPos + \"px\";\n    if (!widget.coverGutter) {\n      width -= dims.gutterTotalWidth;\n      node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n    }\n    node.style.width = width + \"px\";\n  }\n  if (widget.coverGutter) {\n    node.style.zIndex = 5;\n    node.style.position = \"relative\";\n    if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n  }\n}\n\nfunction widgetHeight(widget) {\n  if (widget.height != null) { return widget.height }\n  var cm = widget.doc.cm;\n  if (!cm) { return 0 }\n  if (!contains(document.body, widget.node)) {\n    var parentStyle = \"position: relative;\";\n    if (widget.coverGutter)\n      { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n    if (widget.noHScroll)\n      { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n    removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n  }\n  return widget.height = widget.node.parentNode.offsetHeight\n}\n\n// Return true when the given mouse event happened in a widget\nfunction eventInWidget(display, e) {\n  for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n    if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n        (n.parentNode == display.sizer && n != display.mover))\n      { return true }\n  }\n}\n\n// POSITION MEASUREMENT\n\nfunction paddingTop(display) {return display.lineSpace.offsetTop}\nfunction paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\nfunction paddingH(display) {\n  if (display.cachedPaddingH) { return display.cachedPaddingH }\n  var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\"));\n  var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n  var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n  if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n  return data\n}\n\nfunction scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\nfunction displayWidth(cm) {\n  return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n}\nfunction displayHeight(cm) {\n  return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n}\n\n// Ensure the lineView.wrapping.heights array is populated. This is\n// an array of bottom offsets for the lines that make up a drawn\n// line. When lineWrapping is on, there might be more than one\n// height.\nfunction ensureLineHeights(cm, lineView, rect) {\n  var wrapping = cm.options.lineWrapping;\n  var curWidth = wrapping && displayWidth(cm);\n  if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n    var heights = lineView.measure.heights = [];\n    if (wrapping) {\n      lineView.measure.width = curWidth;\n      var rects = lineView.text.firstChild.getClientRects();\n      for (var i = 0; i < rects.length - 1; i++) {\n        var cur = rects[i], next = rects[i + 1];\n        if (Math.abs(cur.bottom - next.bottom) > 2)\n          { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n      }\n    }\n    heights.push(rect.bottom - rect.top);\n  }\n}\n\n// Find a line map (mapping character offsets to text nodes) and a\n// measurement cache for the given line number. (A line view might\n// contain multiple lines when collapsed ranges are present.)\nfunction mapFromLineView(lineView, line, lineN) {\n  if (lineView.line == line)\n    { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n  for (var i = 0; i < lineView.rest.length; i++)\n    { if (lineView.rest[i] == line)\n      { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n  for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n    { if (lineNo(lineView.rest[i$1]) > lineN)\n      { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n}\n\n// Render a line into the hidden node display.externalMeasured. Used\n// when measurement is needed for a line that's not in the viewport.\nfunction updateExternalMeasurement(cm, line) {\n  line = visualLine(line);\n  var lineN = lineNo(line);\n  var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n  view.lineN = lineN;\n  var built = view.built = buildLineContent(cm, view);\n  view.text = built.pre;\n  removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n  return view\n}\n\n// Get a {top, bottom, left, right} box (in line-local coordinates)\n// for a given character.\nfunction measureChar(cm, line, ch, bias) {\n  return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n}\n\n// Find a line view that corresponds to the given line number.\nfunction findViewForLine(cm, lineN) {\n  if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n    { return cm.display.view[findViewIndex(cm, lineN)] }\n  var ext = cm.display.externalMeasured;\n  if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n    { return ext }\n}\n\n// Measurement can be split in two steps, the set-up work that\n// applies to the whole line, and the measurement of the actual\n// character. Functions like coordsChar, that need to do a lot of\n// measurements in a row, can thus ensure that the set-up work is\n// only done once.\nfunction prepareMeasureForLine(cm, line) {\n  var lineN = lineNo(line);\n  var view = findViewForLine(cm, lineN);\n  if (view && !view.text) {\n    view = null;\n  } else if (view && view.changes) {\n    updateLineForChanges(cm, view, lineN, getDimensions(cm));\n    cm.curOp.forceUpdate = true;\n  }\n  if (!view)\n    { view = updateExternalMeasurement(cm, line); }\n\n  var info = mapFromLineView(view, line, lineN);\n  return {\n    line: line, view: view, rect: null,\n    map: info.map, cache: info.cache, before: info.before,\n    hasHeights: false\n  }\n}\n\n// Given a prepared measurement object, measures the position of an\n// actual character (or fetches it from the cache).\nfunction measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n  if (prepared.before) { ch = -1; }\n  var key = ch + (bias || \"\"), found;\n  if (prepared.cache.hasOwnProperty(key)) {\n    found = prepared.cache[key];\n  } else {\n    if (!prepared.rect)\n      { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n    if (!prepared.hasHeights) {\n      ensureLineHeights(cm, prepared.view, prepared.rect);\n      prepared.hasHeights = true;\n    }\n    found = measureCharInner(cm, prepared, ch, bias);\n    if (!found.bogus) { prepared.cache[key] = found; }\n  }\n  return {left: found.left, right: found.right,\n          top: varHeight ? found.rtop : found.top,\n          bottom: varHeight ? found.rbottom : found.bottom}\n}\n\nvar nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\nfunction nodeAndOffsetInLineMap(map$$1, ch, bias) {\n  var node, start, end, collapse, mStart, mEnd;\n  // First, search the line map for the text node corresponding to,\n  // or closest to, the target character.\n  for (var i = 0; i < map$$1.length; i += 3) {\n    mStart = map$$1[i];\n    mEnd = map$$1[i + 1];\n    if (ch < mStart) {\n      start = 0; end = 1;\n      collapse = \"left\";\n    } else if (ch < mEnd) {\n      start = ch - mStart;\n      end = start + 1;\n    } else if (i == map$$1.length - 3 || ch == mEnd && map$$1[i + 3] > ch) {\n      end = mEnd - mStart;\n      start = end - 1;\n      if (ch >= mEnd) { collapse = \"right\"; }\n    }\n    if (start != null) {\n      node = map$$1[i + 2];\n      if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n        { collapse = bias; }\n      if (bias == \"left\" && start == 0)\n        { while (i && map$$1[i - 2] == map$$1[i - 3] && map$$1[i - 1].insertLeft) {\n          node = map$$1[(i -= 3) + 2];\n          collapse = \"left\";\n        } }\n      if (bias == \"right\" && start == mEnd - mStart)\n        { while (i < map$$1.length - 3 && map$$1[i + 3] == map$$1[i + 4] && !map$$1[i + 5].insertLeft) {\n          node = map$$1[(i += 3) + 2];\n          collapse = \"right\";\n        } }\n      break\n    }\n  }\n  return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n}\n\nfunction getUsefulRect(rects, bias) {\n  var rect = nullRect;\n  if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n    if ((rect = rects[i]).left != rect.right) { break }\n  } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n    if ((rect = rects[i$1]).left != rect.right) { break }\n  } }\n  return rect\n}\n\nfunction measureCharInner(cm, prepared, ch, bias) {\n  var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n  var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n  var rect;\n  if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n    for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n      while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n      while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n      if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n        { rect = node.parentNode.getBoundingClientRect(); }\n      else\n        { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n      if (rect.left || rect.right || start == 0) { break }\n      end = start;\n      start = start - 1;\n      collapse = \"right\";\n    }\n    if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n  } else { // If it is a widget, simply get the box for the whole widget.\n    if (start > 0) { collapse = bias = \"right\"; }\n    var rects;\n    if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n      { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n    else\n      { rect = node.getBoundingClientRect(); }\n  }\n  if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n    var rSpan = node.parentNode.getClientRects()[0];\n    if (rSpan)\n      { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n    else\n      { rect = nullRect; }\n  }\n\n  var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n  var mid = (rtop + rbot) / 2;\n  var heights = prepared.view.measure.heights;\n  var i = 0;\n  for (; i < heights.length - 1; i++)\n    { if (mid < heights[i]) { break } }\n  var top = i ? heights[i - 1] : 0, bot = heights[i];\n  var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                top: top, bottom: bot};\n  if (!rect.left && !rect.right) { result.bogus = true; }\n  if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n  return result\n}\n\n// Work around problem with bounding client rects on ranges being\n// returned incorrectly when zoomed on IE10 and below.\nfunction maybeUpdateRectForZooming(measure, rect) {\n  if (!window.screen || screen.logicalXDPI == null ||\n      screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n    { return rect }\n  var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n  var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n  return {left: rect.left * scaleX, right: rect.right * scaleX,\n          top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n}\n\nfunction clearLineMeasurementCacheFor(lineView) {\n  if (lineView.measure) {\n    lineView.measure.cache = {};\n    lineView.measure.heights = null;\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { lineView.measure.caches[i] = {}; } }\n  }\n}\n\nfunction clearLineMeasurementCache(cm) {\n  cm.display.externalMeasure = null;\n  removeChildren(cm.display.lineMeasure);\n  for (var i = 0; i < cm.display.view.length; i++)\n    { clearLineMeasurementCacheFor(cm.display.view[i]); }\n}\n\nfunction clearCaches(cm) {\n  clearLineMeasurementCache(cm);\n  cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n  if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n  cm.display.lineNumChars = null;\n}\n\nfunction pageScrollX() {\n  // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n  // which causes page_Offset and bounding client rects to use\n  // different reference viewports and invalidate our calculations.\n  if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n  return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n}\nfunction pageScrollY() {\n  if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n  return window.pageYOffset || (document.documentElement || document.body).scrollTop\n}\n\nfunction widgetTopHeight(lineObj) {\n  var height = 0;\n  if (lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above)\n    { height += widgetHeight(lineObj.widgets[i]); } } }\n  return height\n}\n\n// Converts a {top, bottom, left, right} box from line-local\n// coordinates into another coordinate system. Context may be one of\n// \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n// or \"page\".\nfunction intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n  if (!includeWidgets) {\n    var height = widgetTopHeight(lineObj);\n    rect.top += height; rect.bottom += height;\n  }\n  if (context == \"line\") { return rect }\n  if (!context) { context = \"local\"; }\n  var yOff = heightAtLine(lineObj);\n  if (context == \"local\") { yOff += paddingTop(cm.display); }\n  else { yOff -= cm.display.viewOffset; }\n  if (context == \"page\" || context == \"window\") {\n    var lOff = cm.display.lineSpace.getBoundingClientRect();\n    yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n    var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n    rect.left += xOff; rect.right += xOff;\n  }\n  rect.top += yOff; rect.bottom += yOff;\n  return rect\n}\n\n// Coverts a box from \"div\" coords to another coordinate system.\n// Context may be \"window\", \"page\", \"div\", or \"local\"./null.\nfunction fromCoordSystem(cm, coords, context) {\n  if (context == \"div\") { return coords }\n  var left = coords.left, top = coords.top;\n  // First move into \"page\" coordinate system\n  if (context == \"page\") {\n    left -= pageScrollX();\n    top -= pageScrollY();\n  } else if (context == \"local\" || !context) {\n    var localBox = cm.display.sizer.getBoundingClientRect();\n    left += localBox.left;\n    top += localBox.top;\n  }\n\n  var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n  return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n}\n\nfunction charCoords(cm, pos, context, lineObj, bias) {\n  if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n  return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n}\n\n// Returns a box for a given cursor position, which may have an\n// 'other' property containing the position of the secondary cursor\n// on a bidi boundary.\n// A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n// and after `char - 1` in writing order of `char - 1`\n// A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n// and before `char` in writing order of `char`\n// Examples (upper-case letters are RTL, lower-case are LTR):\n//     Pos(0, 1, ...)\n//     before   after\n// ab     a|b     a|b\n// aB     a|B     aB|\n// Ab     |Ab     A|b\n// AB     B|A     B|A\n// Every position after the last character on a line is considered to stick\n// to the last character on the line.\nfunction cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n  lineObj = lineObj || getLine(cm.doc, pos.line);\n  if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n  function get(ch, right) {\n    var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n    if (right) { m.left = m.right; } else { m.right = m.left; }\n    return intoCoordSystem(cm, lineObj, m, context)\n  }\n  var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n  if (ch >= lineObj.text.length) {\n    ch = lineObj.text.length;\n    sticky = \"before\";\n  } else if (ch <= 0) {\n    ch = 0;\n    sticky = \"after\";\n  }\n  if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n  function getBidi(ch, partPos, invert) {\n    var part = order[partPos], right = part.level == 1;\n    return get(invert ? ch - 1 : ch, right != invert)\n  }\n  var partPos = getBidiPartAt(order, ch, sticky);\n  var other = bidiOther;\n  var val = getBidi(ch, partPos, sticky == \"before\");\n  if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n  return val\n}\n\n// Used to cheaply estimate the coordinates for a position. Used for\n// intermediate scroll updates.\nfunction estimateCoords(cm, pos) {\n  var left = 0;\n  pos = clipPos(cm.doc, pos);\n  if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n  var lineObj = getLine(cm.doc, pos.line);\n  var top = heightAtLine(lineObj) + paddingTop(cm.display);\n  return {left: left, right: left, top: top, bottom: top + lineObj.height}\n}\n\n// Positions returned by coordsChar contain some extra information.\n// xRel is the relative x position of the input coordinates compared\n// to the found position (so xRel > 0 means the coordinates are to\n// the right of the character position, for example). When outside\n// is true, that means the coordinates lie outside the line's\n// vertical range.\nfunction PosWithInfo(line, ch, sticky, outside, xRel) {\n  var pos = Pos(line, ch, sticky);\n  pos.xRel = xRel;\n  if (outside) { pos.outside = true; }\n  return pos\n}\n\n// Compute the character position closest to the given coordinates.\n// Input must be lineSpace-local (\"div\" coordinate system).\nfunction coordsChar(cm, x, y) {\n  var doc = cm.doc;\n  y += cm.display.viewOffset;\n  if (y < 0) { return PosWithInfo(doc.first, 0, null, true, -1) }\n  var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n  if (lineN > last)\n    { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, true, 1) }\n  if (x < 0) { x = 0; }\n\n  var lineObj = getLine(doc, lineN);\n  for (;;) {\n    var found = coordsCharInner(cm, lineObj, lineN, x, y);\n    var merged = collapsedSpanAtEnd(lineObj);\n    var mergedPos = merged && merged.find(0, true);\n    if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))\n      { lineN = lineNo(lineObj = mergedPos.to.line); }\n    else\n      { return found }\n  }\n}\n\nfunction wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n  y -= widgetTopHeight(lineObj);\n  var end = lineObj.text.length;\n  var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n  end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n  return {begin: begin, end: end}\n}\n\nfunction wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n  if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n  var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n  return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n}\n\n// Returns true if the given side of a box is after the given\n// coordinates, in top-to-bottom, left-to-right order.\nfunction boxIsAfter(box, x, y, left) {\n  return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n}\n\nfunction coordsCharInner(cm, lineObj, lineNo$$1, x, y) {\n  // Move y into line-local coordinate space\n  y -= heightAtLine(lineObj);\n  var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n  // When directly calling `measureCharPrepared`, we have to adjust\n  // for the widgets at this line.\n  var widgetHeight$$1 = widgetTopHeight(lineObj);\n  var begin = 0, end = lineObj.text.length, ltr = true;\n\n  var order = getOrder(lineObj, cm.doc.direction);\n  // If the line isn't plain left-to-right text, first figure out\n  // which bidi section the coordinates fall into.\n  if (order) {\n    var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                 (cm, lineObj, lineNo$$1, preparedMeasure, order, x, y);\n    ltr = part.level != 1;\n    // The awkward -1 offsets are needed because findFirst (called\n    // on these below) will treat its first bound as inclusive,\n    // second as exclusive, but we want to actually address the\n    // characters in the part's range\n    begin = ltr ? part.from : part.to - 1;\n    end = ltr ? part.to : part.from - 1;\n  }\n\n  // A binary search to find the first character whose bounding box\n  // starts after the coordinates. If we run across any whose box wrap\n  // the coordinates, store that.\n  var chAround = null, boxAround = null;\n  var ch = findFirst(function (ch) {\n    var box = measureCharPrepared(cm, preparedMeasure, ch);\n    box.top += widgetHeight$$1; box.bottom += widgetHeight$$1;\n    if (!boxIsAfter(box, x, y, false)) { return false }\n    if (box.top <= y && box.left <= x) {\n      chAround = ch;\n      boxAround = box;\n    }\n    return true\n  }, begin, end);\n\n  var baseX, sticky, outside = false;\n  // If a box around the coordinates was found, use that\n  if (boxAround) {\n    // Distinguish coordinates nearer to the left or right side of the box\n    var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n    ch = chAround + (atStart ? 0 : 1);\n    sticky = atStart ? \"after\" : \"before\";\n    baseX = atLeft ? boxAround.left : boxAround.right;\n  } else {\n    // (Adjust for extended bound, if necessary.)\n    if (!ltr && (ch == end || ch == begin)) { ch++; }\n    // To determine which side to associate with, get the box to the\n    // left of the character and compare it's vertical position to the\n    // coordinates\n    sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n      (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight$$1 <= y) == ltr ?\n      \"after\" : \"before\";\n    // Now get accurate coordinates for this place, in order to get a\n    // base X position\n    var coords = cursorCoords(cm, Pos(lineNo$$1, ch, sticky), \"line\", lineObj, preparedMeasure);\n    baseX = coords.left;\n    outside = y < coords.top || y >= coords.bottom;\n  }\n\n  ch = skipExtendingChars(lineObj.text, ch, 1);\n  return PosWithInfo(lineNo$$1, ch, sticky, outside, x - baseX)\n}\n\nfunction coordsBidiPart(cm, lineObj, lineNo$$1, preparedMeasure, order, x, y) {\n  // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n  // situation, we can take this ordering to correspond to the visual\n  // ordering. This finds the first part whose end is after the given\n  // coordinates.\n  var index = findFirst(function (i) {\n    var part = order[i], ltr = part.level != 1;\n    return boxIsAfter(cursorCoords(cm, Pos(lineNo$$1, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                   \"line\", lineObj, preparedMeasure), x, y, true)\n  }, 0, order.length - 1);\n  var part = order[index];\n  // If this isn't the first part, the part's start is also after\n  // the coordinates, and the coordinates aren't on the same line as\n  // that start, move one part back.\n  if (index > 0) {\n    var ltr = part.level != 1;\n    var start = cursorCoords(cm, Pos(lineNo$$1, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                             \"line\", lineObj, preparedMeasure);\n    if (boxIsAfter(start, x, y, true) && start.top > y)\n      { part = order[index - 1]; }\n  }\n  return part\n}\n\nfunction coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n  // In a wrapped line, rtl text on wrapping boundaries can do things\n  // that don't correspond to the ordering in our `order` array at\n  // all, so a binary search doesn't work, and we want to return a\n  // part that only spans one line so that the binary search in\n  // coordsCharInner is safe. As such, we first find the extent of the\n  // wrapped line, and then do a flat search in which we discard any\n  // spans that aren't on the line.\n  var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n  var begin = ref.begin;\n  var end = ref.end;\n  if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n  var part = null, closestDist = null;\n  for (var i = 0; i < order.length; i++) {\n    var p = order[i];\n    if (p.from >= end || p.to <= begin) { continue }\n    var ltr = p.level != 1;\n    var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n    // Weigh against spans ending before this, so that they are only\n    // picked if nothing ends after\n    var dist = endX < x ? x - endX + 1e9 : endX - x;\n    if (!part || closestDist > dist) {\n      part = p;\n      closestDist = dist;\n    }\n  }\n  if (!part) { part = order[order.length - 1]; }\n  // Clip the part to the wrapped line.\n  if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n  if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n  return part\n}\n\nvar measureText;\n// Compute the default text height.\nfunction textHeight(display) {\n  if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n  if (measureText == null) {\n    measureText = elt(\"pre\");\n    // Measure a bunch of lines, for browsers that compute\n    // fractional heights.\n    for (var i = 0; i < 49; ++i) {\n      measureText.appendChild(document.createTextNode(\"x\"));\n      measureText.appendChild(elt(\"br\"));\n    }\n    measureText.appendChild(document.createTextNode(\"x\"));\n  }\n  removeChildrenAndAdd(display.measure, measureText);\n  var height = measureText.offsetHeight / 50;\n  if (height > 3) { display.cachedTextHeight = height; }\n  removeChildren(display.measure);\n  return height || 1\n}\n\n// Compute the default character width.\nfunction charWidth(display) {\n  if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n  var anchor = elt(\"span\", \"xxxxxxxxxx\");\n  var pre = elt(\"pre\", [anchor]);\n  removeChildrenAndAdd(display.measure, pre);\n  var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n  if (width > 2) { display.cachedCharWidth = width; }\n  return width || 10\n}\n\n// Do a bulk-read of the DOM positions and sizes needed to draw the\n// view, so that we don't interleave reading and writing to the DOM.\nfunction getDimensions(cm) {\n  var d = cm.display, left = {}, width = {};\n  var gutterLeft = d.gutters.clientLeft;\n  for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n    left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;\n    width[cm.options.gutters[i]] = n.clientWidth;\n  }\n  return {fixedPos: compensateForHScroll(d),\n          gutterTotalWidth: d.gutters.offsetWidth,\n          gutterLeft: left,\n          gutterWidth: width,\n          wrapperWidth: d.wrapper.clientWidth}\n}\n\n// Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n// but using getBoundingClientRect to get a sub-pixel-accurate\n// result.\nfunction compensateForHScroll(display) {\n  return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n}\n\n// Returns a function that estimates the height of a line, to use as\n// first approximation until the line becomes visible (and is thus\n// properly measurable).\nfunction estimateHeight(cm) {\n  var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n  var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n  return function (line) {\n    if (lineIsHidden(cm.doc, line)) { return 0 }\n\n    var widgetsHeight = 0;\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n      if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n    } }\n\n    if (wrapping)\n      { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n    else\n      { return widgetsHeight + th }\n  }\n}\n\nfunction estimateLineHeights(cm) {\n  var doc = cm.doc, est = estimateHeight(cm);\n  doc.iter(function (line) {\n    var estHeight = est(line);\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  });\n}\n\n// Given a mouse event, find the corresponding position. If liberal\n// is false, it checks whether a gutter or scrollbar was clicked,\n// and returns null if it was. forRect is used by rectangular\n// selections, and tries to estimate a character position even for\n// coordinates beyond the right of the text.\nfunction posFromMouse(cm, e, liberal, forRect) {\n  var display = cm.display;\n  if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n  var x, y, space = display.lineSpace.getBoundingClientRect();\n  // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n  try { x = e.clientX - space.left; y = e.clientY - space.top; }\n  catch (e) { return null }\n  var coords = coordsChar(cm, x, y), line;\n  if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n    var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n    coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n  }\n  return coords\n}\n\n// Find the view element corresponding to a given line. Return null\n// when the line isn't visible.\nfunction findViewIndex(cm, n) {\n  if (n >= cm.display.viewTo) { return null }\n  n -= cm.display.viewFrom;\n  if (n < 0) { return null }\n  var view = cm.display.view;\n  for (var i = 0; i < view.length; i++) {\n    n -= view[i].size;\n    if (n < 0) { return i }\n  }\n}\n\nfunction updateSelection(cm) {\n  cm.display.input.showSelection(cm.display.input.prepareSelection());\n}\n\nfunction prepareSelection(cm, primary) {\n  if ( primary === void 0 ) primary = true;\n\n  var doc = cm.doc, result = {};\n  var curFragment = result.cursors = document.createDocumentFragment();\n  var selFragment = result.selection = document.createDocumentFragment();\n\n  for (var i = 0; i < doc.sel.ranges.length; i++) {\n    if (!primary && i == doc.sel.primIndex) { continue }\n    var range$$1 = doc.sel.ranges[i];\n    if (range$$1.from().line >= cm.display.viewTo || range$$1.to().line < cm.display.viewFrom) { continue }\n    var collapsed = range$$1.empty();\n    if (collapsed || cm.options.showCursorWhenSelecting)\n      { drawSelectionCursor(cm, range$$1.head, curFragment); }\n    if (!collapsed)\n      { drawSelectionRange(cm, range$$1, selFragment); }\n  }\n  return result\n}\n\n// Draws a cursor for the given range\nfunction drawSelectionCursor(cm, head, output) {\n  var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n  var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n  cursor.style.left = pos.left + \"px\";\n  cursor.style.top = pos.top + \"px\";\n  cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n  if (pos.other) {\n    // Secondary cursor, shown when on a 'jump' in bi-directional text\n    var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n    otherCursor.style.display = \"\";\n    otherCursor.style.left = pos.other.left + \"px\";\n    otherCursor.style.top = pos.other.top + \"px\";\n    otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n  }\n}\n\nfunction cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n// Draws the given range as a highlighted selection\nfunction drawSelectionRange(cm, range$$1, output) {\n  var display = cm.display, doc = cm.doc;\n  var fragment = document.createDocumentFragment();\n  var padding = paddingH(cm.display), leftSide = padding.left;\n  var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n  var docLTR = doc.direction == \"ltr\";\n\n  function add(left, top, width, bottom) {\n    if (top < 0) { top = 0; }\n    top = Math.round(top);\n    bottom = Math.round(bottom);\n    fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n  }\n\n  function drawForLine(line, fromArg, toArg) {\n    var lineObj = getLine(doc, line);\n    var lineLen = lineObj.text.length;\n    var start, end;\n    function coords(ch, bias) {\n      return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n    }\n\n    function wrapX(pos, dir, side) {\n      var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n      var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n      var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n      return coords(ch, prop)[prop]\n    }\n\n    var order = getOrder(lineObj, doc.direction);\n    iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n      var ltr = dir == \"ltr\";\n      var fromPos = coords(from, ltr ? \"left\" : \"right\");\n      var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n      var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n      var first = i == 0, last = !order || i == order.length - 1;\n      if (toPos.top - fromPos.top <= 3) { // Single line\n        var openLeft = (docLTR ? openStart : openEnd) && first;\n        var openRight = (docLTR ? openEnd : openStart) && last;\n        var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n        var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n        add(left, fromPos.top, right - left, fromPos.bottom);\n      } else { // Multiple lines\n        var topLeft, topRight, botLeft, botRight;\n        if (ltr) {\n          topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n          topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n          botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n          botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n        } else {\n          topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n          topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n          botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n          botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n        }\n        add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n        if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n        add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n      }\n\n      if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n      if (cmpCoords(toPos, start) < 0) { start = toPos; }\n      if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n      if (cmpCoords(toPos, end) < 0) { end = toPos; }\n    });\n    return {start: start, end: end}\n  }\n\n  var sFrom = range$$1.from(), sTo = range$$1.to();\n  if (sFrom.line == sTo.line) {\n    drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n  } else {\n    var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n    var singleVLine = visualLine(fromLine) == visualLine(toLine);\n    var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n    var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n    if (singleVLine) {\n      if (leftEnd.top < rightStart.top - 2) {\n        add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n        add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n      } else {\n        add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n      }\n    }\n    if (leftEnd.bottom < rightStart.top)\n      { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n  }\n\n  output.appendChild(fragment);\n}\n\n// Cursor-blinking\nfunction restartBlink(cm) {\n  if (!cm.state.focused) { return }\n  var display = cm.display;\n  clearInterval(display.blinker);\n  var on = true;\n  display.cursorDiv.style.visibility = \"\";\n  if (cm.options.cursorBlinkRate > 0)\n    { display.blinker = setInterval(function () { return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\"; },\n      cm.options.cursorBlinkRate); }\n  else if (cm.options.cursorBlinkRate < 0)\n    { display.cursorDiv.style.visibility = \"hidden\"; }\n}\n\nfunction ensureFocus(cm) {\n  if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }\n}\n\nfunction delayBlurEvent(cm) {\n  cm.state.delayingBlurEvent = true;\n  setTimeout(function () { if (cm.state.delayingBlurEvent) {\n    cm.state.delayingBlurEvent = false;\n    onBlur(cm);\n  } }, 100);\n}\n\nfunction onFocus(cm, e) {\n  if (cm.state.delayingBlurEvent) { cm.state.delayingBlurEvent = false; }\n\n  if (cm.options.readOnly == \"nocursor\") { return }\n  if (!cm.state.focused) {\n    signal(cm, \"focus\", cm, e);\n    cm.state.focused = true;\n    addClass(cm.display.wrapper, \"CodeMirror-focused\");\n    // This test prevents this from firing when a context\n    // menu is closed (since the input reset would kill the\n    // select-all detection hack)\n    if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n      cm.display.input.reset();\n      if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n    }\n    cm.display.input.receivedFocus();\n  }\n  restartBlink(cm);\n}\nfunction onBlur(cm, e) {\n  if (cm.state.delayingBlurEvent) { return }\n\n  if (cm.state.focused) {\n    signal(cm, \"blur\", cm, e);\n    cm.state.focused = false;\n    rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n  }\n  clearInterval(cm.display.blinker);\n  setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n}\n\n// Read the actual heights of the rendered lines, and update their\n// stored heights to match.\nfunction updateHeightsInViewport(cm) {\n  var display = cm.display;\n  var prevBottom = display.lineDiv.offsetTop;\n  for (var i = 0; i < display.view.length; i++) {\n    var cur = display.view[i], height = (void 0);\n    if (cur.hidden) { continue }\n    if (ie && ie_version < 8) {\n      var bot = cur.node.offsetTop + cur.node.offsetHeight;\n      height = bot - prevBottom;\n      prevBottom = bot;\n    } else {\n      var box = cur.node.getBoundingClientRect();\n      height = box.bottom - box.top;\n    }\n    var diff = cur.line.height - height;\n    if (height < 2) { height = textHeight(display); }\n    if (diff > .005 || diff < -.005) {\n      updateLineHeight(cur.line, height);\n      updateWidgetHeight(cur.line);\n      if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n        { updateWidgetHeight(cur.rest[j]); } }\n    }\n  }\n}\n\n// Read and store the height of line widgets associated with the\n// given line.\nfunction updateWidgetHeight(line) {\n  if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n    var w = line.widgets[i], parent = w.node.parentNode;\n    if (parent) { w.height = parent.offsetHeight; }\n  } }\n}\n\n// Compute the lines that are visible in a given viewport (defaults\n// the the current scroll position). viewport may contain top,\n// height, and ensure (see op.scrollToPos) properties.\nfunction visibleLines(display, doc, viewport) {\n  var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n  top = Math.floor(top - paddingTop(display));\n  var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n  var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n  // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n  // forces those lines into the viewport (if possible).\n  if (viewport && viewport.ensure) {\n    var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n    if (ensureFrom < from) {\n      from = ensureFrom;\n      to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n    } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n      from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n      to = ensureTo;\n    }\n  }\n  return {from: from, to: Math.max(to, from + 1)}\n}\n\n// Re-align line numbers and gutter marks to compensate for\n// horizontal scrolling.\nfunction alignHorizontally(cm) {\n  var display = cm.display, view = display.view;\n  if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n  var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n  var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n  for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n    if (cm.options.fixedGutter) {\n      if (view[i].gutter)\n        { view[i].gutter.style.left = left; }\n      if (view[i].gutterBackground)\n        { view[i].gutterBackground.style.left = left; }\n    }\n    var align = view[i].alignable;\n    if (align) { for (var j = 0; j < align.length; j++)\n      { align[j].style.left = left; } }\n  } }\n  if (cm.options.fixedGutter)\n    { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n}\n\n// Used to ensure that the line number gutter is still the right\n// size for the current document size. Returns true when an update\n// is needed.\nfunction maybeUpdateLineNumberWidth(cm) {\n  if (!cm.options.lineNumbers) { return false }\n  var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n  if (last.length != display.lineNumChars) {\n    var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                               \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n    var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n    display.lineGutter.style.width = \"\";\n    display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n    display.lineNumWidth = display.lineNumInnerWidth + padding;\n    display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n    display.lineGutter.style.width = display.lineNumWidth + \"px\";\n    updateGutterSpace(cm);\n    return true\n  }\n  return false\n}\n\n// SCROLLING THINGS INTO VIEW\n\n// If an editor sits on the top or bottom of the window, partially\n// scrolled out of view, this ensures that the cursor is visible.\nfunction maybeScrollWindow(cm, rect) {\n  if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n  var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n  if (rect.top + box.top < 0) { doScroll = true; }\n  else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\n  if (doScroll != null && !phantom) {\n    var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n    cm.display.lineSpace.appendChild(scrollNode);\n    scrollNode.scrollIntoView(doScroll);\n    cm.display.lineSpace.removeChild(scrollNode);\n  }\n}\n\n// Scroll a given position into view (immediately), verifying that\n// it actually became visible (as line heights are accurately\n// measured, the position of something may 'drift' during drawing).\nfunction scrollPosIntoView(cm, pos, end, margin) {\n  if (margin == null) { margin = 0; }\n  var rect;\n  if (!cm.options.lineWrapping && pos == end) {\n    // Set pos and end to the cursor positions around the character pos sticks to\n    // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n    // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n    pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n    end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n  }\n  for (var limit = 0; limit < 5; limit++) {\n    var changed = false;\n    var coords = cursorCoords(cm, pos);\n    var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n    rect = {left: Math.min(coords.left, endCoords.left),\n            top: Math.min(coords.top, endCoords.top) - margin,\n            right: Math.max(coords.left, endCoords.left),\n            bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n    var scrollPos = calculateScrollPos(cm, rect);\n    var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n    if (scrollPos.scrollTop != null) {\n      updateScrollTop(cm, scrollPos.scrollTop);\n      if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n    }\n    if (scrollPos.scrollLeft != null) {\n      setScrollLeft(cm, scrollPos.scrollLeft);\n      if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n    }\n    if (!changed) { break }\n  }\n  return rect\n}\n\n// Scroll a given set of coordinates into view (immediately).\nfunction scrollIntoView(cm, rect) {\n  var scrollPos = calculateScrollPos(cm, rect);\n  if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n  if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n}\n\n// Calculate a new scroll position needed to scroll the given\n// rectangle into view. Returns an object with scrollTop and\n// scrollLeft properties. When these are undefined, the\n// vertical/horizontal position does not need to be adjusted.\nfunction calculateScrollPos(cm, rect) {\n  var display = cm.display, snapMargin = textHeight(cm.display);\n  if (rect.top < 0) { rect.top = 0; }\n  var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n  var screen = displayHeight(cm), result = {};\n  if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n  var docBottom = cm.doc.height + paddingVert(display);\n  var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n  if (rect.top < screentop) {\n    result.scrollTop = atTop ? 0 : rect.top;\n  } else if (rect.bottom > screentop + screen) {\n    var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n    if (newTop != screentop) { result.scrollTop = newTop; }\n  }\n\n  var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n  var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n  var tooWide = rect.right - rect.left > screenw;\n  if (tooWide) { rect.right = rect.left + screenw; }\n  if (rect.left < 10)\n    { result.scrollLeft = 0; }\n  else if (rect.left < screenleft)\n    { result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10)); }\n  else if (rect.right > screenw + screenleft - 3)\n    { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n  return result\n}\n\n// Store a relative adjustment to the scroll position in the current\n// operation (to be applied when the operation finishes).\nfunction addToScrollTop(cm, top) {\n  if (top == null) { return }\n  resolveScrollToPos(cm);\n  cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n}\n\n// Make sure that at the end of the operation the current cursor is\n// shown.\nfunction ensureCursorVisible(cm) {\n  resolveScrollToPos(cm);\n  var cur = cm.getCursor();\n  cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n}\n\nfunction scrollToCoords(cm, x, y) {\n  if (x != null || y != null) { resolveScrollToPos(cm); }\n  if (x != null) { cm.curOp.scrollLeft = x; }\n  if (y != null) { cm.curOp.scrollTop = y; }\n}\n\nfunction scrollToRange(cm, range$$1) {\n  resolveScrollToPos(cm);\n  cm.curOp.scrollToPos = range$$1;\n}\n\n// When an operation has its scrollToPos property set, and another\n// scroll action is applied before the end of the operation, this\n// 'simulates' scrolling that position into view in a cheap way, so\n// that the effect of intermediate scroll commands is not ignored.\nfunction resolveScrollToPos(cm) {\n  var range$$1 = cm.curOp.scrollToPos;\n  if (range$$1) {\n    cm.curOp.scrollToPos = null;\n    var from = estimateCoords(cm, range$$1.from), to = estimateCoords(cm, range$$1.to);\n    scrollToCoordsRange(cm, from, to, range$$1.margin);\n  }\n}\n\nfunction scrollToCoordsRange(cm, from, to, margin) {\n  var sPos = calculateScrollPos(cm, {\n    left: Math.min(from.left, to.left),\n    top: Math.min(from.top, to.top) - margin,\n    right: Math.max(from.right, to.right),\n    bottom: Math.max(from.bottom, to.bottom) + margin\n  });\n  scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n}\n\n// Sync the scrollable area and scrollbars, ensure the viewport\n// covers the visible area.\nfunction updateScrollTop(cm, val) {\n  if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n  if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n  setScrollTop(cm, val, true);\n  if (gecko) { updateDisplaySimple(cm); }\n  startWorker(cm, 100);\n}\n\nfunction setScrollTop(cm, val, forceScroll) {\n  val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\n  if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n  cm.doc.scrollTop = val;\n  cm.display.scrollbars.setScrollTop(val);\n  if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n}\n\n// Sync scroller and scrollbar, ensure the gutter elements are\n// aligned.\nfunction setScrollLeft(cm, val, isScroller, forceScroll) {\n  val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n  if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n  cm.doc.scrollLeft = val;\n  alignHorizontally(cm);\n  if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n  cm.display.scrollbars.setScrollLeft(val);\n}\n\n// SCROLLBARS\n\n// Prepare DOM reads needed to update the scrollbars. Done in one\n// shot to minimize update/measure roundtrips.\nfunction measureForScrollbars(cm) {\n  var d = cm.display, gutterW = d.gutters.offsetWidth;\n  var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n  return {\n    clientHeight: d.scroller.clientHeight,\n    viewHeight: d.wrapper.clientHeight,\n    scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n    viewWidth: d.wrapper.clientWidth,\n    barLeft: cm.options.fixedGutter ? gutterW : 0,\n    docHeight: docH,\n    scrollHeight: docH + scrollGap(cm) + d.barHeight,\n    nativeBarWidth: d.nativeBarWidth,\n    gutterWidth: gutterW\n  }\n}\n\nvar NativeScrollbars = function(place, scroll, cm) {\n  this.cm = cm;\n  var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n  var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n  place(vert); place(horiz);\n\n  on(vert, \"scroll\", function () {\n    if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n  });\n  on(horiz, \"scroll\", function () {\n    if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n  });\n\n  this.checkedZeroWidth = false;\n  // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n  if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n};\n\nNativeScrollbars.prototype.update = function (measure) {\n  var needsH = measure.scrollWidth > measure.clientWidth + 1;\n  var needsV = measure.scrollHeight > measure.clientHeight + 1;\n  var sWidth = measure.nativeBarWidth;\n\n  if (needsV) {\n    this.vert.style.display = \"block\";\n    this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n    var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n    // A bug in IE8 can cause this value to be negative, so guard it.\n    this.vert.firstChild.style.height =\n      Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n  } else {\n    this.vert.style.display = \"\";\n    this.vert.firstChild.style.height = \"0\";\n  }\n\n  if (needsH) {\n    this.horiz.style.display = \"block\";\n    this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n    this.horiz.style.left = measure.barLeft + \"px\";\n    var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n    this.horiz.firstChild.style.width =\n      Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n  } else {\n    this.horiz.style.display = \"\";\n    this.horiz.firstChild.style.width = \"0\";\n  }\n\n  if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n    if (sWidth == 0) { this.zeroWidthHack(); }\n    this.checkedZeroWidth = true;\n  }\n\n  return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n};\n\nNativeScrollbars.prototype.setScrollLeft = function (pos) {\n  if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n  if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n};\n\nNativeScrollbars.prototype.setScrollTop = function (pos) {\n  if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n  if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n};\n\nNativeScrollbars.prototype.zeroWidthHack = function () {\n  var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n  this.horiz.style.height = this.vert.style.width = w;\n  this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n  this.disableHoriz = new Delayed;\n  this.disableVert = new Delayed;\n};\n\nNativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n  bar.style.pointerEvents = \"auto\";\n  function maybeDisable() {\n    // To find out whether the scrollbar is still visible, we\n    // check whether the element under the pixel in the bottom\n    // right corner of the scrollbar box is the scrollbar box\n    // itself (when the bar is still visible) or its filler child\n    // (when the bar is hidden). If it is still visible, we keep\n    // it enabled, if it's hidden, we disable pointer events.\n    var box = bar.getBoundingClientRect();\n    var elt$$1 = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n        : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n    if (elt$$1 != bar) { bar.style.pointerEvents = \"none\"; }\n    else { delay.set(1000, maybeDisable); }\n  }\n  delay.set(1000, maybeDisable);\n};\n\nNativeScrollbars.prototype.clear = function () {\n  var parent = this.horiz.parentNode;\n  parent.removeChild(this.horiz);\n  parent.removeChild(this.vert);\n};\n\nvar NullScrollbars = function () {};\n\nNullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\nNullScrollbars.prototype.setScrollLeft = function () {};\nNullScrollbars.prototype.setScrollTop = function () {};\nNullScrollbars.prototype.clear = function () {};\n\nfunction updateScrollbars(cm, measure) {\n  if (!measure) { measure = measureForScrollbars(cm); }\n  var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n  updateScrollbarsInner(cm, measure);\n  for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n    if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n      { updateHeightsInViewport(cm); }\n    updateScrollbarsInner(cm, measureForScrollbars(cm));\n    startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n  }\n}\n\n// Re-synchronize the fake scrollbars with the actual size of the\n// content.\nfunction updateScrollbarsInner(cm, measure) {\n  var d = cm.display;\n  var sizes = d.scrollbars.update(measure);\n\n  d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n  d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n  d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n  if (sizes.right && sizes.bottom) {\n    d.scrollbarFiller.style.display = \"block\";\n    d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n    d.scrollbarFiller.style.width = sizes.right + \"px\";\n  } else { d.scrollbarFiller.style.display = \"\"; }\n  if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n    d.gutterFiller.style.display = \"block\";\n    d.gutterFiller.style.height = sizes.bottom + \"px\";\n    d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n  } else { d.gutterFiller.style.display = \"\"; }\n}\n\nvar scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\nfunction initScrollbars(cm) {\n  if (cm.display.scrollbars) {\n    cm.display.scrollbars.clear();\n    if (cm.display.scrollbars.addClass)\n      { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n    cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n    // Prevent clicks in the scrollbars from killing focus\n    on(node, \"mousedown\", function () {\n      if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n    });\n    node.setAttribute(\"cm-not-content\", \"true\");\n  }, function (pos, axis) {\n    if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n    else { updateScrollTop(cm, pos); }\n  }, cm);\n  if (cm.display.scrollbars.addClass)\n    { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n}\n\n// Operations are used to wrap a series of changes to the editor\n// state in such a way that each change won't have to update the\n// cursor and display (which would be awkward, slow, and\n// error-prone). Instead, display updates are batched and then all\n// combined and executed at once.\n\nvar nextOpId = 0;\n// Start a new operation.\nfunction startOperation(cm) {\n  cm.curOp = {\n    cm: cm,\n    viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n    startHeight: cm.doc.height, // Used to detect need to update scrollbar\n    forceUpdate: false,      // Used to force a redraw\n    updateInput: null,       // Whether to reset the input textarea\n    typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n    changeObjs: null,        // Accumulated changes, for firing change events\n    cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n    cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n    selectionChanged: false, // Whether the selection needs to be redrawn\n    updateMaxLine: false,    // Set when the widest line needs to be determined anew\n    scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n    scrollToPos: null,       // Used to scroll to a specific position\n    focus: false,\n    id: ++nextOpId           // Unique ID\n  };\n  pushOperation(cm.curOp);\n}\n\n// Finish an operation, updating the display and signalling delayed events\nfunction endOperation(cm) {\n  var op = cm.curOp;\n  finishOperation(op, function (group) {\n    for (var i = 0; i < group.ops.length; i++)\n      { group.ops[i].cm.curOp = null; }\n    endOperations(group);\n  });\n}\n\n// The DOM updates done when an operation finishes are batched so\n// that the minimum number of relayouts are required.\nfunction endOperations(group) {\n  var ops = group.ops;\n  for (var i = 0; i < ops.length; i++) // Read DOM\n    { endOperation_R1(ops[i]); }\n  for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n    { endOperation_W1(ops[i$1]); }\n  for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n    { endOperation_R2(ops[i$2]); }\n  for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n    { endOperation_W2(ops[i$3]); }\n  for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n    { endOperation_finish(ops[i$4]); }\n}\n\nfunction endOperation_R1(op) {\n  var cm = op.cm, display = cm.display;\n  maybeClipScrollbars(cm);\n  if (op.updateMaxLine) { findMaxLine(cm); }\n\n  op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n    op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                       op.scrollToPos.to.line >= display.viewTo) ||\n    display.maxLineChanged && cm.options.lineWrapping;\n  op.update = op.mustUpdate &&\n    new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n}\n\nfunction endOperation_W1(op) {\n  op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n}\n\nfunction endOperation_R2(op) {\n  var cm = op.cm, display = cm.display;\n  if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n  op.barMeasure = measureForScrollbars(cm);\n\n  // If the max line changed since it was last measured, measure it,\n  // and ensure the document's width matches it.\n  // updateDisplay_W2 will use these properties to do the actual resizing\n  if (display.maxLineChanged && !cm.options.lineWrapping) {\n    op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n    cm.display.sizerWidth = op.adjustWidthTo;\n    op.barMeasure.scrollWidth =\n      Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n    op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n  }\n\n  if (op.updatedDisplay || op.selectionChanged)\n    { op.preparedSelection = display.input.prepareSelection(); }\n}\n\nfunction endOperation_W2(op) {\n  var cm = op.cm;\n\n  if (op.adjustWidthTo != null) {\n    cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n    if (op.maxScrollLeft < cm.doc.scrollLeft)\n      { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n    cm.display.maxLineChanged = false;\n  }\n\n  var takeFocus = op.focus && op.focus == activeElt();\n  if (op.preparedSelection)\n    { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n  if (op.updatedDisplay || op.startHeight != cm.doc.height)\n    { updateScrollbars(cm, op.barMeasure); }\n  if (op.updatedDisplay)\n    { setDocumentHeight(cm, op.barMeasure); }\n\n  if (op.selectionChanged) { restartBlink(cm); }\n\n  if (cm.state.focused && op.updateInput)\n    { cm.display.input.reset(op.typing); }\n  if (takeFocus) { ensureFocus(op.cm); }\n}\n\nfunction endOperation_finish(op) {\n  var cm = op.cm, display = cm.display, doc = cm.doc;\n\n  if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n  // Abort mouse wheel delta measurement, when scrolling explicitly\n  if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n    { display.wheelStartX = display.wheelStartY = null; }\n\n  // Propagate the scroll position to the actual DOM scroller\n  if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n  if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n  // If we need to scroll a specific position into view, do so.\n  if (op.scrollToPos) {\n    var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                 clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n    maybeScrollWindow(cm, rect);\n  }\n\n  // Fire events for markers that are hidden/unidden by editing or\n  // undoing\n  var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n  if (hidden) { for (var i = 0; i < hidden.length; ++i)\n    { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n  if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n    { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n  if (display.wrapper.offsetHeight)\n    { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n  // Fire change events, and delayed event handlers\n  if (op.changeObjs)\n    { signal(cm, \"changes\", cm, op.changeObjs); }\n  if (op.update)\n    { op.update.finish(); }\n}\n\n// Run the given function in an operation\nfunction runInOp(cm, f) {\n  if (cm.curOp) { return f() }\n  startOperation(cm);\n  try { return f() }\n  finally { endOperation(cm); }\n}\n// Wraps a function in an operation. Returns the wrapped function.\nfunction operation(cm, f) {\n  return function() {\n    if (cm.curOp) { return f.apply(cm, arguments) }\n    startOperation(cm);\n    try { return f.apply(cm, arguments) }\n    finally { endOperation(cm); }\n  }\n}\n// Used to add methods to editor and doc instances, wrapping them in\n// operations.\nfunction methodOp(f) {\n  return function() {\n    if (this.curOp) { return f.apply(this, arguments) }\n    startOperation(this);\n    try { return f.apply(this, arguments) }\n    finally { endOperation(this); }\n  }\n}\nfunction docMethodOp(f) {\n  return function() {\n    var cm = this.cm;\n    if (!cm || cm.curOp) { return f.apply(this, arguments) }\n    startOperation(cm);\n    try { return f.apply(this, arguments) }\n    finally { endOperation(cm); }\n  }\n}\n\n// Updates the display.view data structure for a given change to the\n// document. From and to are in pre-change coordinates. Lendiff is\n// the amount of lines added or subtracted by the change. This is\n// used for changes that span multiple lines, or change the way\n// lines are divided into visual lines. regLineChange (below)\n// registers single-line changes.\nfunction regChange(cm, from, to, lendiff) {\n  if (from == null) { from = cm.doc.first; }\n  if (to == null) { to = cm.doc.first + cm.doc.size; }\n  if (!lendiff) { lendiff = 0; }\n\n  var display = cm.display;\n  if (lendiff && to < display.viewTo &&\n      (display.updateLineNumbers == null || display.updateLineNumbers > from))\n    { display.updateLineNumbers = from; }\n\n  cm.curOp.viewChanged = true;\n\n  if (from >= display.viewTo) { // Change after\n    if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n      { resetView(cm); }\n  } else if (to <= display.viewFrom) { // Change before\n    if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n      resetView(cm);\n    } else {\n      display.viewFrom += lendiff;\n      display.viewTo += lendiff;\n    }\n  } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n    resetView(cm);\n  } else if (from <= display.viewFrom) { // Top overlap\n    var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n    if (cut) {\n      display.view = display.view.slice(cut.index);\n      display.viewFrom = cut.lineN;\n      display.viewTo += lendiff;\n    } else {\n      resetView(cm);\n    }\n  } else if (to >= display.viewTo) { // Bottom overlap\n    var cut$1 = viewCuttingPoint(cm, from, from, -1);\n    if (cut$1) {\n      display.view = display.view.slice(0, cut$1.index);\n      display.viewTo = cut$1.lineN;\n    } else {\n      resetView(cm);\n    }\n  } else { // Gap in the middle\n    var cutTop = viewCuttingPoint(cm, from, from, -1);\n    var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n    if (cutTop && cutBot) {\n      display.view = display.view.slice(0, cutTop.index)\n        .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n        .concat(display.view.slice(cutBot.index));\n      display.viewTo += lendiff;\n    } else {\n      resetView(cm);\n    }\n  }\n\n  var ext = display.externalMeasured;\n  if (ext) {\n    if (to < ext.lineN)\n      { ext.lineN += lendiff; }\n    else if (from < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n  }\n}\n\n// Register a change to a single line. Type must be one of \"text\",\n// \"gutter\", \"class\", \"widget\"\nfunction regLineChange(cm, line, type) {\n  cm.curOp.viewChanged = true;\n  var display = cm.display, ext = cm.display.externalMeasured;\n  if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n    { display.externalMeasured = null; }\n\n  if (line < display.viewFrom || line >= display.viewTo) { return }\n  var lineView = display.view[findViewIndex(cm, line)];\n  if (lineView.node == null) { return }\n  var arr = lineView.changes || (lineView.changes = []);\n  if (indexOf(arr, type) == -1) { arr.push(type); }\n}\n\n// Clear the view.\nfunction resetView(cm) {\n  cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n  cm.display.view = [];\n  cm.display.viewOffset = 0;\n}\n\nfunction viewCuttingPoint(cm, oldN, newN, dir) {\n  var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n  if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n    { return {index: index, lineN: newN} }\n  var n = cm.display.viewFrom;\n  for (var i = 0; i < index; i++)\n    { n += view[i].size; }\n  if (n != oldN) {\n    if (dir > 0) {\n      if (index == view.length - 1) { return null }\n      diff = (n + view[index].size) - oldN;\n      index++;\n    } else {\n      diff = n - oldN;\n    }\n    oldN += diff; newN += diff;\n  }\n  while (visualLineNo(cm.doc, newN) != newN) {\n    if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n    newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n    index += dir;\n  }\n  return {index: index, lineN: newN}\n}\n\n// Force the view to cover a given range, adding empty view element\n// or clipping off existing ones as needed.\nfunction adjustView(cm, from, to) {\n  var display = cm.display, view = display.view;\n  if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n    display.view = buildViewArray(cm, from, to);\n    display.viewFrom = from;\n  } else {\n    if (display.viewFrom > from)\n      { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n    else if (display.viewFrom < from)\n      { display.view = display.view.slice(findViewIndex(cm, from)); }\n    display.viewFrom = from;\n    if (display.viewTo < to)\n      { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n    else if (display.viewTo > to)\n      { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n  }\n  display.viewTo = to;\n}\n\n// Count the number of lines in the view whose DOM representation is\n// out of date (or nonexistent).\nfunction countDirtyView(cm) {\n  var view = cm.display.view, dirty = 0;\n  for (var i = 0; i < view.length; i++) {\n    var lineView = view[i];\n    if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n  }\n  return dirty\n}\n\n// HIGHLIGHT WORKER\n\nfunction startWorker(cm, time) {\n  if (cm.doc.highlightFrontier < cm.display.viewTo)\n    { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n}\n\nfunction highlightWorker(cm) {\n  var doc = cm.doc;\n  if (doc.highlightFrontier >= cm.display.viewTo) { return }\n  var end = +new Date + cm.options.workTime;\n  var context = getContextBefore(cm, doc.highlightFrontier);\n  var changedLines = [];\n\n  doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n    if (context.line >= cm.display.viewFrom) { // Visible\n      var oldStyles = line.styles;\n      var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n      var highlighted = highlightLine(cm, line, context, true);\n      if (resetState) { context.state = resetState; }\n      line.styles = highlighted.styles;\n      var oldCls = line.styleClasses, newCls = highlighted.classes;\n      if (newCls) { line.styleClasses = newCls; }\n      else if (oldCls) { line.styleClasses = null; }\n      var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n        oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n      for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n      if (ischange) { changedLines.push(context.line); }\n      line.stateAfter = context.save();\n      context.nextLine();\n    } else {\n      if (line.text.length <= cm.options.maxHighlightLength)\n        { processLine(cm, line.text, context); }\n      line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n      context.nextLine();\n    }\n    if (+new Date > end) {\n      startWorker(cm, cm.options.workDelay);\n      return true\n    }\n  });\n  doc.highlightFrontier = context.line;\n  doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n  if (changedLines.length) { runInOp(cm, function () {\n    for (var i = 0; i < changedLines.length; i++)\n      { regLineChange(cm, changedLines[i], \"text\"); }\n  }); }\n}\n\n// DISPLAY DRAWING\n\nvar DisplayUpdate = function(cm, viewport, force) {\n  var display = cm.display;\n\n  this.viewport = viewport;\n  // Store some values that we'll need later (but don't want to force a relayout for)\n  this.visible = visibleLines(display, cm.doc, viewport);\n  this.editorIsHidden = !display.wrapper.offsetWidth;\n  this.wrapperHeight = display.wrapper.clientHeight;\n  this.wrapperWidth = display.wrapper.clientWidth;\n  this.oldDisplayWidth = displayWidth(cm);\n  this.force = force;\n  this.dims = getDimensions(cm);\n  this.events = [];\n};\n\nDisplayUpdate.prototype.signal = function (emitter, type) {\n  if (hasHandler(emitter, type))\n    { this.events.push(arguments); }\n};\nDisplayUpdate.prototype.finish = function () {\n    var this$1 = this;\n\n  for (var i = 0; i < this.events.length; i++)\n    { signal.apply(null, this$1.events[i]); }\n};\n\nfunction maybeClipScrollbars(cm) {\n  var display = cm.display;\n  if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n    display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n    display.heightForcer.style.height = scrollGap(cm) + \"px\";\n    display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n    display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n    display.scrollbarsClipped = true;\n  }\n}\n\nfunction selectionSnapshot(cm) {\n  if (cm.hasFocus()) { return null }\n  var active = activeElt();\n  if (!active || !contains(cm.display.lineDiv, active)) { return null }\n  var result = {activeElt: active};\n  if (window.getSelection) {\n    var sel = window.getSelection();\n    if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n      result.anchorNode = sel.anchorNode;\n      result.anchorOffset = sel.anchorOffset;\n      result.focusNode = sel.focusNode;\n      result.focusOffset = sel.focusOffset;\n    }\n  }\n  return result\n}\n\nfunction restoreSelection(snapshot) {\n  if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n  snapshot.activeElt.focus();\n  if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n    var sel = window.getSelection(), range$$1 = document.createRange();\n    range$$1.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n    range$$1.collapse(false);\n    sel.removeAllRanges();\n    sel.addRange(range$$1);\n    sel.extend(snapshot.focusNode, snapshot.focusOffset);\n  }\n}\n\n// Does the actual updating of the line display. Bails out\n// (returning false) when there is nothing to be done and forced is\n// false.\nfunction updateDisplayIfNeeded(cm, update) {\n  var display = cm.display, doc = cm.doc;\n\n  if (update.editorIsHidden) {\n    resetView(cm);\n    return false\n  }\n\n  // Bail out if the visible area is already rendered and nothing changed.\n  if (!update.force &&\n      update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n      (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n      display.renderedView == display.view && countDirtyView(cm) == 0)\n    { return false }\n\n  if (maybeUpdateLineNumberWidth(cm)) {\n    resetView(cm);\n    update.dims = getDimensions(cm);\n  }\n\n  // Compute a suitable new viewport (from & to)\n  var end = doc.first + doc.size;\n  var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n  var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n  if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n  if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n  if (sawCollapsedSpans) {\n    from = visualLineNo(cm.doc, from);\n    to = visualLineEndNo(cm.doc, to);\n  }\n\n  var different = from != display.viewFrom || to != display.viewTo ||\n    display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n  adjustView(cm, from, to);\n\n  display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n  // Position the mover div to align with the current scroll position\n  cm.display.mover.style.top = display.viewOffset + \"px\";\n\n  var toUpdate = countDirtyView(cm);\n  if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n      (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n    { return false }\n\n  // For big changes, we hide the enclosing element during the\n  // update, since that speeds up the operations on most browsers.\n  var selSnapshot = selectionSnapshot(cm);\n  if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n  patchDisplay(cm, display.updateLineNumbers, update.dims);\n  if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n  display.renderedView = display.view;\n  // There might have been a widget with a focused element that got\n  // hidden or updated, if so re-focus it.\n  restoreSelection(selSnapshot);\n\n  // Prevent selection and cursors from interfering with the scroll\n  // width and height.\n  removeChildren(display.cursorDiv);\n  removeChildren(display.selectionDiv);\n  display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n  if (different) {\n    display.lastWrapHeight = update.wrapperHeight;\n    display.lastWrapWidth = update.wrapperWidth;\n    startWorker(cm, 400);\n  }\n\n  display.updateLineNumbers = null;\n\n  return true\n}\n\nfunction postUpdateDisplay(cm, update) {\n  var viewport = update.viewport;\n\n  for (var first = true;; first = false) {\n    if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n      // Clip forced viewport to actual scrollable area.\n      if (viewport && viewport.top != null)\n        { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n      // Updated line heights might result in the drawn area not\n      // actually covering the viewport. Keep looping until it does.\n      update.visible = visibleLines(cm.display, cm.doc, viewport);\n      if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n        { break }\n    }\n    if (!updateDisplayIfNeeded(cm, update)) { break }\n    updateHeightsInViewport(cm);\n    var barMeasure = measureForScrollbars(cm);\n    updateSelection(cm);\n    updateScrollbars(cm, barMeasure);\n    setDocumentHeight(cm, barMeasure);\n    update.force = false;\n  }\n\n  update.signal(cm, \"update\", cm);\n  if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n    update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n    cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n  }\n}\n\nfunction updateDisplaySimple(cm, viewport) {\n  var update = new DisplayUpdate(cm, viewport);\n  if (updateDisplayIfNeeded(cm, update)) {\n    updateHeightsInViewport(cm);\n    postUpdateDisplay(cm, update);\n    var barMeasure = measureForScrollbars(cm);\n    updateSelection(cm);\n    updateScrollbars(cm, barMeasure);\n    setDocumentHeight(cm, barMeasure);\n    update.finish();\n  }\n}\n\n// Sync the actual display DOM structure with display.view, removing\n// nodes for lines that are no longer in view, and creating the ones\n// that are not there yet, and updating the ones that are out of\n// date.\nfunction patchDisplay(cm, updateNumbersFrom, dims) {\n  var display = cm.display, lineNumbers = cm.options.lineNumbers;\n  var container = display.lineDiv, cur = container.firstChild;\n\n  function rm(node) {\n    var next = node.nextSibling;\n    // Works around a throw-scroll bug in OS X Webkit\n    if (webkit && mac && cm.display.currentWheelTarget == node)\n      { node.style.display = \"none\"; }\n    else\n      { node.parentNode.removeChild(node); }\n    return next\n  }\n\n  var view = display.view, lineN = display.viewFrom;\n  // Loop over the elements in the view, syncing cur (the DOM nodes\n  // in display.lineDiv) with the view as we go.\n  for (var i = 0; i < view.length; i++) {\n    var lineView = view[i];\n    if (lineView.hidden) {\n    } else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n      var node = buildLineElement(cm, lineView, lineN, dims);\n      container.insertBefore(node, cur);\n    } else { // Already drawn\n      while (cur != lineView.node) { cur = rm(cur); }\n      var updateNumber = lineNumbers && updateNumbersFrom != null &&\n        updateNumbersFrom <= lineN && lineView.lineNumber;\n      if (lineView.changes) {\n        if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n        updateLineForChanges(cm, lineView, lineN, dims);\n      }\n      if (updateNumber) {\n        removeChildren(lineView.lineNumber);\n        lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n      }\n      cur = lineView.node.nextSibling;\n    }\n    lineN += lineView.size;\n  }\n  while (cur) { cur = rm(cur); }\n}\n\nfunction updateGutterSpace(cm) {\n  var width = cm.display.gutters.offsetWidth;\n  cm.display.sizer.style.marginLeft = width + \"px\";\n}\n\nfunction setDocumentHeight(cm, measure) {\n  cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n  cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n  cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n}\n\n// Rebuild the gutter elements, ensure the margin to the left of the\n// code matches their width.\nfunction updateGutters(cm) {\n  var gutters = cm.display.gutters, specs = cm.options.gutters;\n  removeChildren(gutters);\n  var i = 0;\n  for (; i < specs.length; ++i) {\n    var gutterClass = specs[i];\n    var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + gutterClass));\n    if (gutterClass == \"CodeMirror-linenumbers\") {\n      cm.display.lineGutter = gElt;\n      gElt.style.width = (cm.display.lineNumWidth || 1) + \"px\";\n    }\n  }\n  gutters.style.display = i ? \"\" : \"none\";\n  updateGutterSpace(cm);\n}\n\n// Make sure the gutters options contains the element\n// \"CodeMirror-linenumbers\" when the lineNumbers option is true.\nfunction setGuttersForLineNumbers(options) {\n  var found = indexOf(options.gutters, \"CodeMirror-linenumbers\");\n  if (found == -1 && options.lineNumbers) {\n    options.gutters = options.gutters.concat([\"CodeMirror-linenumbers\"]);\n  } else if (found > -1 && !options.lineNumbers) {\n    options.gutters = options.gutters.slice(0);\n    options.gutters.splice(found, 1);\n  }\n}\n\n// Since the delta values reported on mouse wheel events are\n// unstandardized between browsers and even browser versions, and\n// generally horribly unpredictable, this code starts by measuring\n// the scroll effect that the first few mouse wheel events have,\n// and, from that, detects the way it can convert deltas to pixel\n// offsets afterwards.\n//\n// The reason we want to know the amount a wheel event will scroll\n// is that it gives us a chance to update the display before the\n// actual scrolling happens, reducing flickering.\n\nvar wheelSamples = 0;\nvar wheelPixelsPerUnit = null;\n// Fill in a browser-detected starting value on browsers where we\n// know one. These don't have to be accurate -- the result of them\n// being wrong would just be a slight flicker on the first wheel\n// scroll (if it is large enough).\nif (ie) { wheelPixelsPerUnit = -.53; }\nelse if (gecko) { wheelPixelsPerUnit = 15; }\nelse if (chrome) { wheelPixelsPerUnit = -.7; }\nelse if (safari) { wheelPixelsPerUnit = -1/3; }\n\nfunction wheelEventDelta(e) {\n  var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n  if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n  if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n  else if (dy == null) { dy = e.wheelDelta; }\n  return {x: dx, y: dy}\n}\nfunction wheelEventPixels(e) {\n  var delta = wheelEventDelta(e);\n  delta.x *= wheelPixelsPerUnit;\n  delta.y *= wheelPixelsPerUnit;\n  return delta\n}\n\nfunction onScrollWheel(cm, e) {\n  var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n\n  var display = cm.display, scroll = display.scroller;\n  // Quit if there's nothing to scroll here\n  var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n  var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n  if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n  // Webkit browsers on OS X abort momentum scrolls when the target\n  // of the scroll event is removed from the scrollable element.\n  // This hack (see related code in patchDisplay) makes sure the\n  // element is kept around.\n  if (dy && mac && webkit) {\n    outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n      for (var i = 0; i < view.length; i++) {\n        if (view[i].node == cur) {\n          cm.display.currentWheelTarget = cur;\n          break outer\n        }\n      }\n    }\n  }\n\n  // On some browsers, horizontal scrolling will cause redraws to\n  // happen before the gutter has been realigned, causing it to\n  // wriggle around in a most unseemly way. When we have an\n  // estimated pixels/delta value, we just handle horizontal\n  // scrolling entirely here. It'll be slightly off from native, but\n  // better than glitching out.\n  if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n    if (dy && canScrollY)\n      { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)); }\n    setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n    // Only prevent default scrolling if vertical scrolling is\n    // actually possible. Otherwise, it causes vertical scroll\n    // jitter on OSX trackpads when deltaX is small and deltaY\n    // is large (issue #3579)\n    if (!dy || (dy && canScrollY))\n      { e_preventDefault(e); }\n    display.wheelStartX = null; // Abort measurement, if in progress\n    return\n  }\n\n  // 'Project' the visible viewport to cover the area that is being\n  // scrolled into view (if we know enough to estimate it).\n  if (dy && wheelPixelsPerUnit != null) {\n    var pixels = dy * wheelPixelsPerUnit;\n    var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n    if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n    else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n    updateDisplaySimple(cm, {top: top, bottom: bot});\n  }\n\n  if (wheelSamples < 20) {\n    if (display.wheelStartX == null) {\n      display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n      display.wheelDX = dx; display.wheelDY = dy;\n      setTimeout(function () {\n        if (display.wheelStartX == null) { return }\n        var movedX = scroll.scrollLeft - display.wheelStartX;\n        var movedY = scroll.scrollTop - display.wheelStartY;\n        var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n          (movedX && display.wheelDX && movedX / display.wheelDX);\n        display.wheelStartX = display.wheelStartY = null;\n        if (!sample) { return }\n        wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n        ++wheelSamples;\n      }, 200);\n    } else {\n      display.wheelDX += dx; display.wheelDY += dy;\n    }\n  }\n}\n\n// Selection objects are immutable. A new one is created every time\n// the selection changes. A selection is one or more non-overlapping\n// (and non-touching) ranges, sorted, and an integer that indicates\n// which one is the primary selection (the one that's scrolled into\n// view, that getCursor returns, etc).\nvar Selection = function(ranges, primIndex) {\n  this.ranges = ranges;\n  this.primIndex = primIndex;\n};\n\nSelection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\nSelection.prototype.equals = function (other) {\n    var this$1 = this;\n\n  if (other == this) { return true }\n  if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n  for (var i = 0; i < this.ranges.length; i++) {\n    var here = this$1.ranges[i], there = other.ranges[i];\n    if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n  }\n  return true\n};\n\nSelection.prototype.deepCopy = function () {\n    var this$1 = this;\n\n  var out = [];\n  for (var i = 0; i < this.ranges.length; i++)\n    { out[i] = new Range(copyPos(this$1.ranges[i].anchor), copyPos(this$1.ranges[i].head)); }\n  return new Selection(out, this.primIndex)\n};\n\nSelection.prototype.somethingSelected = function () {\n    var this$1 = this;\n\n  for (var i = 0; i < this.ranges.length; i++)\n    { if (!this$1.ranges[i].empty()) { return true } }\n  return false\n};\n\nSelection.prototype.contains = function (pos, end) {\n    var this$1 = this;\n\n  if (!end) { end = pos; }\n  for (var i = 0; i < this.ranges.length; i++) {\n    var range = this$1.ranges[i];\n    if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n      { return i }\n  }\n  return -1\n};\n\nvar Range = function(anchor, head) {\n  this.anchor = anchor; this.head = head;\n};\n\nRange.prototype.from = function () { return minPos(this.anchor, this.head) };\nRange.prototype.to = function () { return maxPos(this.anchor, this.head) };\nRange.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n// Take an unsorted, potentially overlapping set of ranges, and\n// build a selection out of it. 'Consumes' ranges array (modifying\n// it).\nfunction normalizeSelection(ranges, primIndex) {\n  var prim = ranges[primIndex];\n  ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n  primIndex = indexOf(ranges, prim);\n  for (var i = 1; i < ranges.length; i++) {\n    var cur = ranges[i], prev = ranges[i - 1];\n    if (cmp(prev.to(), cur.from()) >= 0) {\n      var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n      var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n      if (i <= primIndex) { --primIndex; }\n      ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n    }\n  }\n  return new Selection(ranges, primIndex)\n}\n\nfunction simpleSelection(anchor, head) {\n  return new Selection([new Range(anchor, head || anchor)], 0)\n}\n\n// Compute the position of the end of a change (its 'to' property\n// refers to the pre-change end).\nfunction changeEnd(change) {\n  if (!change.text) { return change.to }\n  return Pos(change.from.line + change.text.length - 1,\n             lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n}\n\n// Adjust a position to refer to the post-change position of the\n// same text, or the end of the change if the change covers it.\nfunction adjustForChange(pos, change) {\n  if (cmp(pos, change.from) < 0) { return pos }\n  if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n  var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n  if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n  return Pos(line, ch)\n}\n\nfunction computeSelAfterChange(doc, change) {\n  var out = [];\n  for (var i = 0; i < doc.sel.ranges.length; i++) {\n    var range = doc.sel.ranges[i];\n    out.push(new Range(adjustForChange(range.anchor, change),\n                       adjustForChange(range.head, change)));\n  }\n  return normalizeSelection(out, doc.sel.primIndex)\n}\n\nfunction offsetPos(pos, old, nw) {\n  if (pos.line == old.line)\n    { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n  else\n    { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n}\n\n// Used by replaceSelections to allow moving the selection to the\n// start or around the replaced test. Hint may be \"start\" or \"around\".\nfunction computeReplacedSel(doc, changes, hint) {\n  var out = [];\n  var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n  for (var i = 0; i < changes.length; i++) {\n    var change = changes[i];\n    var from = offsetPos(change.from, oldPrev, newPrev);\n    var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n    oldPrev = change.to;\n    newPrev = to;\n    if (hint == \"around\") {\n      var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n      out[i] = new Range(inv ? to : from, inv ? from : to);\n    } else {\n      out[i] = new Range(from, from);\n    }\n  }\n  return new Selection(out, doc.sel.primIndex)\n}\n\n// Used to get the editor into a consistent state again when options change.\n\nfunction loadMode(cm) {\n  cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n  resetModeState(cm);\n}\n\nfunction resetModeState(cm) {\n  cm.doc.iter(function (line) {\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n  });\n  cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n  startWorker(cm, 100);\n  cm.state.modeGen++;\n  if (cm.curOp) { regChange(cm); }\n}\n\n// DOCUMENT DATA STRUCTURE\n\n// By default, updates that start and end at the beginning of a line\n// are treated specially, in order to make the association of line\n// widgets and marker elements with the text behave more intuitive.\nfunction isWholeLineUpdate(doc, change) {\n  return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n    (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n}\n\n// Perform a change on the document data structure.\nfunction updateDoc(doc, change, markedSpans, estimateHeight$$1) {\n  function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n  function update(line, text, spans) {\n    updateLine(line, text, spans, estimateHeight$$1);\n    signalLater(line, \"change\", line, change);\n  }\n  function linesFor(start, end) {\n    var result = [];\n    for (var i = start; i < end; ++i)\n      { result.push(new Line(text[i], spansFor(i), estimateHeight$$1)); }\n    return result\n  }\n\n  var from = change.from, to = change.to, text = change.text;\n  var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n  var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n  // Adjust the line structure\n  if (change.full) {\n    doc.insert(0, linesFor(0, text.length));\n    doc.remove(text.length, doc.size - text.length);\n  } else if (isWholeLineUpdate(doc, change)) {\n    // This is a whole-line replace. Treated specially to make\n    // sure line objects move the way they are supposed to.\n    var added = linesFor(0, text.length - 1);\n    update(lastLine, lastLine.text, lastSpans);\n    if (nlines) { doc.remove(from.line, nlines); }\n    if (added.length) { doc.insert(from.line, added); }\n  } else if (firstLine == lastLine) {\n    if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n    } else {\n      var added$1 = linesFor(1, text.length - 1);\n      added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight$$1));\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      doc.insert(from.line + 1, added$1);\n    }\n  } else if (text.length == 1) {\n    update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n    doc.remove(from.line + 1, nlines);\n  } else {\n    update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n    update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n    var added$2 = linesFor(1, text.length - 1);\n    if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n    doc.insert(from.line + 1, added$2);\n  }\n\n  signalLater(doc, \"change\", doc, change);\n}\n\n// Call f for all linked documents.\nfunction linkedDocs(doc, f, sharedHistOnly) {\n  function propagate(doc, skip, sharedHist) {\n    if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n      var rel = doc.linked[i];\n      if (rel.doc == skip) { continue }\n      var shared = sharedHist && rel.sharedHist;\n      if (sharedHistOnly && !shared) { continue }\n      f(rel.doc, shared);\n      propagate(rel.doc, doc, shared);\n    } }\n  }\n  propagate(doc, null, true);\n}\n\n// Attach a document to an editor.\nfunction attachDoc(cm, doc) {\n  if (doc.cm) { throw new Error(\"This document is already in use.\") }\n  cm.doc = doc;\n  doc.cm = cm;\n  estimateLineHeights(cm);\n  loadMode(cm);\n  setDirectionClass(cm);\n  if (!cm.options.lineWrapping) { findMaxLine(cm); }\n  cm.options.mode = doc.modeOption;\n  regChange(cm);\n}\n\nfunction setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n}\n\nfunction directionChanged(cm) {\n  runInOp(cm, function () {\n    setDirectionClass(cm);\n    regChange(cm);\n  });\n}\n\nfunction History(startGen) {\n  // Arrays of change events and selections. Doing something adds an\n  // event to done and clears undo. Undoing moves events from done\n  // to undone, redoing moves them in the other direction.\n  this.done = []; this.undone = [];\n  this.undoDepth = Infinity;\n  // Used to track when changes can be merged into a single undo\n  // event\n  this.lastModTime = this.lastSelTime = 0;\n  this.lastOp = this.lastSelOp = null;\n  this.lastOrigin = this.lastSelOrigin = null;\n  // Used by the isClean() method\n  this.generation = this.maxGeneration = startGen || 1;\n}\n\n// Create a history change event from an updateDoc-style change\n// object.\nfunction historyChangeFromChange(doc, change) {\n  var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n  attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n  linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n  return histChange\n}\n\n// Pop all selection events off the end of a history array. Stop at\n// a change event.\nfunction clearSelectionEvents(array) {\n  while (array.length) {\n    var last = lst(array);\n    if (last.ranges) { array.pop(); }\n    else { break }\n  }\n}\n\n// Find the top change event in the history. Pop off selection\n// events that are in the way.\nfunction lastChangeEvent(hist, force) {\n  if (force) {\n    clearSelectionEvents(hist.done);\n    return lst(hist.done)\n  } else if (hist.done.length && !lst(hist.done).ranges) {\n    return lst(hist.done)\n  } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n    hist.done.pop();\n    return lst(hist.done)\n  }\n}\n\n// Register a change in the history. Merges changes that are within\n// a single operation, or are close together with an origin that\n// allows merging (starting with \"+\") into a single event.\nfunction addChangeToHistory(doc, change, selAfter, opId) {\n  var hist = doc.history;\n  hist.undone.length = 0;\n  var time = +new Date, cur;\n  var last;\n\n  if ((hist.lastOp == opId ||\n       hist.lastOrigin == change.origin && change.origin &&\n       ((change.origin.charAt(0) == \"+\" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay) ||\n        change.origin.charAt(0) == \"*\")) &&\n      (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n    // Merge this change into the last event\n    last = lst(cur.changes);\n    if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n      // Optimized case for simple insertion -- don't want to add\n      // new changesets for every character typed\n      last.to = changeEnd(change);\n    } else {\n      // Add new sub-event\n      cur.changes.push(historyChangeFromChange(doc, change));\n    }\n  } else {\n    // Can not be merged, start a new event.\n    var before = lst(hist.done);\n    if (!before || !before.ranges)\n      { pushSelectionToHistory(doc.sel, hist.done); }\n    cur = {changes: [historyChangeFromChange(doc, change)],\n           generation: hist.generation};\n    hist.done.push(cur);\n    while (hist.done.length > hist.undoDepth) {\n      hist.done.shift();\n      if (!hist.done[0].ranges) { hist.done.shift(); }\n    }\n  }\n  hist.done.push(selAfter);\n  hist.generation = ++hist.maxGeneration;\n  hist.lastModTime = hist.lastSelTime = time;\n  hist.lastOp = hist.lastSelOp = opId;\n  hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n  if (!last) { signal(doc, \"historyAdded\"); }\n}\n\nfunction selectionEventCanBeMerged(doc, origin, prev, sel) {\n  var ch = origin.charAt(0);\n  return ch == \"*\" ||\n    ch == \"+\" &&\n    prev.ranges.length == sel.ranges.length &&\n    prev.somethingSelected() == sel.somethingSelected() &&\n    new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n}\n\n// Called whenever the selection changes, sets the new selection as\n// the pending selection in the history, and pushes the old pending\n// selection into the 'done' array when it was significantly\n// different (in number of selected ranges, emptiness, or time).\nfunction addSelectionToHistory(doc, sel, opId, options) {\n  var hist = doc.history, origin = options && options.origin;\n\n  // A new event is started when the previous origin does not match\n  // the current, or the origins don't allow matching. Origins\n  // starting with * are always merged, those starting with + are\n  // merged when similar and close together in time.\n  if (opId == hist.lastSelOp ||\n      (origin && hist.lastSelOrigin == origin &&\n       (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n        selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n    { hist.done[hist.done.length - 1] = sel; }\n  else\n    { pushSelectionToHistory(sel, hist.done); }\n\n  hist.lastSelTime = +new Date;\n  hist.lastSelOrigin = origin;\n  hist.lastSelOp = opId;\n  if (options && options.clearRedo !== false)\n    { clearSelectionEvents(hist.undone); }\n}\n\nfunction pushSelectionToHistory(sel, dest) {\n  var top = lst(dest);\n  if (!(top && top.ranges && top.equals(sel)))\n    { dest.push(sel); }\n}\n\n// Used to store marked span information in the history.\nfunction attachLocalSpans(doc, change, from, to) {\n  var existing = change[\"spans_\" + doc.id], n = 0;\n  doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n    if (line.markedSpans)\n      { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n    ++n;\n  });\n}\n\n// When un/re-doing restores text containing marked spans, those\n// that have been explicitly cleared should not be restored.\nfunction removeClearedSpans(spans) {\n  if (!spans) { return null }\n  var out;\n  for (var i = 0; i < spans.length; ++i) {\n    if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n    else if (out) { out.push(spans[i]); }\n  }\n  return !out ? spans : out.length ? out : null\n}\n\n// Retrieve and filter the old marked spans stored in a change event.\nfunction getOldSpans(doc, change) {\n  var found = change[\"spans_\" + doc.id];\n  if (!found) { return null }\n  var nw = [];\n  for (var i = 0; i < change.text.length; ++i)\n    { nw.push(removeClearedSpans(found[i])); }\n  return nw\n}\n\n// Used for un/re-doing changes from the history. Combines the\n// result of computing the existing spans with the set of spans that\n// existed in the history (so that deleting around a span and then\n// undoing brings back the span).\nfunction mergeOldSpans(doc, change) {\n  var old = getOldSpans(doc, change);\n  var stretched = stretchSpansOverChange(doc, change);\n  if (!old) { return stretched }\n  if (!stretched) { return old }\n\n  for (var i = 0; i < old.length; ++i) {\n    var oldCur = old[i], stretchCur = stretched[i];\n    if (oldCur && stretchCur) {\n      spans: for (var j = 0; j < stretchCur.length; ++j) {\n        var span = stretchCur[j];\n        for (var k = 0; k < oldCur.length; ++k)\n          { if (oldCur[k].marker == span.marker) { continue spans } }\n        oldCur.push(span);\n      }\n    } else if (stretchCur) {\n      old[i] = stretchCur;\n    }\n  }\n  return old\n}\n\n// Used both to provide a JSON-safe object in .getHistory, and, when\n// detaching a document, to split the history in two\nfunction copyHistoryArray(events, newGroup, instantiateSel) {\n  var copy = [];\n  for (var i = 0; i < events.length; ++i) {\n    var event = events[i];\n    if (event.ranges) {\n      copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n      continue\n    }\n    var changes = event.changes, newChanges = [];\n    copy.push({changes: newChanges});\n    for (var j = 0; j < changes.length; ++j) {\n      var change = changes[j], m = (void 0);\n      newChanges.push({from: change.from, to: change.to, text: change.text});\n      if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n        if (indexOf(newGroup, Number(m[1])) > -1) {\n          lst(newChanges)[prop] = change[prop];\n          delete change[prop];\n        }\n      } } }\n    }\n  }\n  return copy\n}\n\n// The 'scroll' parameter given to many of these indicated whether\n// the new cursor position should be scrolled into view after\n// modifying the selection.\n\n// If shift is held or the extend flag is set, extends a range to\n// include a given position (and optionally a second position).\n// Otherwise, simply returns the range between the given positions.\n// Used for cursor motion and such.\nfunction extendRange(range, head, other, extend) {\n  if (extend) {\n    var anchor = range.anchor;\n    if (other) {\n      var posBefore = cmp(head, anchor) < 0;\n      if (posBefore != (cmp(other, anchor) < 0)) {\n        anchor = head;\n        head = other;\n      } else if (posBefore != (cmp(head, other) < 0)) {\n        head = other;\n      }\n    }\n    return new Range(anchor, head)\n  } else {\n    return new Range(other || head, head)\n  }\n}\n\n// Extend the primary selection range, discard the rest.\nfunction extendSelection(doc, head, other, options, extend) {\n  if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n  setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n}\n\n// Extend all selections (pos is an array of selections with length\n// equal the number of selections)\nfunction extendSelections(doc, heads, options) {\n  var out = [];\n  var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n  for (var i = 0; i < doc.sel.ranges.length; i++)\n    { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n  var newSel = normalizeSelection(out, doc.sel.primIndex);\n  setSelection(doc, newSel, options);\n}\n\n// Updates a single range in the selection.\nfunction replaceOneSelection(doc, i, range, options) {\n  var ranges = doc.sel.ranges.slice(0);\n  ranges[i] = range;\n  setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);\n}\n\n// Reset the selection to a single range.\nfunction setSimpleSelection(doc, anchor, head, options) {\n  setSelection(doc, simpleSelection(anchor, head), options);\n}\n\n// Give beforeSelectionChange handlers a change to influence a\n// selection update.\nfunction filterSelectionChange(doc, sel, options) {\n  var obj = {\n    ranges: sel.ranges,\n    update: function(ranges) {\n      var this$1 = this;\n\n      this.ranges = [];\n      for (var i = 0; i < ranges.length; i++)\n        { this$1.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                   clipPos(doc, ranges[i].head)); }\n    },\n    origin: options && options.origin\n  };\n  signal(doc, \"beforeSelectionChange\", doc, obj);\n  if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n  if (obj.ranges != sel.ranges) { return normalizeSelection(obj.ranges, obj.ranges.length - 1) }\n  else { return sel }\n}\n\nfunction setSelectionReplaceHistory(doc, sel, options) {\n  var done = doc.history.done, last = lst(done);\n  if (last && last.ranges) {\n    done[done.length - 1] = sel;\n    setSelectionNoUndo(doc, sel, options);\n  } else {\n    setSelection(doc, sel, options);\n  }\n}\n\n// Set a new selection.\nfunction setSelection(doc, sel, options) {\n  setSelectionNoUndo(doc, sel, options);\n  addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n}\n\nfunction setSelectionNoUndo(doc, sel, options) {\n  if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n    { sel = filterSelectionChange(doc, sel, options); }\n\n  var bias = options && options.bias ||\n    (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n  setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n  if (!(options && options.scroll === false) && doc.cm)\n    { ensureCursorVisible(doc.cm); }\n}\n\nfunction setSelectionInner(doc, sel) {\n  if (sel.equals(doc.sel)) { return }\n\n  doc.sel = sel;\n\n  if (doc.cm) {\n    doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;\n    signalCursorActivity(doc.cm);\n  }\n  signalLater(doc, \"cursorActivity\", doc);\n}\n\n// Verify that the selection does not partially select any atomic\n// marked ranges.\nfunction reCheckSelection(doc) {\n  setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n}\n\n// Return a selection that does not partially select any atomic\n// ranges.\nfunction skipAtomicInSelection(doc, sel, bias, mayClear) {\n  var out;\n  for (var i = 0; i < sel.ranges.length; i++) {\n    var range = sel.ranges[i];\n    var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n    var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n    var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n    if (out || newAnchor != range.anchor || newHead != range.head) {\n      if (!out) { out = sel.ranges.slice(0, i); }\n      out[i] = new Range(newAnchor, newHead);\n    }\n  }\n  return out ? normalizeSelection(out, sel.primIndex) : sel\n}\n\nfunction skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n  var line = getLine(doc, pos.line);\n  if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n    var sp = line.markedSpans[i], m = sp.marker;\n    if ((sp.from == null || (m.inclusiveLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n        (sp.to == null || (m.inclusiveRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n      if (mayClear) {\n        signal(m, \"beforeCursorEnter\");\n        if (m.explicitlyCleared) {\n          if (!line.markedSpans) { break }\n          else {--i; continue}\n        }\n      }\n      if (!m.atomic) { continue }\n\n      if (oldPos) {\n        var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n        if (dir < 0 ? m.inclusiveRight : m.inclusiveLeft)\n          { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n        if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n          { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n      }\n\n      var far = m.find(dir < 0 ? -1 : 1);\n      if (dir < 0 ? m.inclusiveLeft : m.inclusiveRight)\n        { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n      return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n    }\n  } }\n  return pos\n}\n\n// Ensure a given position is not inside an atomic range.\nfunction skipAtomic(doc, pos, oldPos, bias, mayClear) {\n  var dir = bias || 1;\n  var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n      (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n      skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n      (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n  if (!found) {\n    doc.cantEdit = true;\n    return Pos(doc.first, 0)\n  }\n  return found\n}\n\nfunction movePos(doc, pos, dir, line) {\n  if (dir < 0 && pos.ch == 0) {\n    if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n    else { return null }\n  } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n    if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n    else { return null }\n  } else {\n    return new Pos(pos.line, pos.ch + dir)\n  }\n}\n\nfunction selectAll(cm) {\n  cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n}\n\n// UPDATING\n\n// Allow \"beforeChange\" event handlers to influence a change\nfunction filterChange(doc, change, update) {\n  var obj = {\n    canceled: false,\n    from: change.from,\n    to: change.to,\n    text: change.text,\n    origin: change.origin,\n    cancel: function () { return obj.canceled = true; }\n  };\n  if (update) { obj.update = function (from, to, text, origin) {\n    if (from) { obj.from = clipPos(doc, from); }\n    if (to) { obj.to = clipPos(doc, to); }\n    if (text) { obj.text = text; }\n    if (origin !== undefined) { obj.origin = origin; }\n  }; }\n  signal(doc, \"beforeChange\", doc, obj);\n  if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n  if (obj.canceled) { return null }\n  return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n}\n\n// Apply a change to a document, and add it to the document's\n// history, and propagating it to all linked documents.\nfunction makeChange(doc, change, ignoreReadOnly) {\n  if (doc.cm) {\n    if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n    if (doc.cm.state.suppressEdits) { return }\n  }\n\n  if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n    change = filterChange(doc, change, true);\n    if (!change) { return }\n  }\n\n  // Possibly split or suppress the update based on the presence\n  // of read-only spans in its range.\n  var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n  if (split) {\n    for (var i = split.length - 1; i >= 0; --i)\n      { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n  } else {\n    makeChangeInner(doc, change);\n  }\n}\n\nfunction makeChangeInner(doc, change) {\n  if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n  var selAfter = computeSelAfterChange(doc, change);\n  addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n  makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n  var rebased = [];\n\n  linkedDocs(doc, function (doc, sharedHist) {\n    if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n      rebaseHist(doc.history, change);\n      rebased.push(doc.history);\n    }\n    makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n  });\n}\n\n// Revert a change stored in a document's history.\nfunction makeChangeFromHistory(doc, type, allowSelectionOnly) {\n  var suppress = doc.cm && doc.cm.state.suppressEdits;\n  if (suppress && !allowSelectionOnly) { return }\n\n  var hist = doc.history, event, selAfter = doc.sel;\n  var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n  // Verify that there is a useable event (so that ctrl-z won't\n  // needlessly clear selection events)\n  var i = 0;\n  for (; i < source.length; i++) {\n    event = source[i];\n    if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n      { break }\n  }\n  if (i == source.length) { return }\n  hist.lastOrigin = hist.lastSelOrigin = null;\n\n  for (;;) {\n    event = source.pop();\n    if (event.ranges) {\n      pushSelectionToHistory(event, dest);\n      if (allowSelectionOnly && !event.equals(doc.sel)) {\n        setSelection(doc, event, {clearRedo: false});\n        return\n      }\n      selAfter = event;\n    } else if (suppress) {\n      source.push(event);\n      return\n    } else { break }\n  }\n\n  // Build up a reverse change object to add to the opposite history\n  // stack (redo when undoing, and vice versa).\n  var antiChanges = [];\n  pushSelectionToHistory(selAfter, dest);\n  dest.push({changes: antiChanges, generation: hist.generation});\n  hist.generation = event.generation || ++hist.maxGeneration;\n\n  var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n  var loop = function ( i ) {\n    var change = event.changes[i];\n    change.origin = type;\n    if (filter && !filterChange(doc, change, false)) {\n      source.length = 0;\n      return {}\n    }\n\n    antiChanges.push(historyChangeFromChange(doc, change));\n\n    var after = i ? computeSelAfterChange(doc, change) : lst(source);\n    makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n    if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n    var rebased = [];\n\n    // Propagate to the linked documents\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n    });\n  };\n\n  for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n    var returned = loop( i$1 );\n\n    if ( returned ) return returned.v;\n  }\n}\n\n// Sub-views need their line numbers shifted when text is added\n// above or below them in the parent document.\nfunction shiftDoc(doc, distance) {\n  if (distance == 0) { return }\n  doc.first += distance;\n  doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n    Pos(range.anchor.line + distance, range.anchor.ch),\n    Pos(range.head.line + distance, range.head.ch)\n  ); }), doc.sel.primIndex);\n  if (doc.cm) {\n    regChange(doc.cm, doc.first, doc.first - distance, distance);\n    for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n      { regLineChange(doc.cm, l, \"gutter\"); }\n  }\n}\n\n// More lower-level change function, handling only a single document\n// (not linked ones).\nfunction makeChangeSingleDoc(doc, change, selAfter, spans) {\n  if (doc.cm && !doc.cm.curOp)\n    { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n  if (change.to.line < doc.first) {\n    shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n    return\n  }\n  if (change.from.line > doc.lastLine()) { return }\n\n  // Clip the change to the size of this doc\n  if (change.from.line < doc.first) {\n    var shift = change.text.length - 1 - (doc.first - change.from.line);\n    shiftDoc(doc, shift);\n    change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n              text: [lst(change.text)], origin: change.origin};\n  }\n  var last = doc.lastLine();\n  if (change.to.line > last) {\n    change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n              text: [change.text[0]], origin: change.origin};\n  }\n\n  change.removed = getBetween(doc, change.from, change.to);\n\n  if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n  if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n  else { updateDoc(doc, change, spans); }\n  setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n}\n\n// Handle the interaction of a change to a document with the editor\n// that this document is part of.\nfunction makeChangeSingleDocInEditor(cm, change, spans) {\n  var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n  var recomputeMaxLength = false, checkWidthStart = from.line;\n  if (!cm.options.lineWrapping) {\n    checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n    doc.iter(checkWidthStart, to.line + 1, function (line) {\n      if (line == display.maxLine) {\n        recomputeMaxLength = true;\n        return true\n      }\n    });\n  }\n\n  if (doc.sel.contains(change.from, change.to) > -1)\n    { signalCursorActivity(cm); }\n\n  updateDoc(doc, change, spans, estimateHeight(cm));\n\n  if (!cm.options.lineWrapping) {\n    doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n      var len = lineLength(line);\n      if (len > display.maxLineLength) {\n        display.maxLine = line;\n        display.maxLineLength = len;\n        display.maxLineChanged = true;\n        recomputeMaxLength = false;\n      }\n    });\n    if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n  }\n\n  retreatFrontier(doc, from.line);\n  startWorker(cm, 400);\n\n  var lendiff = change.text.length - (to.line - from.line) - 1;\n  // Remember that these lines changed, for updating the display\n  if (change.full)\n    { regChange(cm); }\n  else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n    { regLineChange(cm, from.line, \"text\"); }\n  else\n    { regChange(cm, from.line, to.line + 1, lendiff); }\n\n  var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n  if (changeHandler || changesHandler) {\n    var obj = {\n      from: from, to: to,\n      text: change.text,\n      removed: change.removed,\n      origin: change.origin\n    };\n    if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n    if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n  }\n  cm.display.selForContextMenu = null;\n}\n\nfunction replaceRange(doc, code, from, to, origin) {\n  if (!to) { to = from; }\n  if (cmp(to, from) < 0) { var assign;\n    (assign = [to, from], from = assign[0], to = assign[1], assign); }\n  if (typeof code == \"string\") { code = doc.splitLines(code); }\n  makeChange(doc, {from: from, to: to, text: code, origin: origin});\n}\n\n// Rebasing/resetting history to deal with externally-sourced changes\n\nfunction rebaseHistSelSingle(pos, from, to, diff) {\n  if (to < pos.line) {\n    pos.line += diff;\n  } else if (from < pos.line) {\n    pos.line = from;\n    pos.ch = 0;\n  }\n}\n\n// Tries to rebase an array of history events given a change in the\n// document. If the change touches the same lines as the event, the\n// event, and everything 'behind' it, is discarded. If the change is\n// before the event, the event's positions are updated. Uses a\n// copy-on-write scheme for the positions, to avoid having to\n// reallocate them all on every rebase, but also avoid problems with\n// shared position objects being unsafely updated.\nfunction rebaseHistArray(array, from, to, diff) {\n  for (var i = 0; i < array.length; ++i) {\n    var sub = array[i], ok = true;\n    if (sub.ranges) {\n      if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n      for (var j = 0; j < sub.ranges.length; j++) {\n        rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n        rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n      }\n      continue\n    }\n    for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n      var cur = sub.changes[j$1];\n      if (to < cur.from.line) {\n        cur.from = Pos(cur.from.line + diff, cur.from.ch);\n        cur.to = Pos(cur.to.line + diff, cur.to.ch);\n      } else if (from <= cur.to.line) {\n        ok = false;\n        break\n      }\n    }\n    if (!ok) {\n      array.splice(0, i + 1);\n      i = 0;\n    }\n  }\n}\n\nfunction rebaseHist(hist, change) {\n  var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n  rebaseHistArray(hist.done, from, to, diff);\n  rebaseHistArray(hist.undone, from, to, diff);\n}\n\n// Utility for applying a change to a line by handle or number,\n// returning the number and optionally registering the line as\n// changed.\nfunction changeLine(doc, handle, changeType, op) {\n  var no = handle, line = handle;\n  if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n  else { no = lineNo(handle); }\n  if (no == null) { return null }\n  if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n  return line\n}\n\n// The document is represented as a BTree consisting of leaves, with\n// chunk of lines in them, and branches, with up to ten leaves or\n// other branch nodes below them. The top node is always a branch\n// node, and is the document object itself (meaning it has\n// additional methods and properties).\n//\n// All nodes have parent links. The tree is used both to go from\n// line numbers to line objects, and to go from objects to numbers.\n// It also indexes by height, and is used to convert between height\n// and line object, and to find the total height of the document.\n//\n// See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\nfunction LeafChunk(lines) {\n  var this$1 = this;\n\n  this.lines = lines;\n  this.parent = null;\n  var height = 0;\n  for (var i = 0; i < lines.length; ++i) {\n    lines[i].parent = this$1;\n    height += lines[i].height;\n  }\n  this.height = height;\n}\n\nLeafChunk.prototype = {\n  chunkSize: function chunkSize() { return this.lines.length },\n\n  // Remove the n lines at offset 'at'.\n  removeInner: function removeInner(at, n) {\n    var this$1 = this;\n\n    for (var i = at, e = at + n; i < e; ++i) {\n      var line = this$1.lines[i];\n      this$1.height -= line.height;\n      cleanUpLine(line);\n      signalLater(line, \"delete\");\n    }\n    this.lines.splice(at, n);\n  },\n\n  // Helper used to collapse a small branch into a single leaf.\n  collapse: function collapse(lines) {\n    lines.push.apply(lines, this.lines);\n  },\n\n  // Insert the given array of lines at offset 'at', count them as\n  // having the given height.\n  insertInner: function insertInner(at, lines, height) {\n    var this$1 = this;\n\n    this.height += height;\n    this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n    for (var i = 0; i < lines.length; ++i) { lines[i].parent = this$1; }\n  },\n\n  // Used to iterate over a part of the tree.\n  iterN: function iterN(at, n, op) {\n    var this$1 = this;\n\n    for (var e = at + n; at < e; ++at)\n      { if (op(this$1.lines[at])) { return true } }\n  }\n};\n\nfunction BranchChunk(children) {\n  var this$1 = this;\n\n  this.children = children;\n  var size = 0, height = 0;\n  for (var i = 0; i < children.length; ++i) {\n    var ch = children[i];\n    size += ch.chunkSize(); height += ch.height;\n    ch.parent = this$1;\n  }\n  this.size = size;\n  this.height = height;\n  this.parent = null;\n}\n\nBranchChunk.prototype = {\n  chunkSize: function chunkSize() { return this.size },\n\n  removeInner: function removeInner(at, n) {\n    var this$1 = this;\n\n    this.size -= n;\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this$1.children[i], sz = child.chunkSize();\n      if (at < sz) {\n        var rm = Math.min(n, sz - at), oldHeight = child.height;\n        child.removeInner(at, rm);\n        this$1.height -= oldHeight - child.height;\n        if (sz == rm) { this$1.children.splice(i--, 1); child.parent = null; }\n        if ((n -= rm) == 0) { break }\n        at = 0;\n      } else { at -= sz; }\n    }\n    // If the result is smaller than 25 lines, ensure that it is a\n    // single leaf node.\n    if (this.size - n < 25 &&\n        (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n      var lines = [];\n      this.collapse(lines);\n      this.children = [new LeafChunk(lines)];\n      this.children[0].parent = this;\n    }\n  },\n\n  collapse: function collapse(lines) {\n    var this$1 = this;\n\n    for (var i = 0; i < this.children.length; ++i) { this$1.children[i].collapse(lines); }\n  },\n\n  insertInner: function insertInner(at, lines, height) {\n    var this$1 = this;\n\n    this.size += lines.length;\n    this.height += height;\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this$1.children[i], sz = child.chunkSize();\n      if (at <= sz) {\n        child.insertInner(at, lines, height);\n        if (child.lines && child.lines.length > 50) {\n          // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n          // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n          var remaining = child.lines.length % 25 + 25;\n          for (var pos = remaining; pos < child.lines.length;) {\n            var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n            child.height -= leaf.height;\n            this$1.children.splice(++i, 0, leaf);\n            leaf.parent = this$1;\n          }\n          child.lines = child.lines.slice(0, remaining);\n          this$1.maybeSpill();\n        }\n        break\n      }\n      at -= sz;\n    }\n  },\n\n  // When a node has grown, check whether it should be split.\n  maybeSpill: function maybeSpill() {\n    if (this.children.length <= 10) { return }\n    var me = this;\n    do {\n      var spilled = me.children.splice(me.children.length - 5, 5);\n      var sibling = new BranchChunk(spilled);\n      if (!me.parent) { // Become the parent node\n        var copy = new BranchChunk(me.children);\n        copy.parent = me;\n        me.children = [copy, sibling];\n        me = copy;\n     } else {\n        me.size -= sibling.size;\n        me.height -= sibling.height;\n        var myIndex = indexOf(me.parent.children, me);\n        me.parent.children.splice(myIndex + 1, 0, sibling);\n      }\n      sibling.parent = me.parent;\n    } while (me.children.length > 10)\n    me.parent.maybeSpill();\n  },\n\n  iterN: function iterN(at, n, op) {\n    var this$1 = this;\n\n    for (var i = 0; i < this.children.length; ++i) {\n      var child = this$1.children[i], sz = child.chunkSize();\n      if (at < sz) {\n        var used = Math.min(n, sz - at);\n        if (child.iterN(at, used, op)) { return true }\n        if ((n -= used) == 0) { break }\n        at = 0;\n      } else { at -= sz; }\n    }\n  }\n};\n\n// Line widgets are block elements displayed above or below a line.\n\nvar LineWidget = function(doc, node, options) {\n  var this$1 = this;\n\n  if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n    { this$1[opt] = options[opt]; } } }\n  this.doc = doc;\n  this.node = node;\n};\n\nLineWidget.prototype.clear = function () {\n    var this$1 = this;\n\n  var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n  if (no == null || !ws) { return }\n  for (var i = 0; i < ws.length; ++i) { if (ws[i] == this$1) { ws.splice(i--, 1); } }\n  if (!ws.length) { line.widgets = null; }\n  var height = widgetHeight(this);\n  updateLineHeight(line, Math.max(0, line.height - height));\n  if (cm) {\n    runInOp(cm, function () {\n      adjustScrollWhenAboveVisible(cm, line, -height);\n      regLineChange(cm, no, \"widget\");\n    });\n    signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n  }\n};\n\nLineWidget.prototype.changed = function () {\n    var this$1 = this;\n\n  var oldH = this.height, cm = this.doc.cm, line = this.line;\n  this.height = null;\n  var diff = widgetHeight(this) - oldH;\n  if (!diff) { return }\n  updateLineHeight(line, line.height + diff);\n  if (cm) {\n    runInOp(cm, function () {\n      cm.curOp.forceUpdate = true;\n      adjustScrollWhenAboveVisible(cm, line, diff);\n      signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n    });\n  }\n};\neventMixin(LineWidget);\n\nfunction adjustScrollWhenAboveVisible(cm, line, diff) {\n  if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n    { addToScrollTop(cm, diff); }\n}\n\nfunction addLineWidget(doc, handle, node, options) {\n  var widget = new LineWidget(doc, node, options);\n  var cm = doc.cm;\n  if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n  changeLine(doc, handle, \"widget\", function (line) {\n    var widgets = line.widgets || (line.widgets = []);\n    if (widget.insertAt == null) { widgets.push(widget); }\n    else { widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget); }\n    widget.line = line;\n    if (cm && !lineIsHidden(doc, line)) {\n      var aboveVisible = heightAtLine(line) < doc.scrollTop;\n      updateLineHeight(line, line.height + widgetHeight(widget));\n      if (aboveVisible) { addToScrollTop(cm, widget.height); }\n      cm.curOp.forceUpdate = true;\n    }\n    return true\n  });\n  if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n  return widget\n}\n\n// TEXTMARKERS\n\n// Created with markText and setBookmark methods. A TextMarker is a\n// handle that can be used to clear or find a marked position in the\n// document. Line objects hold arrays (markedSpans) containing\n// {from, to, marker} object pointing to such marker objects, and\n// indicating that such a marker is present on that line. Multiple\n// lines may point to the same marker when it spans across lines.\n// The spans will have null for their from/to properties when the\n// marker continues beyond the start/end of the line. Markers have\n// links back to the lines they currently touch.\n\n// Collapsed markers have unique ids, in order to be able to order\n// them, which is needed for uniquely determining an outer marker\n// when they overlap (they may nest, but not partially overlap).\nvar nextMarkerId = 0;\n\nvar TextMarker = function(doc, type) {\n  this.lines = [];\n  this.type = type;\n  this.doc = doc;\n  this.id = ++nextMarkerId;\n};\n\n// Clear the marker.\nTextMarker.prototype.clear = function () {\n    var this$1 = this;\n\n  if (this.explicitlyCleared) { return }\n  var cm = this.doc.cm, withOp = cm && !cm.curOp;\n  if (withOp) { startOperation(cm); }\n  if (hasHandler(this, \"clear\")) {\n    var found = this.find();\n    if (found) { signalLater(this, \"clear\", found.from, found.to); }\n  }\n  var min = null, max = null;\n  for (var i = 0; i < this.lines.length; ++i) {\n    var line = this$1.lines[i];\n    var span = getMarkedSpanFor(line.markedSpans, this$1);\n    if (cm && !this$1.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n    else if (cm) {\n      if (span.to != null) { max = lineNo(line); }\n      if (span.from != null) { min = lineNo(line); }\n    }\n    line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n    if (span.from == null && this$1.collapsed && !lineIsHidden(this$1.doc, line) && cm)\n      { updateLineHeight(line, textHeight(cm.display)); }\n  }\n  if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n    var visual = visualLine(this$1.lines[i$1]), len = lineLength(visual);\n    if (len > cm.display.maxLineLength) {\n      cm.display.maxLine = visual;\n      cm.display.maxLineLength = len;\n      cm.display.maxLineChanged = true;\n    }\n  } }\n\n  if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n  this.lines.length = 0;\n  this.explicitlyCleared = true;\n  if (this.atomic && this.doc.cantEdit) {\n    this.doc.cantEdit = false;\n    if (cm) { reCheckSelection(cm.doc); }\n  }\n  if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n  if (withOp) { endOperation(cm); }\n  if (this.parent) { this.parent.clear(); }\n};\n\n// Find the position of the marker in the document. Returns a {from,\n// to} object by default. Side can be passed to get a specific side\n// -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n// Pos objects returned contain a line object, rather than a line\n// number (used to prevent looking up the same line twice).\nTextMarker.prototype.find = function (side, lineObj) {\n    var this$1 = this;\n\n  if (side == null && this.type == \"bookmark\") { side = 1; }\n  var from, to;\n  for (var i = 0; i < this.lines.length; ++i) {\n    var line = this$1.lines[i];\n    var span = getMarkedSpanFor(line.markedSpans, this$1);\n    if (span.from != null) {\n      from = Pos(lineObj ? line : lineNo(line), span.from);\n      if (side == -1) { return from }\n    }\n    if (span.to != null) {\n      to = Pos(lineObj ? line : lineNo(line), span.to);\n      if (side == 1) { return to }\n    }\n  }\n  return from && {from: from, to: to}\n};\n\n// Signals that the marker's widget changed, and surrounding layout\n// should be recomputed.\nTextMarker.prototype.changed = function () {\n    var this$1 = this;\n\n  var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n  if (!pos || !cm) { return }\n  runInOp(cm, function () {\n    var line = pos.line, lineN = lineNo(pos.line);\n    var view = findViewForLine(cm, lineN);\n    if (view) {\n      clearLineMeasurementCacheFor(view);\n      cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n    }\n    cm.curOp.updateMaxLine = true;\n    if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n      var oldHeight = widget.height;\n      widget.height = null;\n      var dHeight = widgetHeight(widget) - oldHeight;\n      if (dHeight)\n        { updateLineHeight(line, line.height + dHeight); }\n    }\n    signalLater(cm, \"markerChanged\", cm, this$1);\n  });\n};\n\nTextMarker.prototype.attachLine = function (line) {\n  if (!this.lines.length && this.doc.cm) {\n    var op = this.doc.cm.curOp;\n    if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n      { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n  }\n  this.lines.push(line);\n};\n\nTextMarker.prototype.detachLine = function (line) {\n  this.lines.splice(indexOf(this.lines, line), 1);\n  if (!this.lines.length && this.doc.cm) {\n    var op = this.doc.cm.curOp;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n  }\n};\neventMixin(TextMarker);\n\n// Create a marker, wire it up to the right lines, and\nfunction markText(doc, from, to, options, type) {\n  // Shared markers (across linked documents) are handled separately\n  // (markTextShared will call out to this again, once per\n  // document).\n  if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n  // Ensure we are in an operation.\n  if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n  var marker = new TextMarker(doc, type), diff = cmp(from, to);\n  if (options) { copyObj(options, marker, false); }\n  // Don't connect empty markers unless clearWhenEmpty is false\n  if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n    { return marker }\n  if (marker.replacedWith) {\n    // Showing up as a widget implies collapsed (widget replaces text)\n    marker.collapsed = true;\n    marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n    if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n    if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n  }\n  if (marker.collapsed) {\n    if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n        from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n      { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n    seeCollapsedSpans();\n  }\n\n  if (marker.addToHistory)\n    { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n  var curLine = from.line, cm = doc.cm, updateMaxLine;\n  doc.iter(curLine, to.line + 1, function (line) {\n    if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n      { updateMaxLine = true; }\n    if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n    addMarkedSpan(line, new MarkedSpan(marker,\n                                       curLine == from.line ? from.ch : null,\n                                       curLine == to.line ? to.ch : null));\n    ++curLine;\n  });\n  // lineIsHidden depends on the presence of the spans, so needs a second pass\n  if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n    if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n  }); }\n\n  if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n  if (marker.readOnly) {\n    seeReadOnlySpans();\n    if (doc.history.done.length || doc.history.undone.length)\n      { doc.clearHistory(); }\n  }\n  if (marker.collapsed) {\n    marker.id = ++nextMarkerId;\n    marker.atomic = true;\n  }\n  if (cm) {\n    // Sync editor state\n    if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n    if (marker.collapsed)\n      { regChange(cm, from.line, to.line + 1); }\n    else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css)\n      { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n    if (marker.atomic) { reCheckSelection(cm.doc); }\n    signalLater(cm, \"markerAdded\", cm, marker);\n  }\n  return marker\n}\n\n// SHARED TEXTMARKERS\n\n// A shared marker spans multiple linked documents. It is\n// implemented as a meta-marker-object controlling multiple normal\n// markers.\nvar SharedTextMarker = function(markers, primary) {\n  var this$1 = this;\n\n  this.markers = markers;\n  this.primary = primary;\n  for (var i = 0; i < markers.length; ++i)\n    { markers[i].parent = this$1; }\n};\n\nSharedTextMarker.prototype.clear = function () {\n    var this$1 = this;\n\n  if (this.explicitlyCleared) { return }\n  this.explicitlyCleared = true;\n  for (var i = 0; i < this.markers.length; ++i)\n    { this$1.markers[i].clear(); }\n  signalLater(this, \"clear\");\n};\n\nSharedTextMarker.prototype.find = function (side, lineObj) {\n  return this.primary.find(side, lineObj)\n};\neventMixin(SharedTextMarker);\n\nfunction markTextShared(doc, from, to, options, type) {\n  options = copyObj(options);\n  options.shared = false;\n  var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n  var widget = options.widgetNode;\n  linkedDocs(doc, function (doc) {\n    if (widget) { options.widgetNode = widget.cloneNode(true); }\n    markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n    for (var i = 0; i < doc.linked.length; ++i)\n      { if (doc.linked[i].isParent) { return } }\n    primary = lst(markers);\n  });\n  return new SharedTextMarker(markers, primary)\n}\n\nfunction findSharedMarkers(doc) {\n  return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n}\n\nfunction copySharedMarkers(doc, markers) {\n  for (var i = 0; i < markers.length; i++) {\n    var marker = markers[i], pos = marker.find();\n    var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n    if (cmp(mFrom, mTo)) {\n      var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n      marker.markers.push(subMark);\n      subMark.parent = marker;\n    }\n  }\n}\n\nfunction detachSharedMarkers(markers) {\n  var loop = function ( i ) {\n    var marker = markers[i], linked = [marker.primary.doc];\n    linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n    for (var j = 0; j < marker.markers.length; j++) {\n      var subMarker = marker.markers[j];\n      if (indexOf(linked, subMarker.doc) == -1) {\n        subMarker.parent = null;\n        marker.markers.splice(j--, 1);\n      }\n    }\n  };\n\n  for (var i = 0; i < markers.length; i++) loop( i );\n}\n\nvar nextDocId = 0;\nvar Doc = function(text, mode, firstLine, lineSep, direction) {\n  if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n  if (firstLine == null) { firstLine = 0; }\n\n  BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n  this.first = firstLine;\n  this.scrollTop = this.scrollLeft = 0;\n  this.cantEdit = false;\n  this.cleanGeneration = 1;\n  this.modeFrontier = this.highlightFrontier = firstLine;\n  var start = Pos(firstLine, 0);\n  this.sel = simpleSelection(start);\n  this.history = new History(null);\n  this.id = ++nextDocId;\n  this.modeOption = mode;\n  this.lineSep = lineSep;\n  this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n  this.extend = false;\n\n  if (typeof text == \"string\") { text = this.splitLines(text); }\n  updateDoc(this, {from: start, to: start, text: text});\n  setSelection(this, simpleSelection(start), sel_dontScroll);\n};\n\nDoc.prototype = createObj(BranchChunk.prototype, {\n  constructor: Doc,\n  // Iterate over the document. Supports two forms -- with only one\n  // argument, it calls that for each line in the document. With\n  // three, it iterates over the range given by the first two (with\n  // the second being non-inclusive).\n  iter: function(from, to, op) {\n    if (op) { this.iterN(from - this.first, to - from, op); }\n    else { this.iterN(this.first, this.first + this.size, from); }\n  },\n\n  // Non-public interface for adding and removing lines.\n  insert: function(at, lines) {\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n    this.insertInner(at - this.first, lines, height);\n  },\n  remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n  // From here, the methods are part of the public interface. Most\n  // are also available from CodeMirror (editor) instances.\n\n  getValue: function(lineSep) {\n    var lines = getLines(this, this.first, this.first + this.size);\n    if (lineSep === false) { return lines }\n    return lines.join(lineSep || this.lineSeparator())\n  },\n  setValue: docMethodOp(function(code) {\n    var top = Pos(this.first, 0), last = this.first + this.size - 1;\n    makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                      text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n    if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n    setSelection(this, simpleSelection(top), sel_dontScroll);\n  }),\n  replaceRange: function(code, from, to, origin) {\n    from = clipPos(this, from);\n    to = to ? clipPos(this, to) : from;\n    replaceRange(this, code, from, to, origin);\n  },\n  getRange: function(from, to, lineSep) {\n    var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n    if (lineSep === false) { return lines }\n    return lines.join(lineSep || this.lineSeparator())\n  },\n\n  getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n  getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n  getLineNumber: function(line) {return lineNo(line)},\n\n  getLineHandleVisualStart: function(line) {\n    if (typeof line == \"number\") { line = getLine(this, line); }\n    return visualLine(line)\n  },\n\n  lineCount: function() {return this.size},\n  firstLine: function() {return this.first},\n  lastLine: function() {return this.first + this.size - 1},\n\n  clipPos: function(pos) {return clipPos(this, pos)},\n\n  getCursor: function(start) {\n    var range$$1 = this.sel.primary(), pos;\n    if (start == null || start == \"head\") { pos = range$$1.head; }\n    else if (start == \"anchor\") { pos = range$$1.anchor; }\n    else if (start == \"end\" || start == \"to\" || start === false) { pos = range$$1.to(); }\n    else { pos = range$$1.from(); }\n    return pos\n  },\n  listSelections: function() { return this.sel.ranges },\n  somethingSelected: function() {return this.sel.somethingSelected()},\n\n  setCursor: docMethodOp(function(line, ch, options) {\n    setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n  }),\n  setSelection: docMethodOp(function(anchor, head, options) {\n    setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n  }),\n  extendSelection: docMethodOp(function(head, other, options) {\n    extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n  }),\n  extendSelections: docMethodOp(function(heads, options) {\n    extendSelections(this, clipPosArray(this, heads), options);\n  }),\n  extendSelectionsBy: docMethodOp(function(f, options) {\n    var heads = map(this.sel.ranges, f);\n    extendSelections(this, clipPosArray(this, heads), options);\n  }),\n  setSelections: docMethodOp(function(ranges, primary, options) {\n    var this$1 = this;\n\n    if (!ranges.length) { return }\n    var out = [];\n    for (var i = 0; i < ranges.length; i++)\n      { out[i] = new Range(clipPos(this$1, ranges[i].anchor),\n                         clipPos(this$1, ranges[i].head)); }\n    if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n    setSelection(this, normalizeSelection(out, primary), options);\n  }),\n  addSelection: docMethodOp(function(anchor, head, options) {\n    var ranges = this.sel.ranges.slice(0);\n    ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n    setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);\n  }),\n\n  getSelection: function(lineSep) {\n    var this$1 = this;\n\n    var ranges = this.sel.ranges, lines;\n    for (var i = 0; i < ranges.length; i++) {\n      var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n      lines = lines ? lines.concat(sel) : sel;\n    }\n    if (lineSep === false) { return lines }\n    else { return lines.join(lineSep || this.lineSeparator()) }\n  },\n  getSelections: function(lineSep) {\n    var this$1 = this;\n\n    var parts = [], ranges = this.sel.ranges;\n    for (var i = 0; i < ranges.length; i++) {\n      var sel = getBetween(this$1, ranges[i].from(), ranges[i].to());\n      if (lineSep !== false) { sel = sel.join(lineSep || this$1.lineSeparator()); }\n      parts[i] = sel;\n    }\n    return parts\n  },\n  replaceSelection: function(code, collapse, origin) {\n    var dup = [];\n    for (var i = 0; i < this.sel.ranges.length; i++)\n      { dup[i] = code; }\n    this.replaceSelections(dup, collapse, origin || \"+input\");\n  },\n  replaceSelections: docMethodOp(function(code, collapse, origin) {\n    var this$1 = this;\n\n    var changes = [], sel = this.sel;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range$$1 = sel.ranges[i];\n      changes[i] = {from: range$$1.from(), to: range$$1.to(), text: this$1.splitLines(code[i]), origin: origin};\n    }\n    var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n    for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n      { makeChange(this$1, changes[i$1]); }\n    if (newSel) { setSelectionReplaceHistory(this, newSel); }\n    else if (this.cm) { ensureCursorVisible(this.cm); }\n  }),\n  undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n  redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n  undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n  redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n  setExtending: function(val) {this.extend = val;},\n  getExtending: function() {return this.extend},\n\n  historySize: function() {\n    var hist = this.history, done = 0, undone = 0;\n    for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n    for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n    return {undo: done, redo: undone}\n  },\n  clearHistory: function() {this.history = new History(this.history.maxGeneration);},\n\n  markClean: function() {\n    this.cleanGeneration = this.changeGeneration(true);\n  },\n  changeGeneration: function(forceSplit) {\n    if (forceSplit)\n      { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n    return this.history.generation\n  },\n  isClean: function (gen) {\n    return this.history.generation == (gen || this.cleanGeneration)\n  },\n\n  getHistory: function() {\n    return {done: copyHistoryArray(this.history.done),\n            undone: copyHistoryArray(this.history.undone)}\n  },\n  setHistory: function(histData) {\n    var hist = this.history = new History(this.history.maxGeneration);\n    hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n    hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n  },\n\n  setGutterMarker: docMethodOp(function(line, gutterID, value) {\n    return changeLine(this, line, \"gutter\", function (line) {\n      var markers = line.gutterMarkers || (line.gutterMarkers = {});\n      markers[gutterID] = value;\n      if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n      return true\n    })\n  }),\n\n  clearGutter: docMethodOp(function(gutterID) {\n    var this$1 = this;\n\n    this.iter(function (line) {\n      if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n        changeLine(this$1, line, \"gutter\", function () {\n          line.gutterMarkers[gutterID] = null;\n          if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n          return true\n        });\n      }\n    });\n  }),\n\n  lineInfo: function(line) {\n    var n;\n    if (typeof line == \"number\") {\n      if (!isLine(this, line)) { return null }\n      n = line;\n      line = getLine(this, line);\n      if (!line) { return null }\n    } else {\n      n = lineNo(line);\n      if (n == null) { return null }\n    }\n    return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n            textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n            widgets: line.widgets}\n  },\n\n  addLineClass: docMethodOp(function(handle, where, cls) {\n    return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n      var prop = where == \"text\" ? \"textClass\"\n               : where == \"background\" ? \"bgClass\"\n               : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n      if (!line[prop]) { line[prop] = cls; }\n      else if (classTest(cls).test(line[prop])) { return false }\n      else { line[prop] += \" \" + cls; }\n      return true\n    })\n  }),\n  removeLineClass: docMethodOp(function(handle, where, cls) {\n    return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n      var prop = where == \"text\" ? \"textClass\"\n               : where == \"background\" ? \"bgClass\"\n               : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n      var cur = line[prop];\n      if (!cur) { return false }\n      else if (cls == null) { line[prop] = null; }\n      else {\n        var found = cur.match(classTest(cls));\n        if (!found) { return false }\n        var end = found.index + found[0].length;\n        line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n      }\n      return true\n    })\n  }),\n\n  addLineWidget: docMethodOp(function(handle, node, options) {\n    return addLineWidget(this, handle, node, options)\n  }),\n  removeLineWidget: function(widget) { widget.clear(); },\n\n  markText: function(from, to, options) {\n    return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n  },\n  setBookmark: function(pos, options) {\n    var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                    insertLeft: options && options.insertLeft,\n                    clearWhenEmpty: false, shared: options && options.shared,\n                    handleMouseEvents: options && options.handleMouseEvents};\n    pos = clipPos(this, pos);\n    return markText(this, pos, pos, realOpts, \"bookmark\")\n  },\n  findMarksAt: function(pos) {\n    pos = clipPos(this, pos);\n    var markers = [], spans = getLine(this, pos.line).markedSpans;\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if ((span.from == null || span.from <= pos.ch) &&\n          (span.to == null || span.to >= pos.ch))\n        { markers.push(span.marker.parent || span.marker); }\n    } }\n    return markers\n  },\n  findMarks: function(from, to, filter) {\n    from = clipPos(this, from); to = clipPos(this, to);\n    var found = [], lineNo$$1 = from.line;\n    this.iter(from.line, to.line + 1, function (line) {\n      var spans = line.markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; i++) {\n        var span = spans[i];\n        if (!(span.to != null && lineNo$$1 == from.line && from.ch >= span.to ||\n              span.from == null && lineNo$$1 != from.line ||\n              span.from != null && lineNo$$1 == to.line && span.from >= to.ch) &&\n            (!filter || filter(span.marker)))\n          { found.push(span.marker.parent || span.marker); }\n      } }\n      ++lineNo$$1;\n    });\n    return found\n  },\n  getAllMarks: function() {\n    var markers = [];\n    this.iter(function (line) {\n      var sps = line.markedSpans;\n      if (sps) { for (var i = 0; i < sps.length; ++i)\n        { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n    });\n    return markers\n  },\n\n  posFromIndex: function(off) {\n    var ch, lineNo$$1 = this.first, sepSize = this.lineSeparator().length;\n    this.iter(function (line) {\n      var sz = line.text.length + sepSize;\n      if (sz > off) { ch = off; return true }\n      off -= sz;\n      ++lineNo$$1;\n    });\n    return clipPos(this, Pos(lineNo$$1, ch))\n  },\n  indexFromPos: function (coords) {\n    coords = clipPos(this, coords);\n    var index = coords.ch;\n    if (coords.line < this.first || coords.ch < 0) { return 0 }\n    var sepSize = this.lineSeparator().length;\n    this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n      index += line.text.length + sepSize;\n    });\n    return index\n  },\n\n  copy: function(copyHistory) {\n    var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                      this.modeOption, this.first, this.lineSep, this.direction);\n    doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n    doc.sel = this.sel;\n    doc.extend = false;\n    if (copyHistory) {\n      doc.history.undoDepth = this.history.undoDepth;\n      doc.setHistory(this.getHistory());\n    }\n    return doc\n  },\n\n  linkedDoc: function(options) {\n    if (!options) { options = {}; }\n    var from = this.first, to = this.first + this.size;\n    if (options.from != null && options.from > from) { from = options.from; }\n    if (options.to != null && options.to < to) { to = options.to; }\n    var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n    if (options.sharedHist) { copy.history = this.history\n    ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n    copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n    copySharedMarkers(copy, findSharedMarkers(this));\n    return copy\n  },\n  unlinkDoc: function(other) {\n    var this$1 = this;\n\n    if (other instanceof CodeMirror$1) { other = other.doc; }\n    if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n      var link = this$1.linked[i];\n      if (link.doc != other) { continue }\n      this$1.linked.splice(i, 1);\n      other.unlinkDoc(this$1);\n      detachSharedMarkers(findSharedMarkers(this$1));\n      break\n    } }\n    // If the histories were shared, split them again\n    if (other.history == this.history) {\n      var splitIds = [other.id];\n      linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n      other.history = new History(null);\n      other.history.done = copyHistoryArray(this.history.done, splitIds);\n      other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n    }\n  },\n  iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n  getMode: function() {return this.mode},\n  getEditor: function() {return this.cm},\n\n  splitLines: function(str) {\n    if (this.lineSep) { return str.split(this.lineSep) }\n    return splitLinesAuto(str)\n  },\n  lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n  setDirection: docMethodOp(function (dir) {\n    if (dir != \"rtl\") { dir = \"ltr\"; }\n    if (dir == this.direction) { return }\n    this.direction = dir;\n    this.iter(function (line) { return line.order = null; });\n    if (this.cm) { directionChanged(this.cm); }\n  })\n});\n\n// Public alias.\nDoc.prototype.eachLine = Doc.prototype.iter;\n\n// Kludge to work around strange IE behavior where it'll sometimes\n// re-fire a series of drag-related events right after the drop (#1551)\nvar lastDrop = 0;\n\nfunction onDrop(e) {\n  var cm = this;\n  clearDragCursor(cm);\n  if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n    { return }\n  e_preventDefault(e);\n  if (ie) { lastDrop = +new Date; }\n  var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n  if (!pos || cm.isReadOnly()) { return }\n  // Might be a file drop, in which case we simply extract the text\n  // and insert it.\n  if (files && files.length && window.FileReader && window.File) {\n    var n = files.length, text = Array(n), read = 0;\n    var loadFile = function (file, i) {\n      if (cm.options.allowDropFileTypes &&\n          indexOf(cm.options.allowDropFileTypes, file.type) == -1)\n        { return }\n\n      var reader = new FileReader;\n      reader.onload = operation(cm, function () {\n        var content = reader.result;\n        if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) { content = \"\"; }\n        text[i] = content;\n        if (++read == n) {\n          pos = clipPos(cm.doc, pos);\n          var change = {from: pos, to: pos,\n                        text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n                        origin: \"paste\"};\n          makeChange(cm.doc, change);\n          setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n        }\n      });\n      reader.readAsText(file);\n    };\n    for (var i = 0; i < n; ++i) { loadFile(files[i], i); }\n  } else { // Normal drop\n    // Don't do a replace if the drop happened inside of the selected text.\n    if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n      cm.state.draggingText(e);\n      // Ensure the editor is re-focused\n      setTimeout(function () { return cm.display.input.focus(); }, 20);\n      return\n    }\n    try {\n      var text$1 = e.dataTransfer.getData(\"Text\");\n      if (text$1) {\n        var selected;\n        if (cm.state.draggingText && !cm.state.draggingText.copy)\n          { selected = cm.listSelections(); }\n        setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n        if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n          { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n        cm.replaceSelection(text$1, \"around\", \"paste\");\n        cm.display.input.focus();\n      }\n    }\n    catch(e){}\n  }\n}\n\nfunction onDragStart(cm, e) {\n  if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n  if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n  e.dataTransfer.setData(\"Text\", cm.getSelection());\n  e.dataTransfer.effectAllowed = \"copyMove\";\n\n  // Use dummy image instead of default browsers image.\n  // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n  if (e.dataTransfer.setDragImage && !safari) {\n    var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n    img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n    if (presto) {\n      img.width = img.height = 1;\n      cm.display.wrapper.appendChild(img);\n      // Force a relayout, or Opera won't use our image for some obscure reason\n      img._top = img.offsetTop;\n    }\n    e.dataTransfer.setDragImage(img, 0, 0);\n    if (presto) { img.parentNode.removeChild(img); }\n  }\n}\n\nfunction onDragOver(cm, e) {\n  var pos = posFromMouse(cm, e);\n  if (!pos) { return }\n  var frag = document.createDocumentFragment();\n  drawSelectionCursor(cm, pos, frag);\n  if (!cm.display.dragCursor) {\n    cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n    cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n  }\n  removeChildrenAndAdd(cm.display.dragCursor, frag);\n}\n\nfunction clearDragCursor(cm) {\n  if (cm.display.dragCursor) {\n    cm.display.lineSpace.removeChild(cm.display.dragCursor);\n    cm.display.dragCursor = null;\n  }\n}\n\n// These must be handled carefully, because naively registering a\n// handler for each editor will cause the editors to never be\n// garbage collected.\n\nfunction forEachCodeMirror(f) {\n  if (!document.getElementsByClassName) { return }\n  var byClass = document.getElementsByClassName(\"CodeMirror\");\n  for (var i = 0; i < byClass.length; i++) {\n    var cm = byClass[i].CodeMirror;\n    if (cm) { f(cm); }\n  }\n}\n\nvar globalsRegistered = false;\nfunction ensureGlobalHandlers() {\n  if (globalsRegistered) { return }\n  registerGlobalHandlers();\n  globalsRegistered = true;\n}\nfunction registerGlobalHandlers() {\n  // When the window resizes, we need to refresh active editors.\n  var resizeTimer;\n  on(window, \"resize\", function () {\n    if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n      resizeTimer = null;\n      forEachCodeMirror(onResize);\n    }, 100); }\n  });\n  // When the window loses focus, we want to show the editor as blurred\n  on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n}\n// Called when the window resizes\nfunction onResize(cm) {\n  var d = cm.display;\n  if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth)\n    { return }\n  // Might be a text scaling operation, clear size caches.\n  d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n  d.scrollbarsClipped = false;\n  cm.setSize();\n}\n\nvar keyNames = {\n  3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n  19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n  36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n  46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n  106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 127: \"Delete\", 145: \"ScrollLock\",\n  173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n  221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n  63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n};\n\n// Number keys\nfor (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n// Alphabetic keys\nfor (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n// Function keys\nfor (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\nvar keyMap = {};\n\nkeyMap.basic = {\n  \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n  \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n  \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n  \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n  \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n  \"Esc\": \"singleSelection\"\n};\n// Note that the save and find-related commands aren't defined by\n// default. User code or addons can define them. Unknown commands\n// are simply ignored.\nkeyMap.pcDefault = {\n  \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n  \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n  \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n  \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n  \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n  \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n  \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n  fallthrough: \"basic\"\n};\n// Very basic readline/emacs-style bindings, which are standard on Mac.\nkeyMap.emacsy = {\n  \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n  \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n  \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n  \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n  \"Ctrl-O\": \"openLine\"\n};\nkeyMap.macDefault = {\n  \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n  \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n  \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n  \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n  \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n  \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n  \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n  fallthrough: [\"basic\", \"emacsy\"]\n};\nkeyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n// KEYMAP DISPATCH\n\nfunction normalizeKeyName(name) {\n  var parts = name.split(/-(?!$)/);\n  name = parts[parts.length - 1];\n  var alt, ctrl, shift, cmd;\n  for (var i = 0; i < parts.length - 1; i++) {\n    var mod = parts[i];\n    if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n    else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n    else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n    else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n    else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n  }\n  if (alt) { name = \"Alt-\" + name; }\n  if (ctrl) { name = \"Ctrl-\" + name; }\n  if (cmd) { name = \"Cmd-\" + name; }\n  if (shift) { name = \"Shift-\" + name; }\n  return name\n}\n\n// This is a kludge to keep keymaps mostly working as raw objects\n// (backwards compatibility) while at the same time support features\n// like normalization and multi-stroke key bindings. It compiles a\n// new normalized keymap, and then updates the old object to reflect\n// this.\nfunction normalizeKeyMap(keymap) {\n  var copy = {};\n  for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n    var value = keymap[keyname];\n    if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n    if (value == \"...\") { delete keymap[keyname]; continue }\n\n    var keys = map(keyname.split(\" \"), normalizeKeyName);\n    for (var i = 0; i < keys.length; i++) {\n      var val = (void 0), name = (void 0);\n      if (i == keys.length - 1) {\n        name = keys.join(\" \");\n        val = value;\n      } else {\n        name = keys.slice(0, i + 1).join(\" \");\n        val = \"...\";\n      }\n      var prev = copy[name];\n      if (!prev) { copy[name] = val; }\n      else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n    }\n    delete keymap[keyname];\n  } }\n  for (var prop in copy) { keymap[prop] = copy[prop]; }\n  return keymap\n}\n\nfunction lookupKey(key, map$$1, handle, context) {\n  map$$1 = getKeyMap(map$$1);\n  var found = map$$1.call ? map$$1.call(key, context) : map$$1[key];\n  if (found === false) { return \"nothing\" }\n  if (found === \"...\") { return \"multi\" }\n  if (found != null && handle(found)) { return \"handled\" }\n\n  if (map$$1.fallthrough) {\n    if (Object.prototype.toString.call(map$$1.fallthrough) != \"[object Array]\")\n      { return lookupKey(key, map$$1.fallthrough, handle, context) }\n    for (var i = 0; i < map$$1.fallthrough.length; i++) {\n      var result = lookupKey(key, map$$1.fallthrough[i], handle, context);\n      if (result) { return result }\n    }\n  }\n}\n\n// Modifier key presses don't count as 'real' key presses for the\n// purpose of keymap fallthrough.\nfunction isModifierKey(value) {\n  var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n  return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n}\n\nfunction addModifierNames(name, event, noShift) {\n  var base = name;\n  if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n  if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n  if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") { name = \"Cmd-\" + name; }\n  if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n  return name\n}\n\n// Look up the name of a key as indicated by an event object.\nfunction keyName(event, noShift) {\n  if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n  var name = keyNames[event.keyCode];\n  if (name == null || event.altGraphKey) { return false }\n  // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n  // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n  if (event.keyCode == 3 && event.code) { name = event.code; }\n  return addModifierNames(name, event, noShift)\n}\n\nfunction getKeyMap(val) {\n  return typeof val == \"string\" ? keyMap[val] : val\n}\n\n// Helper for deleting text near the selection(s), used to implement\n// backspace, delete, and similar functionality.\nfunction deleteNearSelection(cm, compute) {\n  var ranges = cm.doc.sel.ranges, kill = [];\n  // Build up a set of ranges to kill first, merging overlapping\n  // ranges.\n  for (var i = 0; i < ranges.length; i++) {\n    var toKill = compute(ranges[i]);\n    while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n      var replaced = kill.pop();\n      if (cmp(replaced.from, toKill.from) < 0) {\n        toKill.from = replaced.from;\n        break\n      }\n    }\n    kill.push(toKill);\n  }\n  // Next, remove those actual ranges.\n  runInOp(cm, function () {\n    for (var i = kill.length - 1; i >= 0; i--)\n      { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n    ensureCursorVisible(cm);\n  });\n}\n\nfunction moveCharLogically(line, ch, dir) {\n  var target = skipExtendingChars(line.text, ch + dir, dir);\n  return target < 0 || target > line.text.length ? null : target\n}\n\nfunction moveLogically(line, start, dir) {\n  var ch = moveCharLogically(line, start.ch, dir);\n  return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n}\n\nfunction endOfLine(visually, cm, lineObj, lineNo, dir) {\n  if (visually) {\n    var order = getOrder(lineObj, cm.doc.direction);\n    if (order) {\n      var part = dir < 0 ? lst(order) : order[0];\n      var moveInStorageOrder = (dir < 0) == (part.level == 1);\n      var sticky = moveInStorageOrder ? \"after\" : \"before\";\n      var ch;\n      // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n      // it could be that the last bidi part is not on the last visual line,\n      // since visual lines contain content order-consecutive chunks.\n      // Thus, in rtl, we are looking for the first (content-order) character\n      // in the rtl chunk that is on the last line (that is, the same line\n      // as the last (content-order) character).\n      if (part.level > 0 || cm.doc.direction == \"rtl\") {\n        var prep = prepareMeasureForLine(cm, lineObj);\n        ch = dir < 0 ? lineObj.text.length - 1 : 0;\n        var targetTop = measureCharPrepared(cm, prep, ch).top;\n        ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n        if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n      } else { ch = dir < 0 ? part.to : part.from; }\n      return new Pos(lineNo, ch, sticky)\n    }\n  }\n  return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n}\n\nfunction moveVisually(cm, line, start, dir) {\n  var bidi = getOrder(line, cm.doc.direction);\n  if (!bidi) { return moveLogically(line, start, dir) }\n  if (start.ch >= line.text.length) {\n    start.ch = line.text.length;\n    start.sticky = \"before\";\n  } else if (start.ch <= 0) {\n    start.ch = 0;\n    start.sticky = \"after\";\n  }\n  var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n  if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n    // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n    // nothing interesting happens.\n    return moveLogically(line, start, dir)\n  }\n\n  var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n  var prep;\n  var getWrappedLineExtent = function (ch) {\n    if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n    prep = prep || prepareMeasureForLine(cm, line);\n    return wrappedLineExtentChar(cm, line, prep, ch)\n  };\n  var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n  if (cm.doc.direction == \"rtl\" || part.level == 1) {\n    var moveInStorageOrder = (part.level == 1) == (dir < 0);\n    var ch = mv(start, moveInStorageOrder ? 1 : -1);\n    if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n      // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n      var sticky = moveInStorageOrder ? \"before\" : \"after\";\n      return new Pos(start.line, ch, sticky)\n    }\n  }\n\n  // Case 3: Could not move within this bidi part in this visual line, so leave\n  // the current bidi part\n\n  var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n    var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n      ? new Pos(start.line, mv(ch, 1), \"before\")\n      : new Pos(start.line, ch, \"after\"); };\n\n    for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n      var part = bidi[partPos];\n      var moveInStorageOrder = (dir > 0) == (part.level != 1);\n      var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n      if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n      ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n      if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n    }\n  };\n\n  // Case 3a: Look for other bidi parts on the same visual line\n  var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n  if (res) { return res }\n\n  // Case 3b: Look for other bidi parts on the next visual line\n  var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n  if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n    res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n    if (res) { return res }\n  }\n\n  // Case 4: Nowhere to move\n  return null\n}\n\n// Commands are parameter-less actions that can be performed on an\n// editor, mostly used for keybindings.\nvar commands = {\n  selectAll: selectAll,\n  singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n  killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n    if (range.empty()) {\n      var len = getLine(cm.doc, range.head.line).text.length;\n      if (range.head.ch == len && range.head.line < cm.lastLine())\n        { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n      else\n        { return {from: range.head, to: Pos(range.head.line, len)} }\n    } else {\n      return {from: range.from(), to: range.to()}\n    }\n  }); },\n  deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n    from: Pos(range.from().line, 0),\n    to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n  }); }); },\n  delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n    from: Pos(range.from().line, 0), to: range.from()\n  }); }); },\n  delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n    var top = cm.charCoords(range.head, \"div\").top + 5;\n    var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n    return {from: leftPos, to: range.from()}\n  }); },\n  delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n    var top = cm.charCoords(range.head, \"div\").top + 5;\n    var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n    return {from: range.from(), to: rightPos }\n  }); },\n  undo: function (cm) { return cm.undo(); },\n  redo: function (cm) { return cm.redo(); },\n  undoSelection: function (cm) { return cm.undoSelection(); },\n  redoSelection: function (cm) { return cm.redoSelection(); },\n  goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n  goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n  goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n    {origin: \"+move\", bias: 1}\n  ); },\n  goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n    {origin: \"+move\", bias: 1}\n  ); },\n  goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n    {origin: \"+move\", bias: -1}\n  ); },\n  goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n    var top = cm.cursorCoords(range.head, \"div\").top + 5;\n    return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n  }, sel_move); },\n  goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n    var top = cm.cursorCoords(range.head, \"div\").top + 5;\n    return cm.coordsChar({left: 0, top: top}, \"div\")\n  }, sel_move); },\n  goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n    var top = cm.cursorCoords(range.head, \"div\").top + 5;\n    var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n    if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n    return pos\n  }, sel_move); },\n  goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n  goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n  goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n  goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n  goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n  goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n  goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n  goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n  goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n  goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n  goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n  goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n  delCharBefore: function (cm) { return cm.deleteH(-1, \"char\"); },\n  delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n  delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n  delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n  delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n  delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n  indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n  indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n  indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n  insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n  insertSoftTab: function (cm) {\n    var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n    for (var i = 0; i < ranges.length; i++) {\n      var pos = ranges[i].from();\n      var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n      spaces.push(spaceStr(tabSize - col % tabSize));\n    }\n    cm.replaceSelections(spaces);\n  },\n  defaultTab: function (cm) {\n    if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n    else { cm.execCommand(\"insertTab\"); }\n  },\n  // Swap the two chars left and right of each selection's head.\n  // Move cursor behind the two swapped characters afterwards.\n  //\n  // Doesn't consider line feeds a character.\n  // Doesn't scan more than one line above to find a character.\n  // Doesn't do anything on an empty line.\n  // Doesn't do anything with non-empty selections.\n  transposeChars: function (cm) { return runInOp(cm, function () {\n    var ranges = cm.listSelections(), newSel = [];\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) { continue }\n      var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n      if (line) {\n        if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n        if (cur.ch > 0) {\n          cur = new Pos(cur.line, cur.ch + 1);\n          cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                          Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n        } else if (cur.line > cm.doc.first) {\n          var prev = getLine(cm.doc, cur.line - 1).text;\n          if (prev) {\n            cur = new Pos(cur.line, 1);\n            cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                            prev.charAt(prev.length - 1),\n                            Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n          }\n        }\n      }\n      newSel.push(new Range(cur, cur));\n    }\n    cm.setSelections(newSel);\n  }); },\n  newlineAndIndent: function (cm) { return runInOp(cm, function () {\n    var sels = cm.listSelections();\n    for (var i = sels.length - 1; i >= 0; i--)\n      { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n    sels = cm.listSelections();\n    for (var i$1 = 0; i$1 < sels.length; i$1++)\n      { cm.indentLine(sels[i$1].from().line, null, true); }\n    ensureCursorVisible(cm);\n  }); },\n  openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n  toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n};\n\n\nfunction lineStart(cm, lineN) {\n  var line = getLine(cm.doc, lineN);\n  var visual = visualLine(line);\n  if (visual != line) { lineN = lineNo(visual); }\n  return endOfLine(true, cm, visual, lineN, 1)\n}\nfunction lineEnd(cm, lineN) {\n  var line = getLine(cm.doc, lineN);\n  var visual = visualLineEnd(line);\n  if (visual != line) { lineN = lineNo(visual); }\n  return endOfLine(true, cm, line, lineN, -1)\n}\nfunction lineStartSmart(cm, pos) {\n  var start = lineStart(cm, pos.line);\n  var line = getLine(cm.doc, start.line);\n  var order = getOrder(line, cm.doc.direction);\n  if (!order || order[0].level == 0) {\n    var firstNonWS = Math.max(0, line.text.search(/\\S/));\n    var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n    return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n  }\n  return start\n}\n\n// Run a handler that was bound to a key.\nfunction doHandleBinding(cm, bound, dropShift) {\n  if (typeof bound == \"string\") {\n    bound = commands[bound];\n    if (!bound) { return false }\n  }\n  // Ensure previous input has been read, so that the handler sees a\n  // consistent view of the document\n  cm.display.input.ensurePolled();\n  var prevShift = cm.display.shift, done = false;\n  try {\n    if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n    if (dropShift) { cm.display.shift = false; }\n    done = bound(cm) != Pass;\n  } finally {\n    cm.display.shift = prevShift;\n    cm.state.suppressEdits = false;\n  }\n  return done\n}\n\nfunction lookupKeyForEditor(cm, name, handle) {\n  for (var i = 0; i < cm.state.keyMaps.length; i++) {\n    var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n    if (result) { return result }\n  }\n  return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n    || lookupKey(name, cm.options.keyMap, handle, cm)\n}\n\n// Note that, despite the name, this function is also used to check\n// for bound mouse clicks.\n\nvar stopSeq = new Delayed;\n\nfunction dispatchKey(cm, name, e, handle) {\n  var seq = cm.state.keySeq;\n  if (seq) {\n    if (isModifierKey(name)) { return \"handled\" }\n    if (/\\'$/.test(name))\n      { cm.state.keySeq = null; }\n    else\n      { stopSeq.set(50, function () {\n        if (cm.state.keySeq == seq) {\n          cm.state.keySeq = null;\n          cm.display.input.reset();\n        }\n      }); }\n    if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n  }\n  return dispatchKeyInner(cm, name, e, handle)\n}\n\nfunction dispatchKeyInner(cm, name, e, handle) {\n  var result = lookupKeyForEditor(cm, name, handle);\n\n  if (result == \"multi\")\n    { cm.state.keySeq = name; }\n  if (result == \"handled\")\n    { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n  if (result == \"handled\" || result == \"multi\") {\n    e_preventDefault(e);\n    restartBlink(cm);\n  }\n\n  return !!result\n}\n\n// Handle a key from the keydown event.\nfunction handleKeyBinding(cm, e) {\n  var name = keyName(e, true);\n  if (!name) { return false }\n\n  if (e.shiftKey && !cm.state.keySeq) {\n    // First try to resolve full name (including 'Shift-'). Failing\n    // that, see if there is a cursor-motion command (starting with\n    // 'go') bound to the keyname without 'Shift-'.\n    return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n        || dispatchKey(cm, name, e, function (b) {\n             if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n               { return doHandleBinding(cm, b) }\n           })\n  } else {\n    return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n  }\n}\n\n// Handle a key from the keypress event\nfunction handleCharBinding(cm, e, ch) {\n  return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n}\n\nvar lastStoppedKey = null;\nfunction onKeyDown(e) {\n  var cm = this;\n  cm.curOp.focus = activeElt();\n  if (signalDOMEvent(cm, e)) { return }\n  // IE does strange things with escape.\n  if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n  var code = e.keyCode;\n  cm.display.shift = code == 16 || e.shiftKey;\n  var handled = handleKeyBinding(cm, e);\n  if (presto) {\n    lastStoppedKey = handled ? code : null;\n    // Opera has no cut event... we try to at least catch the key combo\n    if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n      { cm.replaceSelection(\"\", null, \"cut\"); }\n  }\n\n  // Turn mouse into crosshair when Alt is held on Mac.\n  if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n    { showCrossHair(cm); }\n}\n\nfunction showCrossHair(cm) {\n  var lineDiv = cm.display.lineDiv;\n  addClass(lineDiv, \"CodeMirror-crosshair\");\n\n  function up(e) {\n    if (e.keyCode == 18 || !e.altKey) {\n      rmClass(lineDiv, \"CodeMirror-crosshair\");\n      off(document, \"keyup\", up);\n      off(document, \"mouseover\", up);\n    }\n  }\n  on(document, \"keyup\", up);\n  on(document, \"mouseover\", up);\n}\n\nfunction onKeyUp(e) {\n  if (e.keyCode == 16) { this.doc.sel.shift = false; }\n  signalDOMEvent(this, e);\n}\n\nfunction onKeyPress(e) {\n  var cm = this;\n  if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n  var keyCode = e.keyCode, charCode = e.charCode;\n  if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n  if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n  var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n  // Some browsers fire keypress events for backspace\n  if (ch == \"\\x08\") { return }\n  if (handleCharBinding(cm, e, ch)) { return }\n  cm.display.input.onKeyPress(e);\n}\n\nvar DOUBLECLICK_DELAY = 400;\n\nvar PastClick = function(time, pos, button) {\n  this.time = time;\n  this.pos = pos;\n  this.button = button;\n};\n\nPastClick.prototype.compare = function (time, pos, button) {\n  return this.time + DOUBLECLICK_DELAY > time &&\n    cmp(pos, this.pos) == 0 && button == this.button\n};\n\nvar lastClick;\nvar lastDoubleClick;\nfunction clickRepeat(pos, button) {\n  var now = +new Date;\n  if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n    lastClick = lastDoubleClick = null;\n    return \"triple\"\n  } else if (lastClick && lastClick.compare(now, pos, button)) {\n    lastDoubleClick = new PastClick(now, pos, button);\n    lastClick = null;\n    return \"double\"\n  } else {\n    lastClick = new PastClick(now, pos, button);\n    lastDoubleClick = null;\n    return \"single\"\n  }\n}\n\n// A mouse down can be a single click, double click, triple click,\n// start of selection drag, start of text drag, new cursor\n// (ctrl-click), rectangle drag (alt-drag), or xwin\n// middle-click-paste. Or it might be a click on something we should\n// not interfere with, such as a scrollbar or widget.\nfunction onMouseDown(e) {\n  var cm = this, display = cm.display;\n  if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n  display.input.ensurePolled();\n  display.shift = e.shiftKey;\n\n  if (eventInWidget(display, e)) {\n    if (!webkit) {\n      // Briefly turn off draggability, to allow widgets to do\n      // normal dragging things.\n      display.scroller.draggable = false;\n      setTimeout(function () { return display.scroller.draggable = true; }, 100);\n    }\n    return\n  }\n  if (clickInGutter(cm, e)) { return }\n  var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n  window.focus();\n\n  // #3261: make sure, that we're not starting a second selection\n  if (button == 1 && cm.state.selectingText)\n    { cm.state.selectingText(e); }\n\n  if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n  if (button == 1) {\n    if (pos) { leftButtonDown(cm, pos, repeat, e); }\n    else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n  } else if (button == 2) {\n    if (pos) { extendSelection(cm.doc, pos); }\n    setTimeout(function () { return display.input.focus(); }, 20);\n  } else if (button == 3) {\n    if (captureRightClick) { onContextMenu(cm, e); }\n    else { delayBlurEvent(cm); }\n  }\n}\n\nfunction handleMappedButton(cm, button, pos, repeat, event) {\n  var name = \"Click\";\n  if (repeat == \"double\") { name = \"Double\" + name; }\n  else if (repeat == \"triple\") { name = \"Triple\" + name; }\n  name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n  return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n    if (typeof bound == \"string\") { bound = commands[bound]; }\n    if (!bound) { return false }\n    var done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      done = bound(cm, pos) != Pass;\n    } finally {\n      cm.state.suppressEdits = false;\n    }\n    return done\n  })\n}\n\nfunction configureMouse(cm, repeat, event) {\n  var option = cm.getOption(\"configureMouse\");\n  var value = option ? option(cm, repeat, event) : {};\n  if (value.unit == null) {\n    var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n    value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n  }\n  if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n  if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n  if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n  return value\n}\n\nfunction leftButtonDown(cm, pos, repeat, event) {\n  if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n  else { cm.curOp.focus = activeElt(); }\n\n  var behavior = configureMouse(cm, repeat, event);\n\n  var sel = cm.doc.sel, contained;\n  if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n      repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n      (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n      (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n    { leftButtonStartDrag(cm, event, pos, behavior); }\n  else\n    { leftButtonSelect(cm, event, pos, behavior); }\n}\n\n// Start a text drag. When it ends, see if any dragging actually\n// happen, and treat as a click if it didn't.\nfunction leftButtonStartDrag(cm, event, pos, behavior) {\n  var display = cm.display, moved = false;\n  var dragEnd = operation(cm, function (e) {\n    if (webkit) { display.scroller.draggable = false; }\n    cm.state.draggingText = false;\n    off(document, \"mouseup\", dragEnd);\n    off(document, \"mousemove\", mouseMove);\n    off(display.scroller, \"dragstart\", dragStart);\n    off(display.scroller, \"drop\", dragEnd);\n    if (!moved) {\n      e_preventDefault(e);\n      if (!behavior.addNew)\n        { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n      // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n      if (webkit || ie && ie_version == 9)\n        { setTimeout(function () {document.body.focus(); display.input.focus();}, 20); }\n      else\n        { display.input.focus(); }\n    }\n  });\n  var mouseMove = function(e2) {\n    moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n  };\n  var dragStart = function () { return moved = true; };\n  // Let the drag handler handle this.\n  if (webkit) { display.scroller.draggable = true; }\n  cm.state.draggingText = dragEnd;\n  dragEnd.copy = !behavior.moveOnDrag;\n  // IE's approach to draggable\n  if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n  on(document, \"mouseup\", dragEnd);\n  on(document, \"mousemove\", mouseMove);\n  on(display.scroller, \"dragstart\", dragStart);\n  on(display.scroller, \"drop\", dragEnd);\n\n  delayBlurEvent(cm);\n  setTimeout(function () { return display.input.focus(); }, 20);\n}\n\nfunction rangeForUnit(cm, pos, unit) {\n  if (unit == \"char\") { return new Range(pos, pos) }\n  if (unit == \"word\") { return cm.findWordAt(pos) }\n  if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n  var result = unit(cm, pos);\n  return new Range(result.from, result.to)\n}\n\n// Normal selection, as opposed to text dragging.\nfunction leftButtonSelect(cm, event, start, behavior) {\n  var display = cm.display, doc = cm.doc;\n  e_preventDefault(event);\n\n  var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n  if (behavior.addNew && !behavior.extend) {\n    ourIndex = doc.sel.contains(start);\n    if (ourIndex > -1)\n      { ourRange = ranges[ourIndex]; }\n    else\n      { ourRange = new Range(start, start); }\n  } else {\n    ourRange = doc.sel.primary();\n    ourIndex = doc.sel.primIndex;\n  }\n\n  if (behavior.unit == \"rectangle\") {\n    if (!behavior.addNew) { ourRange = new Range(start, start); }\n    start = posFromMouse(cm, event, true, true);\n    ourIndex = -1;\n  } else {\n    var range$$1 = rangeForUnit(cm, start, behavior.unit);\n    if (behavior.extend)\n      { ourRange = extendRange(ourRange, range$$1.anchor, range$$1.head, behavior.extend); }\n    else\n      { ourRange = range$$1; }\n  }\n\n  if (!behavior.addNew) {\n    ourIndex = 0;\n    setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n    startSel = doc.sel;\n  } else if (ourIndex == -1) {\n    ourIndex = ranges.length;\n    setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex),\n                 {scroll: false, origin: \"*mouse\"});\n  } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n    setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                 {scroll: false, origin: \"*mouse\"});\n    startSel = doc.sel;\n  } else {\n    replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n  }\n\n  var lastPos = start;\n  function extendTo(pos) {\n    if (cmp(lastPos, pos) == 0) { return }\n    lastPos = pos;\n\n    if (behavior.unit == \"rectangle\") {\n      var ranges = [], tabSize = cm.options.tabSize;\n      var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n      var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n      var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n      for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n           line <= end; line++) {\n        var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n        if (left == right)\n          { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n        else if (text.length > leftPos)\n          { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n      }\n      if (!ranges.length) { ranges.push(new Range(start, start)); }\n      setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                   {origin: \"*mouse\", scroll: false});\n      cm.scrollIntoView(pos);\n    } else {\n      var oldRange = ourRange;\n      var range$$1 = rangeForUnit(cm, pos, behavior.unit);\n      var anchor = oldRange.anchor, head;\n      if (cmp(range$$1.anchor, anchor) > 0) {\n        head = range$$1.head;\n        anchor = minPos(oldRange.from(), range$$1.anchor);\n      } else {\n        head = range$$1.anchor;\n        anchor = maxPos(oldRange.to(), range$$1.head);\n      }\n      var ranges$1 = startSel.ranges.slice(0);\n      ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\n      setSelection(doc, normalizeSelection(ranges$1, ourIndex), sel_mouse);\n    }\n  }\n\n  var editorSize = display.wrapper.getBoundingClientRect();\n  // Used to ensure timeout re-tries don't fire when another extend\n  // happened in the meantime (clearTimeout isn't reliable -- at\n  // least on Chrome, the timeouts still happen even when cleared,\n  // if the clear happens after their scheduled firing time).\n  var counter = 0;\n\n  function extend(e) {\n    var curCount = ++counter;\n    var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n    if (!cur) { return }\n    if (cmp(cur, lastPos) != 0) {\n      cm.curOp.focus = activeElt();\n      extendTo(cur);\n      var visible = visibleLines(display, doc);\n      if (cur.line >= visible.to || cur.line < visible.from)\n        { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n    } else {\n      var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n      if (outside) { setTimeout(operation(cm, function () {\n        if (counter != curCount) { return }\n        display.scroller.scrollTop += outside;\n        extend(e);\n      }), 50); }\n    }\n  }\n\n  function done(e) {\n    cm.state.selectingText = false;\n    counter = Infinity;\n    e_preventDefault(e);\n    display.input.focus();\n    off(document, \"mousemove\", move);\n    off(document, \"mouseup\", up);\n    doc.history.lastSelOrigin = null;\n  }\n\n  var move = operation(cm, function (e) {\n    if (!e_button(e)) { done(e); }\n    else { extend(e); }\n  });\n  var up = operation(cm, done);\n  cm.state.selectingText = up;\n  on(document, \"mousemove\", move);\n  on(document, \"mouseup\", up);\n}\n\n// Used when mouse-selecting to adjust the anchor to the proper side\n// of a bidi jump depending on the visual position of the head.\nfunction bidiSimplify(cm, range$$1) {\n  var anchor = range$$1.anchor;\n  var head = range$$1.head;\n  var anchorLine = getLine(cm.doc, anchor.line);\n  if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range$$1 }\n  var order = getOrder(anchorLine);\n  if (!order) { return range$$1 }\n  var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n  if (part.from != anchor.ch && part.to != anchor.ch) { return range$$1 }\n  var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n  if (boundary == 0 || boundary == order.length) { return range$$1 }\n\n  // Compute the relative visual position of the head compared to the\n  // anchor (<0 is to the left, >0 to the right)\n  var leftSide;\n  if (head.line != anchor.line) {\n    leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n  } else {\n    var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n    var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n    if (headIndex == boundary - 1 || headIndex == boundary)\n      { leftSide = dir < 0; }\n    else\n      { leftSide = dir > 0; }\n  }\n\n  var usePart = order[boundary + (leftSide ? -1 : 0)];\n  var from = leftSide == (usePart.level == 1);\n  var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n  return anchor.ch == ch && anchor.sticky == sticky ? range$$1 : new Range(new Pos(anchor.line, ch, sticky), head)\n}\n\n\n// Determines whether an event happened in the gutter, and fires the\n// handlers for the corresponding event.\nfunction gutterEvent(cm, e, type, prevent) {\n  var mX, mY;\n  if (e.touches) {\n    mX = e.touches[0].clientX;\n    mY = e.touches[0].clientY;\n  } else {\n    try { mX = e.clientX; mY = e.clientY; }\n    catch(e) { return false }\n  }\n  if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n  if (prevent) { e_preventDefault(e); }\n\n  var display = cm.display;\n  var lineBox = display.lineDiv.getBoundingClientRect();\n\n  if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n  mY -= lineBox.top - display.viewOffset;\n\n  for (var i = 0; i < cm.options.gutters.length; ++i) {\n    var g = display.gutters.childNodes[i];\n    if (g && g.getBoundingClientRect().right >= mX) {\n      var line = lineAtHeight(cm.doc, mY);\n      var gutter = cm.options.gutters[i];\n      signal(cm, type, cm, line, gutter, e);\n      return e_defaultPrevented(e)\n    }\n  }\n}\n\nfunction clickInGutter(cm, e) {\n  return gutterEvent(cm, e, \"gutterClick\", true)\n}\n\n// CONTEXT MENU HANDLING\n\n// To make the context menu work, we need to briefly unhide the\n// textarea (making it as unobtrusive as possible) to let the\n// right-click take effect on it.\nfunction onContextMenu(cm, e) {\n  if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n  if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n  cm.display.input.onContextMenu(e);\n}\n\nfunction contextMenuInGutter(cm, e) {\n  if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n  return gutterEvent(cm, e, \"gutterContextMenu\", false)\n}\n\nfunction themeChanged(cm) {\n  cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n    cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n  clearCaches(cm);\n}\n\nvar Init = {toString: function(){return \"CodeMirror.Init\"}};\n\nvar defaults = {};\nvar optionHandlers = {};\n\nfunction defineOptions(CodeMirror) {\n  var optionHandlers = CodeMirror.optionHandlers;\n\n  function option(name, deflt, handle, notOnInit) {\n    CodeMirror.defaults[name] = deflt;\n    if (handle) { optionHandlers[name] =\n      notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n  }\n\n  CodeMirror.defineOption = option;\n\n  // Passed to option handlers when there is no old value.\n  CodeMirror.Init = Init;\n\n  // These two are, on init, called from the constructor because they\n  // have to be initialized before the editor can start at all.\n  option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n  option(\"mode\", null, function (cm, val) {\n    cm.doc.modeOption = val;\n    loadMode(cm);\n  }, true);\n\n  option(\"indentUnit\", 2, loadMode, true);\n  option(\"indentWithTabs\", false);\n  option(\"smartIndent\", true);\n  option(\"tabSize\", 4, function (cm) {\n    resetModeState(cm);\n    clearCaches(cm);\n    regChange(cm);\n  }, true);\n\n  option(\"lineSeparator\", null, function (cm, val) {\n    cm.doc.lineSep = val;\n    if (!val) { return }\n    var newBreaks = [], lineNo = cm.doc.first;\n    cm.doc.iter(function (line) {\n      for (var pos = 0;;) {\n        var found = line.text.indexOf(val, pos);\n        if (found == -1) { break }\n        pos = found + val.length;\n        newBreaks.push(Pos(lineNo, found));\n      }\n      lineNo++;\n    });\n    for (var i = newBreaks.length - 1; i >= 0; i--)\n      { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n  });\n  option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff]/g, function (cm, val, old) {\n    cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n    if (old != Init) { cm.refresh(); }\n  });\n  option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n  option(\"electricChars\", true);\n  option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n    throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n  }, true);\n  option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n  option(\"rtlMoveVisually\", !windows);\n  option(\"wholeLineUpdateBefore\", true);\n\n  option(\"theme\", \"default\", function (cm) {\n    themeChanged(cm);\n    guttersChanged(cm);\n  }, true);\n  option(\"keyMap\", \"default\", function (cm, val, old) {\n    var next = getKeyMap(val);\n    var prev = old != Init && getKeyMap(old);\n    if (prev && prev.detach) { prev.detach(cm, next); }\n    if (next.attach) { next.attach(cm, prev || null); }\n  });\n  option(\"extraKeys\", null);\n  option(\"configureMouse\", null);\n\n  option(\"lineWrapping\", false, wrappingChanged, true);\n  option(\"gutters\", [], function (cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"fixedGutter\", true, function (cm, val) {\n    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n    cm.refresh();\n  }, true);\n  option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n  option(\"scrollbarStyle\", \"native\", function (cm) {\n    initScrollbars(cm);\n    updateScrollbars(cm);\n    cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n    cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n  }, true);\n  option(\"lineNumbers\", false, function (cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"firstLineNumber\", 1, guttersChanged, true);\n  option(\"lineNumberFormatter\", function (integer) { return integer; }, guttersChanged, true);\n  option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n  option(\"resetSelectionOnContextMenu\", true);\n  option(\"lineWiseCopyCut\", true);\n  option(\"pasteLinesPerSelection\", true);\n\n  option(\"readOnly\", false, function (cm, val) {\n    if (val == \"nocursor\") {\n      onBlur(cm);\n      cm.display.input.blur();\n    }\n    cm.display.input.readOnlyChanged(val);\n  });\n  option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n  option(\"dragDrop\", true, dragDropChanged);\n  option(\"allowDropFileTypes\", null);\n\n  option(\"cursorBlinkRate\", 530);\n  option(\"cursorScrollMargin\", 0);\n  option(\"cursorHeight\", 1, updateSelection, true);\n  option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n  option(\"workTime\", 100);\n  option(\"workDelay\", 100);\n  option(\"flattenSpans\", true, resetModeState, true);\n  option(\"addModeClass\", false, resetModeState, true);\n  option(\"pollInterval\", 100);\n  option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n  option(\"historyEventDelay\", 1250);\n  option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n  option(\"maxHighlightLength\", 10000, resetModeState, true);\n  option(\"moveInputWithCursor\", true, function (cm, val) {\n    if (!val) { cm.display.input.resetPosition(); }\n  });\n\n  option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n  option(\"autofocus\", null);\n  option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n}\n\nfunction guttersChanged(cm) {\n  updateGutters(cm);\n  regChange(cm);\n  alignHorizontally(cm);\n}\n\nfunction dragDropChanged(cm, value, old) {\n  var wasOn = old && old != Init;\n  if (!value != !wasOn) {\n    var funcs = cm.display.dragFunctions;\n    var toggle = value ? on : off;\n    toggle(cm.display.scroller, \"dragstart\", funcs.start);\n    toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n    toggle(cm.display.scroller, \"dragover\", funcs.over);\n    toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n    toggle(cm.display.scroller, \"drop\", funcs.drop);\n  }\n}\n\nfunction wrappingChanged(cm) {\n  if (cm.options.lineWrapping) {\n    addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n    cm.display.sizer.style.minWidth = \"\";\n    cm.display.sizerWidth = null;\n  } else {\n    rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n    findMaxLine(cm);\n  }\n  estimateLineHeights(cm);\n  regChange(cm);\n  clearCaches(cm);\n  setTimeout(function () { return updateScrollbars(cm); }, 100);\n}\n\n// A CodeMirror instance represents an editor. This is the object\n// that user code is usually dealing with.\n\nfunction CodeMirror$1(place, options) {\n  var this$1 = this;\n\n  if (!(this instanceof CodeMirror$1)) { return new CodeMirror$1(place, options) }\n\n  this.options = options = options ? copyObj(options) : {};\n  // Determine effective options based on given values and defaults.\n  copyObj(defaults, options, false);\n  setGuttersForLineNumbers(options);\n\n  var doc = options.value;\n  if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n  this.doc = doc;\n\n  var input = new CodeMirror$1.inputStyles[options.inputStyle](this);\n  var display = this.display = new Display(place, doc, input);\n  display.wrapper.CodeMirror = this;\n  updateGutters(this);\n  themeChanged(this);\n  if (options.lineWrapping)\n    { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n  initScrollbars(this);\n\n  this.state = {\n    keyMaps: [],  // stores maps added by addKeyMap\n    overlays: [], // highlighting overlays, as added by addOverlay\n    modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n    overwrite: false,\n    delayingBlurEvent: false,\n    focused: false,\n    suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n    pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll\n    selectingText: false,\n    draggingText: false,\n    highlight: new Delayed(), // stores highlight worker timeout\n    keySeq: null,  // Unfinished key sequence\n    specialChars: null\n  };\n\n  if (options.autofocus && !mobile) { display.input.focus(); }\n\n  // Override magic textarea content restore that IE sometimes does\n  // on our hidden textarea on reload\n  if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n  registerEventHandlers(this);\n  ensureGlobalHandlers();\n\n  startOperation(this);\n  this.curOp.forceUpdate = true;\n  attachDoc(this, doc);\n\n  if ((options.autofocus && !mobile) || this.hasFocus())\n    { setTimeout(bind(onFocus, this), 20); }\n  else\n    { onBlur(this); }\n\n  for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n    { optionHandlers[opt](this$1, options[opt], Init); } }\n  maybeUpdateLineNumberWidth(this);\n  if (options.finishInit) { options.finishInit(this); }\n  for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this$1); }\n  endOperation(this);\n  // Suppress optimizelegibility in Webkit, since it breaks text\n  // measuring on line wrapping boundaries.\n  if (webkit && options.lineWrapping &&\n      getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n    { display.lineDiv.style.textRendering = \"auto\"; }\n}\n\n// The default configuration options.\nCodeMirror$1.defaults = defaults;\n// Functions to run when options are changed.\nCodeMirror$1.optionHandlers = optionHandlers;\n\n// Attach the necessary event handlers when initializing the editor\nfunction registerEventHandlers(cm) {\n  var d = cm.display;\n  on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n  // Older IE's will not fire a second mousedown for a double click\n  if (ie && ie_version < 11)\n    { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n      if (signalDOMEvent(cm, e)) { return }\n      var pos = posFromMouse(cm, e);\n      if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n      e_preventDefault(e);\n      var word = cm.findWordAt(pos);\n      extendSelection(cm.doc, word.anchor, word.head);\n    })); }\n  else\n    { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n  // Some browsers fire contextmenu *after* opening the menu, at\n  // which point we can't mess with it anymore. Context menu is\n  // handled in onMouseDown for these browsers.\n  if (!captureRightClick) { on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); }); }\n\n  // Used to suppress mouse event handling when a touch happens\n  var touchFinished, prevTouch = {end: 0};\n  function finishTouch() {\n    if (d.activeTouch) {\n      touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n      prevTouch = d.activeTouch;\n      prevTouch.end = +new Date;\n    }\n  }\n  function isMouseLikeTouchEvent(e) {\n    if (e.touches.length != 1) { return false }\n    var touch = e.touches[0];\n    return touch.radiusX <= 1 && touch.radiusY <= 1\n  }\n  function farAway(touch, other) {\n    if (other.left == null) { return true }\n    var dx = other.left - touch.left, dy = other.top - touch.top;\n    return dx * dx + dy * dy > 20 * 20\n  }\n  on(d.scroller, \"touchstart\", function (e) {\n    if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n      d.input.ensurePolled();\n      clearTimeout(touchFinished);\n      var now = +new Date;\n      d.activeTouch = {start: now, moved: false,\n                       prev: now - prevTouch.end <= 300 ? prevTouch : null};\n      if (e.touches.length == 1) {\n        d.activeTouch.left = e.touches[0].pageX;\n        d.activeTouch.top = e.touches[0].pageY;\n      }\n    }\n  });\n  on(d.scroller, \"touchmove\", function () {\n    if (d.activeTouch) { d.activeTouch.moved = true; }\n  });\n  on(d.scroller, \"touchend\", function (e) {\n    var touch = d.activeTouch;\n    if (touch && !eventInWidget(d, e) && touch.left != null &&\n        !touch.moved && new Date - touch.start < 300) {\n      var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n      if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n        { range = new Range(pos, pos); }\n      else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n        { range = cm.findWordAt(pos); }\n      else // Triple tap\n        { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n      cm.setSelection(range.anchor, range.head);\n      cm.focus();\n      e_preventDefault(e);\n    }\n    finishTouch();\n  });\n  on(d.scroller, \"touchcancel\", finishTouch);\n\n  // Sync scrolling between fake scrollbars and real scrollable\n  // area, ensure viewport is updated when scrolling.\n  on(d.scroller, \"scroll\", function () {\n    if (d.scroller.clientHeight) {\n      updateScrollTop(cm, d.scroller.scrollTop);\n      setScrollLeft(cm, d.scroller.scrollLeft, true);\n      signal(cm, \"scroll\", cm);\n    }\n  });\n\n  // Listen to wheel events in order to try and update the viewport on time.\n  on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n  on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n  // Prevent wrapper from ever scrolling\n  on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n  d.dragFunctions = {\n    enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n    over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n    start: function (e) { return onDragStart(cm, e); },\n    drop: operation(cm, onDrop),\n    leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n  };\n\n  var inp = d.input.getField();\n  on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n  on(inp, \"keydown\", operation(cm, onKeyDown));\n  on(inp, \"keypress\", operation(cm, onKeyPress));\n  on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n  on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n}\n\nvar initHooks = [];\nCodeMirror$1.defineInitHook = function (f) { return initHooks.push(f); };\n\n// Indent the given line. The how parameter can be \"smart\",\n// \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n// (typically set to true for forced single-line indents), empty\n// lines are not indented, and places where the mode returns Pass\n// are left alone.\nfunction indentLine(cm, n, how, aggressive) {\n  var doc = cm.doc, state;\n  if (how == null) { how = \"add\"; }\n  if (how == \"smart\") {\n    // Fall back to \"prev\" when the mode doesn't have an indentation\n    // method.\n    if (!doc.mode.indent) { how = \"prev\"; }\n    else { state = getContextBefore(cm, n).state; }\n  }\n\n  var tabSize = cm.options.tabSize;\n  var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n  if (line.stateAfter) { line.stateAfter = null; }\n  var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n  if (!aggressive && !/\\S/.test(line.text)) {\n    indentation = 0;\n    how = \"not\";\n  } else if (how == \"smart\") {\n    indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n    if (indentation == Pass || indentation > 150) {\n      if (!aggressive) { return }\n      how = \"prev\";\n    }\n  }\n  if (how == \"prev\") {\n    if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n    else { indentation = 0; }\n  } else if (how == \"add\") {\n    indentation = curSpace + cm.options.indentUnit;\n  } else if (how == \"subtract\") {\n    indentation = curSpace - cm.options.indentUnit;\n  } else if (typeof how == \"number\") {\n    indentation = curSpace + how;\n  }\n  indentation = Math.max(0, indentation);\n\n  var indentString = \"\", pos = 0;\n  if (cm.options.indentWithTabs)\n    { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n  if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n  if (indentString != curSpaceString) {\n    replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n    line.stateAfter = null;\n    return true\n  } else {\n    // Ensure that, if the cursor was in the whitespace at the start\n    // of the line, it is moved to the end of that space.\n    for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n      var range = doc.sel.ranges[i$1];\n      if (range.head.line == n && range.head.ch < curSpaceString.length) {\n        var pos$1 = Pos(n, curSpaceString.length);\n        replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n        break\n      }\n    }\n  }\n}\n\n// This will be set to a {lineWise: bool, text: [string]} object, so\n// that, when pasting, we know what kind of selections the copied\n// text was made out of.\nvar lastCopied = null;\n\nfunction setLastCopied(newLastCopied) {\n  lastCopied = newLastCopied;\n}\n\nfunction applyTextInput(cm, inserted, deleted, sel, origin) {\n  var doc = cm.doc;\n  cm.display.shift = false;\n  if (!sel) { sel = doc.sel; }\n\n  var paste = cm.state.pasteIncoming || origin == \"paste\";\n  var textLines = splitLinesAuto(inserted), multiPaste = null;\n  // When pasting N lines into N selections, insert one line per selection\n  if (paste && sel.ranges.length > 1) {\n    if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n      if (sel.ranges.length % lastCopied.text.length == 0) {\n        multiPaste = [];\n        for (var i = 0; i < lastCopied.text.length; i++)\n          { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n      }\n    } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n      multiPaste = map(textLines, function (l) { return [l]; });\n    }\n  }\n\n  var updateInput;\n  // Normal behavior is to insert the new text into every selection\n  for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n    var range$$1 = sel.ranges[i$1];\n    var from = range$$1.from(), to = range$$1.to();\n    if (range$$1.empty()) {\n      if (deleted && deleted > 0) // Handle deletion\n        { from = Pos(from.line, from.ch - deleted); }\n      else if (cm.state.overwrite && !paste) // Handle overwrite\n        { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n      else if (lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted)\n        { from = to = Pos(from.line, 0); }\n    }\n    updateInput = cm.curOp.updateInput;\n    var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                       origin: origin || (paste ? \"paste\" : cm.state.cutIncoming ? \"cut\" : \"+input\")};\n    makeChange(cm.doc, changeEvent);\n    signalLater(cm, \"inputRead\", cm, changeEvent);\n  }\n  if (inserted && !paste)\n    { triggerElectric(cm, inserted); }\n\n  ensureCursorVisible(cm);\n  cm.curOp.updateInput = updateInput;\n  cm.curOp.typing = true;\n  cm.state.pasteIncoming = cm.state.cutIncoming = false;\n}\n\nfunction handlePaste(e, cm) {\n  var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n  if (pasted) {\n    e.preventDefault();\n    if (!cm.isReadOnly() && !cm.options.disableInput)\n      { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n    return true\n  }\n}\n\nfunction triggerElectric(cm, inserted) {\n  // When an 'electric' character is inserted, immediately trigger a reindent\n  if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n  var sel = cm.doc.sel;\n\n  for (var i = sel.ranges.length - 1; i >= 0; i--) {\n    var range$$1 = sel.ranges[i];\n    if (range$$1.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range$$1.head.line)) { continue }\n    var mode = cm.getModeAt(range$$1.head);\n    var indented = false;\n    if (mode.electricChars) {\n      for (var j = 0; j < mode.electricChars.length; j++)\n        { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n          indented = indentLine(cm, range$$1.head.line, \"smart\");\n          break\n        } }\n    } else if (mode.electricInput) {\n      if (mode.electricInput.test(getLine(cm.doc, range$$1.head.line).text.slice(0, range$$1.head.ch)))\n        { indented = indentLine(cm, range$$1.head.line, \"smart\"); }\n    }\n    if (indented) { signalLater(cm, \"electricInput\", cm, range$$1.head.line); }\n  }\n}\n\nfunction copyableRanges(cm) {\n  var text = [], ranges = [];\n  for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n    var line = cm.doc.sel.ranges[i].head.line;\n    var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n    ranges.push(lineRange);\n    text.push(cm.getRange(lineRange.anchor, lineRange.head));\n  }\n  return {text: text, ranges: ranges}\n}\n\nfunction disableBrowserMagic(field, spellcheck) {\n  field.setAttribute(\"autocorrect\", \"off\");\n  field.setAttribute(\"autocapitalize\", \"off\");\n  field.setAttribute(\"spellcheck\", !!spellcheck);\n}\n\nfunction hiddenTextarea() {\n  var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n  var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n  // The textarea is kept positioned near the cursor to prevent the\n  // fact that it'll be scrolled into view on input from scrolling\n  // our fake cursor out of view. On webkit, when wrap=off, paste is\n  // very slow. So make the area wide instead.\n  if (webkit) { te.style.width = \"1000px\"; }\n  else { te.setAttribute(\"wrap\", \"off\"); }\n  // If border: 0; -- iOS fails to open keyboard (issue #1287)\n  if (ios) { te.style.border = \"1px solid black\"; }\n  disableBrowserMagic(te);\n  return div\n}\n\n// The publicly visible API. Note that methodOp(f) means\n// 'wrap f in an operation, performed on its `this` parameter'.\n\n// This is not the complete set of editor methods. Most of the\n// methods defined on the Doc type are also injected into\n// CodeMirror.prototype, for backwards compatibility and\n// convenience.\n\nvar addEditorMethods = function(CodeMirror) {\n  var optionHandlers = CodeMirror.optionHandlers;\n\n  var helpers = CodeMirror.helpers = {};\n\n  CodeMirror.prototype = {\n    constructor: CodeMirror,\n    focus: function(){window.focus(); this.display.input.focus();},\n\n    setOption: function(option, value) {\n      var options = this.options, old = options[option];\n      if (options[option] == value && option != \"mode\") { return }\n      options[option] = value;\n      if (optionHandlers.hasOwnProperty(option))\n        { operation(this, optionHandlers[option])(this, value, old); }\n      signal(this, \"optionChange\", this, option);\n    },\n\n    getOption: function(option) {return this.options[option]},\n    getDoc: function() {return this.doc},\n\n    addKeyMap: function(map$$1, bottom) {\n      this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map$$1));\n    },\n    removeKeyMap: function(map$$1) {\n      var maps = this.state.keyMaps;\n      for (var i = 0; i < maps.length; ++i)\n        { if (maps[i] == map$$1 || maps[i].name == map$$1) {\n          maps.splice(i, 1);\n          return true\n        } }\n    },\n\n    addOverlay: methodOp(function(spec, options) {\n      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n      if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n      insertSorted(this.state.overlays,\n                   {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                    priority: (options && options.priority) || 0},\n                   function (overlay) { return overlay.priority; });\n      this.state.modeGen++;\n      regChange(this);\n    }),\n    removeOverlay: methodOp(function(spec) {\n      var this$1 = this;\n\n      var overlays = this.state.overlays;\n      for (var i = 0; i < overlays.length; ++i) {\n        var cur = overlays[i].modeSpec;\n        if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n          overlays.splice(i, 1);\n          this$1.state.modeGen++;\n          regChange(this$1);\n          return\n        }\n      }\n    }),\n\n    indentLine: methodOp(function(n, dir, aggressive) {\n      if (typeof dir != \"string\" && typeof dir != \"number\") {\n        if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n        else { dir = dir ? \"add\" : \"subtract\"; }\n      }\n      if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n    }),\n    indentSelection: methodOp(function(how) {\n      var this$1 = this;\n\n      var ranges = this.doc.sel.ranges, end = -1;\n      for (var i = 0; i < ranges.length; i++) {\n        var range$$1 = ranges[i];\n        if (!range$$1.empty()) {\n          var from = range$$1.from(), to = range$$1.to();\n          var start = Math.max(end, from.line);\n          end = Math.min(this$1.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n          for (var j = start; j < end; ++j)\n            { indentLine(this$1, j, how); }\n          var newRanges = this$1.doc.sel.ranges;\n          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n            { replaceOneSelection(this$1.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n        } else if (range$$1.head.line > end) {\n          indentLine(this$1, range$$1.head.line, how, true);\n          end = range$$1.head.line;\n          if (i == this$1.doc.sel.primIndex) { ensureCursorVisible(this$1); }\n        }\n      }\n    }),\n\n    // Fetch the parser token for a given character. Useful for hacks\n    // that want to inspect the mode state (say, for completion).\n    getTokenAt: function(pos, precise) {\n      return takeToken(this, pos, precise)\n    },\n\n    getLineTokens: function(line, precise) {\n      return takeToken(this, Pos(line), precise, true)\n    },\n\n    getTokenTypeAt: function(pos) {\n      pos = clipPos(this.doc, pos);\n      var styles = getLineStyles(this, getLine(this.doc, pos.line));\n      var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n      var type;\n      if (ch == 0) { type = styles[2]; }\n      else { for (;;) {\n        var mid = (before + after) >> 1;\n        if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n        else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n        else { type = styles[mid * 2 + 2]; break }\n      } }\n      var cut = type ? type.indexOf(\"overlay \") : -1;\n      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n    },\n\n    getModeAt: function(pos) {\n      var mode = this.doc.mode;\n      if (!mode.innerMode) { return mode }\n      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n    },\n\n    getHelper: function(pos, type) {\n      return this.getHelpers(pos, type)[0]\n    },\n\n    getHelpers: function(pos, type) {\n      var this$1 = this;\n\n      var found = [];\n      if (!helpers.hasOwnProperty(type)) { return found }\n      var help = helpers[type], mode = this.getModeAt(pos);\n      if (typeof mode[type] == \"string\") {\n        if (help[mode[type]]) { found.push(help[mode[type]]); }\n      } else if (mode[type]) {\n        for (var i = 0; i < mode[type].length; i++) {\n          var val = help[mode[type][i]];\n          if (val) { found.push(val); }\n        }\n      } else if (mode.helperType && help[mode.helperType]) {\n        found.push(help[mode.helperType]);\n      } else if (help[mode.name]) {\n        found.push(help[mode.name]);\n      }\n      for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n        var cur = help._global[i$1];\n        if (cur.pred(mode, this$1) && indexOf(found, cur.val) == -1)\n          { found.push(cur.val); }\n      }\n      return found\n    },\n\n    getStateAfter: function(line, precise) {\n      var doc = this.doc;\n      line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n      return getContextBefore(this, line + 1, precise).state\n    },\n\n    cursorCoords: function(start, mode) {\n      var pos, range$$1 = this.doc.sel.primary();\n      if (start == null) { pos = range$$1.head; }\n      else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n      else { pos = start ? range$$1.from() : range$$1.to(); }\n      return cursorCoords(this, pos, mode || \"page\")\n    },\n\n    charCoords: function(pos, mode) {\n      return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n    },\n\n    coordsChar: function(coords, mode) {\n      coords = fromCoordSystem(this, coords, mode || \"page\");\n      return coordsChar(this, coords.left, coords.top)\n    },\n\n    lineAtHeight: function(height, mode) {\n      height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n      return lineAtHeight(this.doc, height + this.display.viewOffset)\n    },\n    heightAtLine: function(line, mode, includeWidgets) {\n      var end = false, lineObj;\n      if (typeof line == \"number\") {\n        var last = this.doc.first + this.doc.size - 1;\n        if (line < this.doc.first) { line = this.doc.first; }\n        else if (line > last) { line = last; end = true; }\n        lineObj = getLine(this.doc, line);\n      } else {\n        lineObj = line;\n      }\n      return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n        (end ? this.doc.height - heightAtLine(lineObj) : 0)\n    },\n\n    defaultTextHeight: function() { return textHeight(this.display) },\n    defaultCharWidth: function() { return charWidth(this.display) },\n\n    getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n    addWidget: function(pos, node, scroll, vert, horiz) {\n      var display = this.display;\n      pos = cursorCoords(this, clipPos(this.doc, pos));\n      var top = pos.bottom, left = pos.left;\n      node.style.position = \"absolute\";\n      node.setAttribute(\"cm-ignore-events\", \"true\");\n      this.display.input.setUneditable(node);\n      display.sizer.appendChild(node);\n      if (vert == \"over\") {\n        top = pos.top;\n      } else if (vert == \"above\" || vert == \"near\") {\n        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n        // Default to positioning above (if specified and possible); otherwise default to positioning below\n        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n          { top = pos.top - node.offsetHeight; }\n        else if (pos.bottom + node.offsetHeight <= vspace)\n          { top = pos.bottom; }\n        if (left + node.offsetWidth > hspace)\n          { left = hspace - node.offsetWidth; }\n      }\n      node.style.top = top + \"px\";\n      node.style.left = node.style.right = \"\";\n      if (horiz == \"right\") {\n        left = display.sizer.clientWidth - node.offsetWidth;\n        node.style.right = \"0px\";\n      } else {\n        if (horiz == \"left\") { left = 0; }\n        else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n        node.style.left = left + \"px\";\n      }\n      if (scroll)\n        { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n    },\n\n    triggerOnKeyDown: methodOp(onKeyDown),\n    triggerOnKeyPress: methodOp(onKeyPress),\n    triggerOnKeyUp: onKeyUp,\n    triggerOnMouseDown: methodOp(onMouseDown),\n\n    execCommand: function(cmd) {\n      if (commands.hasOwnProperty(cmd))\n        { return commands[cmd].call(null, this) }\n    },\n\n    triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n    findPosH: function(from, amount, unit, visually) {\n      var this$1 = this;\n\n      var dir = 1;\n      if (amount < 0) { dir = -1; amount = -amount; }\n      var cur = clipPos(this.doc, from);\n      for (var i = 0; i < amount; ++i) {\n        cur = findPosH(this$1.doc, cur, dir, unit, visually);\n        if (cur.hitSide) { break }\n      }\n      return cur\n    },\n\n    moveH: methodOp(function(dir, unit) {\n      var this$1 = this;\n\n      this.extendSelectionsBy(function (range$$1) {\n        if (this$1.display.shift || this$1.doc.extend || range$$1.empty())\n          { return findPosH(this$1.doc, range$$1.head, dir, unit, this$1.options.rtlMoveVisually) }\n        else\n          { return dir < 0 ? range$$1.from() : range$$1.to() }\n      }, sel_move);\n    }),\n\n    deleteH: methodOp(function(dir, unit) {\n      var sel = this.doc.sel, doc = this.doc;\n      if (sel.somethingSelected())\n        { doc.replaceSelection(\"\", null, \"+delete\"); }\n      else\n        { deleteNearSelection(this, function (range$$1) {\n          var other = findPosH(doc, range$$1.head, dir, unit, false);\n          return dir < 0 ? {from: other, to: range$$1.head} : {from: range$$1.head, to: other}\n        }); }\n    }),\n\n    findPosV: function(from, amount, unit, goalColumn) {\n      var this$1 = this;\n\n      var dir = 1, x = goalColumn;\n      if (amount < 0) { dir = -1; amount = -amount; }\n      var cur = clipPos(this.doc, from);\n      for (var i = 0; i < amount; ++i) {\n        var coords = cursorCoords(this$1, cur, \"div\");\n        if (x == null) { x = coords.left; }\n        else { coords.left = x; }\n        cur = findPosV(this$1, coords, dir, unit);\n        if (cur.hitSide) { break }\n      }\n      return cur\n    },\n\n    moveV: methodOp(function(dir, unit) {\n      var this$1 = this;\n\n      var doc = this.doc, goals = [];\n      var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n      doc.extendSelectionsBy(function (range$$1) {\n        if (collapse)\n          { return dir < 0 ? range$$1.from() : range$$1.to() }\n        var headPos = cursorCoords(this$1, range$$1.head, \"div\");\n        if (range$$1.goalColumn != null) { headPos.left = range$$1.goalColumn; }\n        goals.push(headPos.left);\n        var pos = findPosV(this$1, headPos, dir, unit);\n        if (unit == \"page\" && range$$1 == doc.sel.primary())\n          { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n        return pos\n      }, sel_move);\n      if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n        { doc.sel.ranges[i].goalColumn = goals[i]; } }\n    }),\n\n    // Find the word at the given position (as returned by coordsChar).\n    findWordAt: function(pos) {\n      var doc = this.doc, line = getLine(doc, pos.line).text;\n      var start = pos.ch, end = pos.ch;\n      if (line) {\n        var helper = this.getHelper(pos, \"wordChars\");\n        if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n        var startChar = line.charAt(start);\n        var check = isWordChar(startChar, helper)\n          ? function (ch) { return isWordChar(ch, helper); }\n          : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n          : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n        while (start > 0 && check(line.charAt(start - 1))) { --start; }\n        while (end < line.length && check(line.charAt(end))) { ++end; }\n      }\n      return new Range(Pos(pos.line, start), Pos(pos.line, end))\n    },\n\n    toggleOverwrite: function(value) {\n      if (value != null && value == this.state.overwrite) { return }\n      if (this.state.overwrite = !this.state.overwrite)\n        { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n      else\n        { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n      signal(this, \"overwriteToggle\", this, this.state.overwrite);\n    },\n    hasFocus: function() { return this.display.input.getField() == activeElt() },\n    isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n    scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n    getScrollInfo: function() {\n      var scroller = this.display.scroller;\n      return {left: scroller.scrollLeft, top: scroller.scrollTop,\n              height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n              width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n              clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n    },\n\n    scrollIntoView: methodOp(function(range$$1, margin) {\n      if (range$$1 == null) {\n        range$$1 = {from: this.doc.sel.primary().head, to: null};\n        if (margin == null) { margin = this.options.cursorScrollMargin; }\n      } else if (typeof range$$1 == \"number\") {\n        range$$1 = {from: Pos(range$$1, 0), to: null};\n      } else if (range$$1.from == null) {\n        range$$1 = {from: range$$1, to: null};\n      }\n      if (!range$$1.to) { range$$1.to = range$$1.from; }\n      range$$1.margin = margin || 0;\n\n      if (range$$1.from.line != null) {\n        scrollToRange(this, range$$1);\n      } else {\n        scrollToCoordsRange(this, range$$1.from, range$$1.to, range$$1.margin);\n      }\n    }),\n\n    setSize: methodOp(function(width, height) {\n      var this$1 = this;\n\n      var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n      if (width != null) { this.display.wrapper.style.width = interpret(width); }\n      if (height != null) { this.display.wrapper.style.height = interpret(height); }\n      if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n      var lineNo$$1 = this.display.viewFrom;\n      this.doc.iter(lineNo$$1, this.display.viewTo, function (line) {\n        if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n          { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo$$1, \"widget\"); break } } }\n        ++lineNo$$1;\n      });\n      this.curOp.forceUpdate = true;\n      signal(this, \"refresh\", this);\n    }),\n\n    operation: function(f){return runInOp(this, f)},\n    startOperation: function(){return startOperation(this)},\n    endOperation: function(){return endOperation(this)},\n\n    refresh: methodOp(function() {\n      var oldHeight = this.display.cachedTextHeight;\n      regChange(this);\n      this.curOp.forceUpdate = true;\n      clearCaches(this);\n      scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n      updateGutterSpace(this);\n      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)\n        { estimateLineHeights(this); }\n      signal(this, \"refresh\", this);\n    }),\n\n    swapDoc: methodOp(function(doc) {\n      var old = this.doc;\n      old.cm = null;\n      attachDoc(this, doc);\n      clearCaches(this);\n      this.display.input.reset();\n      scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n      this.curOp.forceScroll = true;\n      signalLater(this, \"swapDoc\", this, old);\n      return old\n    }),\n\n    getInputField: function(){return this.display.input.getField()},\n    getWrapperElement: function(){return this.display.wrapper},\n    getScrollerElement: function(){return this.display.scroller},\n    getGutterElement: function(){return this.display.gutters}\n  };\n  eventMixin(CodeMirror);\n\n  CodeMirror.registerHelper = function(type, name, value) {\n    if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n    helpers[type][name] = value;\n  };\n  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n    CodeMirror.registerHelper(type, name, value);\n    helpers[type]._global.push({pred: predicate, val: value});\n  };\n};\n\n// Used for horizontal relative motion. Dir is -1 or 1 (left or\n// right), unit can be \"char\", \"column\" (like char, but doesn't\n// cross line boundaries), \"word\" (across next word), or \"group\" (to\n// the start of next group of word or non-word-non-whitespace\n// chars). The visually param controls whether, in right-to-left\n// text, direction 1 means to move towards the next index in the\n// string, or towards the character to the right of the current\n// position. The resulting position will have a hitSide=true\n// property if it reached the end of the document.\nfunction findPosH(doc, pos, dir, unit, visually) {\n  var oldPos = pos;\n  var origDir = dir;\n  var lineObj = getLine(doc, pos.line);\n  function findNextLine() {\n    var l = pos.line + dir;\n    if (l < doc.first || l >= doc.first + doc.size) { return false }\n    pos = new Pos(l, pos.ch, pos.sticky);\n    return lineObj = getLine(doc, l)\n  }\n  function moveOnce(boundToLine) {\n    var next;\n    if (visually) {\n      next = moveVisually(doc.cm, lineObj, pos, dir);\n    } else {\n      next = moveLogically(lineObj, pos, dir);\n    }\n    if (next == null) {\n      if (!boundToLine && findNextLine())\n        { pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir); }\n      else\n        { return false }\n    } else {\n      pos = next;\n    }\n    return true\n  }\n\n  if (unit == \"char\") {\n    moveOnce();\n  } else if (unit == \"column\") {\n    moveOnce(true);\n  } else if (unit == \"word\" || unit == \"group\") {\n    var sawType = null, group = unit == \"group\";\n    var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n    for (var first = true;; first = false) {\n      if (dir < 0 && !moveOnce(!first)) { break }\n      var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n      var type = isWordChar(cur, helper) ? \"w\"\n        : group && cur == \"\\n\" ? \"n\"\n        : !group || /\\s/.test(cur) ? null\n        : \"p\";\n      if (group && !first && !type) { type = \"s\"; }\n      if (sawType && sawType != type) {\n        if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n        break\n      }\n\n      if (type) { sawType = type; }\n      if (dir > 0 && !moveOnce(!first)) { break }\n    }\n  }\n  var result = skipAtomic(doc, pos, oldPos, origDir, true);\n  if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n  return result\n}\n\n// For relative vertical movement. Dir may be -1 or 1. Unit can be\n// \"page\" or \"line\". The resulting position will have a hitSide=true\n// property if it reached the end of the document.\nfunction findPosV(cm, pos, dir, unit) {\n  var doc = cm.doc, x = pos.left, y;\n  if (unit == \"page\") {\n    var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n    var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n    y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n  } else if (unit == \"line\") {\n    y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n  }\n  var target;\n  for (;;) {\n    target = coordsChar(cm, x, y);\n    if (!target.outside) { break }\n    if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n    y += dir * 5;\n  }\n  return target\n}\n\n// CONTENTEDITABLE INPUT STYLE\n\nvar ContentEditableInput = function(cm) {\n  this.cm = cm;\n  this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n  this.polling = new Delayed();\n  this.composing = null;\n  this.gracePeriod = false;\n  this.readDOMTimeout = null;\n};\n\nContentEditableInput.prototype.init = function (display) {\n    var this$1 = this;\n\n  var input = this, cm = input.cm;\n  var div = input.div = display.lineDiv;\n  disableBrowserMagic(div, cm.options.spellcheck);\n\n  on(div, \"paste\", function (e) {\n    if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n    // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n    if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n  });\n\n  on(div, \"compositionstart\", function (e) {\n    this$1.composing = {data: e.data, done: false};\n  });\n  on(div, \"compositionupdate\", function (e) {\n    if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n  });\n  on(div, \"compositionend\", function (e) {\n    if (this$1.composing) {\n      if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n      this$1.composing.done = true;\n    }\n  });\n\n  on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n  on(div, \"input\", function () {\n    if (!this$1.composing) { this$1.readFromDOMSoon(); }\n  });\n\n  function onCopyCut(e) {\n    if (signalDOMEvent(cm, e)) { return }\n    if (cm.somethingSelected()) {\n      setLastCopied({lineWise: false, text: cm.getSelections()});\n      if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n    } else if (!cm.options.lineWiseCopyCut) {\n      return\n    } else {\n      var ranges = copyableRanges(cm);\n      setLastCopied({lineWise: true, text: ranges.text});\n      if (e.type == \"cut\") {\n        cm.operation(function () {\n          cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n          cm.replaceSelection(\"\", null, \"cut\");\n        });\n      }\n    }\n    if (e.clipboardData) {\n      e.clipboardData.clearData();\n      var content = lastCopied.text.join(\"\\n\");\n      // iOS exposes the clipboard API, but seems to discard content inserted into it\n      e.clipboardData.setData(\"Text\", content);\n      if (e.clipboardData.getData(\"Text\") == content) {\n        e.preventDefault();\n        return\n      }\n    }\n    // Old-fashioned briefly-focus-a-textarea hack\n    var kludge = hiddenTextarea(), te = kludge.firstChild;\n    cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n    te.value = lastCopied.text.join(\"\\n\");\n    var hadFocus = document.activeElement;\n    selectInput(te);\n    setTimeout(function () {\n      cm.display.lineSpace.removeChild(kludge);\n      hadFocus.focus();\n      if (hadFocus == div) { input.showPrimarySelection(); }\n    }, 50);\n  }\n  on(div, \"copy\", onCopyCut);\n  on(div, \"cut\", onCopyCut);\n};\n\nContentEditableInput.prototype.prepareSelection = function () {\n  var result = prepareSelection(this.cm, false);\n  result.focus = this.cm.state.focused;\n  return result\n};\n\nContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n  if (!info || !this.cm.display.view.length) { return }\n  if (info.focus || takeFocus) { this.showPrimarySelection(); }\n  this.showMultipleSelections(info);\n};\n\nContentEditableInput.prototype.showPrimarySelection = function () {\n  var sel = window.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n  var from = prim.from(), to = prim.to();\n\n  if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n    sel.removeAllRanges();\n    return\n  }\n\n  var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n  var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n  if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n      cmp(minPos(curAnchor, curFocus), from) == 0 &&\n      cmp(maxPos(curAnchor, curFocus), to) == 0)\n    { return }\n\n  var view = cm.display.view;\n  var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n      {node: view[0].measure.map[2], offset: 0};\n  var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n  if (!end) {\n    var measure = view[view.length - 1].measure;\n    var map$$1 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n    end = {node: map$$1[map$$1.length - 1], offset: map$$1[map$$1.length - 2] - map$$1[map$$1.length - 3]};\n  }\n\n  if (!start || !end) {\n    sel.removeAllRanges();\n    return\n  }\n\n  var old = sel.rangeCount && sel.getRangeAt(0), rng;\n  try { rng = range(start.node, start.offset, end.offset, end.node); }\n  catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n  if (rng) {\n    if (!gecko && cm.state.focused) {\n      sel.collapse(start.node, start.offset);\n      if (!rng.collapsed) {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n    } else {\n      sel.removeAllRanges();\n      sel.addRange(rng);\n    }\n    if (old && sel.anchorNode == null) { sel.addRange(old); }\n    else if (gecko) { this.startGracePeriod(); }\n  }\n  this.rememberSelection();\n};\n\nContentEditableInput.prototype.startGracePeriod = function () {\n    var this$1 = this;\n\n  clearTimeout(this.gracePeriod);\n  this.gracePeriod = setTimeout(function () {\n    this$1.gracePeriod = false;\n    if (this$1.selectionChanged())\n      { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n  }, 20);\n};\n\nContentEditableInput.prototype.showMultipleSelections = function (info) {\n  removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n  removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n};\n\nContentEditableInput.prototype.rememberSelection = function () {\n  var sel = window.getSelection();\n  this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n  this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n};\n\nContentEditableInput.prototype.selectionInEditor = function () {\n  var sel = window.getSelection();\n  if (!sel.rangeCount) { return false }\n  var node = sel.getRangeAt(0).commonAncestorContainer;\n  return contains(this.div, node)\n};\n\nContentEditableInput.prototype.focus = function () {\n  if (this.cm.options.readOnly != \"nocursor\") {\n    if (!this.selectionInEditor())\n      { this.showSelection(this.prepareSelection(), true); }\n    this.div.focus();\n  }\n};\nContentEditableInput.prototype.blur = function () { this.div.blur(); };\nContentEditableInput.prototype.getField = function () { return this.div };\n\nContentEditableInput.prototype.supportsTouch = function () { return true };\n\nContentEditableInput.prototype.receivedFocus = function () {\n  var input = this;\n  if (this.selectionInEditor())\n    { this.pollSelection(); }\n  else\n    { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n  function poll() {\n    if (input.cm.state.focused) {\n      input.pollSelection();\n      input.polling.set(input.cm.options.pollInterval, poll);\n    }\n  }\n  this.polling.set(this.cm.options.pollInterval, poll);\n};\n\nContentEditableInput.prototype.selectionChanged = function () {\n  var sel = window.getSelection();\n  return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n    sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n};\n\nContentEditableInput.prototype.pollSelection = function () {\n  if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n  var sel = window.getSelection(), cm = this.cm;\n  // On Android Chrome (version 56, at least), backspacing into an\n  // uneditable block element will put the cursor in that element,\n  // and then, because it's not editable, hide the virtual keyboard.\n  // Because Android doesn't allow us to actually detect backspace\n  // presses in a sane way, this code checks for when that happens\n  // and simulates a backspace press in this case.\n  if (android && chrome && this.cm.options.gutters.length && isInGutter(sel.anchorNode)) {\n    this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n    this.blur();\n    this.focus();\n    return\n  }\n  if (this.composing) { return }\n  this.rememberSelection();\n  var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n  var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n  if (anchor && head) { runInOp(cm, function () {\n    setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n    if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n  }); }\n};\n\nContentEditableInput.prototype.pollContent = function () {\n  if (this.readDOMTimeout != null) {\n    clearTimeout(this.readDOMTimeout);\n    this.readDOMTimeout = null;\n  }\n\n  var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n  var from = sel.from(), to = sel.to();\n  if (from.ch == 0 && from.line > cm.firstLine())\n    { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n  if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n    { to = Pos(to.line + 1, 0); }\n  if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n  var fromIndex, fromLine, fromNode;\n  if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n    fromLine = lineNo(display.view[0].line);\n    fromNode = display.view[0].node;\n  } else {\n    fromLine = lineNo(display.view[fromIndex].line);\n    fromNode = display.view[fromIndex - 1].node.nextSibling;\n  }\n  var toIndex = findViewIndex(cm, to.line);\n  var toLine, toNode;\n  if (toIndex == display.view.length - 1) {\n    toLine = display.viewTo - 1;\n    toNode = display.lineDiv.lastChild;\n  } else {\n    toLine = lineNo(display.view[toIndex + 1].line) - 1;\n    toNode = display.view[toIndex + 1].node.previousSibling;\n  }\n\n  if (!fromNode) { return false }\n  var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n  var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n  while (newText.length > 1 && oldText.length > 1) {\n    if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n    else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n    else { break }\n  }\n\n  var cutFront = 0, cutEnd = 0;\n  var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n  while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n    { ++cutFront; }\n  var newBot = lst(newText), oldBot = lst(oldText);\n  var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                           oldBot.length - (oldText.length == 1 ? cutFront : 0));\n  while (cutEnd < maxCutEnd &&\n         newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n    { ++cutEnd; }\n  // Try to move start of change to start of selection if ambiguous\n  if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n    while (cutFront && cutFront > from.ch &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n      cutFront--;\n      cutEnd++;\n    }\n  }\n\n  newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n  newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n  var chFrom = Pos(fromLine, cutFront);\n  var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n  if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n    replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n    return true\n  }\n};\n\nContentEditableInput.prototype.ensurePolled = function () {\n  this.forceCompositionEnd();\n};\nContentEditableInput.prototype.reset = function () {\n  this.forceCompositionEnd();\n};\nContentEditableInput.prototype.forceCompositionEnd = function () {\n  if (!this.composing) { return }\n  clearTimeout(this.readDOMTimeout);\n  this.composing = null;\n  this.updateFromDOM();\n  this.div.blur();\n  this.div.focus();\n};\nContentEditableInput.prototype.readFromDOMSoon = function () {\n    var this$1 = this;\n\n  if (this.readDOMTimeout != null) { return }\n  this.readDOMTimeout = setTimeout(function () {\n    this$1.readDOMTimeout = null;\n    if (this$1.composing) {\n      if (this$1.composing.done) { this$1.composing = null; }\n      else { return }\n    }\n    this$1.updateFromDOM();\n  }, 80);\n};\n\nContentEditableInput.prototype.updateFromDOM = function () {\n    var this$1 = this;\n\n  if (this.cm.isReadOnly() || !this.pollContent())\n    { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n};\n\nContentEditableInput.prototype.setUneditable = function (node) {\n  node.contentEditable = \"false\";\n};\n\nContentEditableInput.prototype.onKeyPress = function (e) {\n  if (e.charCode == 0) { return }\n  e.preventDefault();\n  if (!this.cm.isReadOnly())\n    { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n};\n\nContentEditableInput.prototype.readOnlyChanged = function (val) {\n  this.div.contentEditable = String(val != \"nocursor\");\n};\n\nContentEditableInput.prototype.onContextMenu = function () {};\nContentEditableInput.prototype.resetPosition = function () {};\n\nContentEditableInput.prototype.needsContentAttribute = true;\n\nfunction posToDOM(cm, pos) {\n  var view = findViewForLine(cm, pos.line);\n  if (!view || view.hidden) { return null }\n  var line = getLine(cm.doc, pos.line);\n  var info = mapFromLineView(view, line, pos.line);\n\n  var order = getOrder(line, cm.doc.direction), side = \"left\";\n  if (order) {\n    var partPos = getBidiPartAt(order, pos.ch);\n    side = partPos % 2 ? \"right\" : \"left\";\n  }\n  var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n  result.offset = result.collapse == \"right\" ? result.end : result.start;\n  return result\n}\n\nfunction isInGutter(node) {\n  for (var scan = node; scan; scan = scan.parentNode)\n    { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n  return false\n}\n\nfunction badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\nfunction domTextBetween(cm, from, to, fromLine, toLine) {\n  var text = \"\", closing = false, lineSep = cm.doc.lineSeparator();\n  function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n  function close() {\n    if (closing) {\n      text += lineSep;\n      closing = false;\n    }\n  }\n  function addText(str) {\n    if (str) {\n      close();\n      text += str;\n    }\n  }\n  function walk(node) {\n    if (node.nodeType == 1) {\n      var cmText = node.getAttribute(\"cm-text\");\n      if (cmText != null) {\n        addText(cmText || node.textContent.replace(/\\u200b/g, \"\"));\n        return\n      }\n      var markerID = node.getAttribute(\"cm-marker\"), range$$1;\n      if (markerID) {\n        var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n        if (found.length && (range$$1 = found[0].find(0)))\n          { addText(getBetween(cm.doc, range$$1.from, range$$1.to).join(lineSep)); }\n        return\n      }\n      if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n      var isBlock = /^(pre|div|p)$/i.test(node.nodeName);\n      if (isBlock) { close(); }\n      for (var i = 0; i < node.childNodes.length; i++)\n        { walk(node.childNodes[i]); }\n      if (isBlock) { closing = true; }\n    } else if (node.nodeType == 3) {\n      addText(node.nodeValue);\n    }\n  }\n  for (;;) {\n    walk(from);\n    if (from == to) { break }\n    from = from.nextSibling;\n  }\n  return text\n}\n\nfunction domToPos(cm, node, offset) {\n  var lineNode;\n  if (node == cm.display.lineDiv) {\n    lineNode = cm.display.lineDiv.childNodes[offset];\n    if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n    node = null; offset = 0;\n  } else {\n    for (lineNode = node;; lineNode = lineNode.parentNode) {\n      if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n      if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n    }\n  }\n  for (var i = 0; i < cm.display.view.length; i++) {\n    var lineView = cm.display.view[i];\n    if (lineView.node == lineNode)\n      { return locateNodeInLineView(lineView, node, offset) }\n  }\n}\n\nfunction locateNodeInLineView(lineView, node, offset) {\n  var wrapper = lineView.text.firstChild, bad = false;\n  if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n  if (node == wrapper) {\n    bad = true;\n    node = wrapper.childNodes[offset];\n    offset = 0;\n    if (!node) {\n      var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n      return badPos(Pos(lineNo(line), line.text.length), bad)\n    }\n  }\n\n  var textNode = node.nodeType == 3 ? node : null, topNode = node;\n  if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n    textNode = node.firstChild;\n    if (offset) { offset = textNode.nodeValue.length; }\n  }\n  while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n  var measure = lineView.measure, maps = measure.maps;\n\n  function find(textNode, topNode, offset) {\n    for (var i = -1; i < (maps ? maps.length : 0); i++) {\n      var map$$1 = i < 0 ? measure.map : maps[i];\n      for (var j = 0; j < map$$1.length; j += 3) {\n        var curNode = map$$1[j + 2];\n        if (curNode == textNode || curNode == topNode) {\n          var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n          var ch = map$$1[j] + offset;\n          if (offset < 0 || curNode != textNode) { ch = map$$1[j + (offset ? 1 : 0)]; }\n          return Pos(line, ch)\n        }\n      }\n    }\n  }\n  var found = find(textNode, topNode, offset);\n  if (found) { return badPos(found, bad) }\n\n  // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n  for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n    found = find(after, after.firstChild, 0);\n    if (found)\n      { return badPos(Pos(found.line, found.ch - dist), bad) }\n    else\n      { dist += after.textContent.length; }\n  }\n  for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n    found = find(before, before.firstChild, -1);\n    if (found)\n      { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n    else\n      { dist$1 += before.textContent.length; }\n  }\n}\n\n// TEXTAREA INPUT STYLE\n\nvar TextareaInput = function(cm) {\n  this.cm = cm;\n  // See input.poll and input.reset\n  this.prevInput = \"\";\n\n  // Flag that indicates whether we expect input to appear real soon\n  // now (after some event like 'keypress' or 'input') and are\n  // polling intensively.\n  this.pollingFast = false;\n  // Self-resetting timeout for the poller\n  this.polling = new Delayed();\n  // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n  this.hasSelection = false;\n  this.composing = null;\n};\n\nTextareaInput.prototype.init = function (display) {\n    var this$1 = this;\n\n  var input = this, cm = this.cm;\n\n  // Wraps and hides input textarea\n  var div = this.wrapper = hiddenTextarea();\n  // The semihidden textarea that is focused when the editor is\n  // focused, and receives input.\n  var te = this.textarea = div.firstChild;\n  display.wrapper.insertBefore(div, display.wrapper.firstChild);\n\n  // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n  if (ios) { te.style.width = \"0px\"; }\n\n  on(te, \"input\", function () {\n    if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n    input.poll();\n  });\n\n  on(te, \"paste\", function (e) {\n    if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n    cm.state.pasteIncoming = true;\n    input.fastPoll();\n  });\n\n  function prepareCopyCut(e) {\n    if (signalDOMEvent(cm, e)) { return }\n    if (cm.somethingSelected()) {\n      setLastCopied({lineWise: false, text: cm.getSelections()});\n    } else if (!cm.options.lineWiseCopyCut) {\n      return\n    } else {\n      var ranges = copyableRanges(cm);\n      setLastCopied({lineWise: true, text: ranges.text});\n      if (e.type == \"cut\") {\n        cm.setSelections(ranges.ranges, null, sel_dontScroll);\n      } else {\n        input.prevInput = \"\";\n        te.value = ranges.text.join(\"\\n\");\n        selectInput(te);\n      }\n    }\n    if (e.type == \"cut\") { cm.state.cutIncoming = true; }\n  }\n  on(te, \"cut\", prepareCopyCut);\n  on(te, \"copy\", prepareCopyCut);\n\n  on(display.scroller, \"paste\", function (e) {\n    if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n    cm.state.pasteIncoming = true;\n    input.focus();\n  });\n\n  // Prevent normal selection in the editor (we handle our own)\n  on(display.lineSpace, \"selectstart\", function (e) {\n    if (!eventInWidget(display, e)) { e_preventDefault(e); }\n  });\n\n  on(te, \"compositionstart\", function () {\n    var start = cm.getCursor(\"from\");\n    if (input.composing) { input.composing.range.clear(); }\n    input.composing = {\n      start: start,\n      range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n    };\n  });\n  on(te, \"compositionend\", function () {\n    if (input.composing) {\n      input.poll();\n      input.composing.range.clear();\n      input.composing = null;\n    }\n  });\n};\n\nTextareaInput.prototype.prepareSelection = function () {\n  // Redraw the selection and/or cursor\n  var cm = this.cm, display = cm.display, doc = cm.doc;\n  var result = prepareSelection(cm);\n\n  // Move the hidden textarea near the cursor to prevent scrolling artifacts\n  if (cm.options.moveInputWithCursor) {\n    var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n    var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n    result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                        headPos.top + lineOff.top - wrapOff.top));\n    result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                         headPos.left + lineOff.left - wrapOff.left));\n  }\n\n  return result\n};\n\nTextareaInput.prototype.showSelection = function (drawn) {\n  var cm = this.cm, display = cm.display;\n  removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n  removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n  if (drawn.teTop != null) {\n    this.wrapper.style.top = drawn.teTop + \"px\";\n    this.wrapper.style.left = drawn.teLeft + \"px\";\n  }\n};\n\n// Reset the input to correspond to the selection (or to be empty,\n// when not typing and nothing is selected)\nTextareaInput.prototype.reset = function (typing) {\n  if (this.contextMenuPending || this.composing) { return }\n  var cm = this.cm;\n  if (cm.somethingSelected()) {\n    this.prevInput = \"\";\n    var content = cm.getSelection();\n    this.textarea.value = content;\n    if (cm.state.focused) { selectInput(this.textarea); }\n    if (ie && ie_version >= 9) { this.hasSelection = content; }\n  } else if (!typing) {\n    this.prevInput = this.textarea.value = \"\";\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n  }\n};\n\nTextareaInput.prototype.getField = function () { return this.textarea };\n\nTextareaInput.prototype.supportsTouch = function () { return false };\n\nTextareaInput.prototype.focus = function () {\n  if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n    try { this.textarea.focus(); }\n    catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n  }\n};\n\nTextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\nTextareaInput.prototype.resetPosition = function () {\n  this.wrapper.style.top = this.wrapper.style.left = 0;\n};\n\nTextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n// Poll for input changes, using the normal rate of polling. This\n// runs as long as the editor is focused.\nTextareaInput.prototype.slowPoll = function () {\n    var this$1 = this;\n\n  if (this.pollingFast) { return }\n  this.polling.set(this.cm.options.pollInterval, function () {\n    this$1.poll();\n    if (this$1.cm.state.focused) { this$1.slowPoll(); }\n  });\n};\n\n// When an event has just come in that is likely to add or change\n// something in the input textarea, we poll faster, to ensure that\n// the change appears on the screen quickly.\nTextareaInput.prototype.fastPoll = function () {\n  var missed = false, input = this;\n  input.pollingFast = true;\n  function p() {\n    var changed = input.poll();\n    if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n    else {input.pollingFast = false; input.slowPoll();}\n  }\n  input.polling.set(20, p);\n};\n\n// Read input from the textarea, and update the document to match.\n// When something is selected, it is present in the textarea, and\n// selected (unless it is huge, in which case a placeholder is\n// used). When nothing is selected, the cursor sits after previously\n// seen text (can be empty), which is stored in prevInput (we must\n// not reset the textarea when typing, because that breaks IME).\nTextareaInput.prototype.poll = function () {\n    var this$1 = this;\n\n  var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n  // Since this is called a *lot*, try to bail out as cheaply as\n  // possible when it is clear that nothing happened. hasSelection\n  // will be the case when there is a lot of text in the textarea,\n  // in which case reading its value would be expensive.\n  if (this.contextMenuPending || !cm.state.focused ||\n      (hasSelection(input) && !prevInput && !this.composing) ||\n      cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n    { return false }\n\n  var text = input.value;\n  // If nothing changed, bail.\n  if (text == prevInput && !cm.somethingSelected()) { return false }\n  // Work around nonsensical selection resetting in IE9/10, and\n  // inexplicable appearance of private area unicode characters on\n  // some key combos in Mac (#2689).\n  if (ie && ie_version >= 9 && this.hasSelection === text ||\n      mac && /[\\uf700-\\uf7ff]/.test(text)) {\n    cm.display.input.reset();\n    return false\n  }\n\n  if (cm.doc.sel == cm.display.selForContextMenu) {\n    var first = text.charCodeAt(0);\n    if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n    if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n  }\n  // Find the part of the input that is actually new\n  var same = 0, l = Math.min(prevInput.length, text.length);\n  while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n  runInOp(cm, function () {\n    applyTextInput(cm, text.slice(same), prevInput.length - same,\n                   null, this$1.composing ? \"*compose\" : null);\n\n    // Don't leave long text in the textarea, since it makes further polling slow\n    if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n    else { this$1.prevInput = text; }\n\n    if (this$1.composing) {\n      this$1.composing.range.clear();\n      this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                         {className: \"CodeMirror-composing\"});\n    }\n  });\n  return true\n};\n\nTextareaInput.prototype.ensurePolled = function () {\n  if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n};\n\nTextareaInput.prototype.onKeyPress = function () {\n  if (ie && ie_version >= 9) { this.hasSelection = null; }\n  this.fastPoll();\n};\n\nTextareaInput.prototype.onContextMenu = function (e) {\n  var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n  var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n  if (!pos || presto) { return } // Opera is difficult.\n\n  // Reset the current text selection only if the click is done outside of the selection\n  // and 'resetSelectionOnContextMenu' option is true.\n  var reset = cm.options.resetSelectionOnContextMenu;\n  if (reset && cm.doc.sel.contains(pos) == -1)\n    { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n  var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n  input.wrapper.style.cssText = \"position: absolute\";\n  var wrapperBox = input.wrapper.getBoundingClientRect();\n  te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n  var oldScrollY;\n  if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\n  display.input.focus();\n  if (webkit) { window.scrollTo(null, oldScrollY); }\n  display.input.reset();\n  // Adds \"Select all\" to context menu in FF\n  if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n  input.contextMenuPending = true;\n  display.selForContextMenu = cm.doc.sel;\n  clearTimeout(display.detectingSelectAll);\n\n  // Select-all will be greyed out if there's nothing to select, so\n  // this adds a zero-width space so that we can later check whether\n  // it got selected.\n  function prepareSelectAllHack() {\n    if (te.selectionStart != null) {\n      var selected = cm.somethingSelected();\n      var extval = \"\\u200b\" + (selected ? te.value : \"\");\n      te.value = \"\\u21da\"; // Used to catch context-menu undo\n      te.value = extval;\n      input.prevInput = selected ? \"\" : \"\\u200b\";\n      te.selectionStart = 1; te.selectionEnd = extval.length;\n      // Re-set this, in case some other handler touched the\n      // selection in the meantime.\n      display.selForContextMenu = cm.doc.sel;\n    }\n  }\n  function rehide() {\n    input.contextMenuPending = false;\n    input.wrapper.style.cssText = oldWrapperCSS;\n    te.style.cssText = oldCSS;\n    if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n    // Try to detect the user choosing select-all\n    if (te.selectionStart != null) {\n      if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n      var i = 0, poll = function () {\n        if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n            te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n          operation(cm, selectAll)(cm);\n        } else if (i++ < 10) {\n          display.detectingSelectAll = setTimeout(poll, 500);\n        } else {\n          display.selForContextMenu = null;\n          display.input.reset();\n        }\n      };\n      display.detectingSelectAll = setTimeout(poll, 200);\n    }\n  }\n\n  if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n  if (captureRightClick) {\n    e_stop(e);\n    var mouseup = function () {\n      off(window, \"mouseup\", mouseup);\n      setTimeout(rehide, 20);\n    };\n    on(window, \"mouseup\", mouseup);\n  } else {\n    setTimeout(rehide, 50);\n  }\n};\n\nTextareaInput.prototype.readOnlyChanged = function (val) {\n  if (!val) { this.reset(); }\n  this.textarea.disabled = val == \"nocursor\";\n};\n\nTextareaInput.prototype.setUneditable = function () {};\n\nTextareaInput.prototype.needsContentAttribute = false;\n\nfunction fromTextArea(textarea, options) {\n  options = options ? copyObj(options) : {};\n  options.value = textarea.value;\n  if (!options.tabindex && textarea.tabIndex)\n    { options.tabindex = textarea.tabIndex; }\n  if (!options.placeholder && textarea.placeholder)\n    { options.placeholder = textarea.placeholder; }\n  // Set autofocus to true if this textarea is focused, or if it has\n  // autofocus and no other element is focused.\n  if (options.autofocus == null) {\n    var hasFocus = activeElt();\n    options.autofocus = hasFocus == textarea ||\n      textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n  }\n\n  function save() {textarea.value = cm.getValue();}\n\n  var realSubmit;\n  if (textarea.form) {\n    on(textarea.form, \"submit\", save);\n    // Deplorable hack to make the submit method do the right thing.\n    if (!options.leaveSubmitMethodAlone) {\n      var form = textarea.form;\n      realSubmit = form.submit;\n      try {\n        var wrappedSubmit = form.submit = function () {\n          save();\n          form.submit = realSubmit;\n          form.submit();\n          form.submit = wrappedSubmit;\n        };\n      } catch(e) {}\n    }\n  }\n\n  options.finishInit = function (cm) {\n    cm.save = save;\n    cm.getTextArea = function () { return textarea; };\n    cm.toTextArea = function () {\n      cm.toTextArea = isNaN; // Prevent this from being ran twice\n      save();\n      textarea.parentNode.removeChild(cm.getWrapperElement());\n      textarea.style.display = \"\";\n      if (textarea.form) {\n        off(textarea.form, \"submit\", save);\n        if (typeof textarea.form.submit == \"function\")\n          { textarea.form.submit = realSubmit; }\n      }\n    };\n  };\n\n  textarea.style.display = \"none\";\n  var cm = CodeMirror$1(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n    options);\n  return cm\n}\n\nfunction addLegacyProps(CodeMirror) {\n  CodeMirror.off = off;\n  CodeMirror.on = on;\n  CodeMirror.wheelEventPixels = wheelEventPixels;\n  CodeMirror.Doc = Doc;\n  CodeMirror.splitLines = splitLinesAuto;\n  CodeMirror.countColumn = countColumn;\n  CodeMirror.findColumn = findColumn;\n  CodeMirror.isWordChar = isWordCharBasic;\n  CodeMirror.Pass = Pass;\n  CodeMirror.signal = signal;\n  CodeMirror.Line = Line;\n  CodeMirror.changeEnd = changeEnd;\n  CodeMirror.scrollbarModel = scrollbarModel;\n  CodeMirror.Pos = Pos;\n  CodeMirror.cmpPos = cmp;\n  CodeMirror.modes = modes;\n  CodeMirror.mimeModes = mimeModes;\n  CodeMirror.resolveMode = resolveMode;\n  CodeMirror.getMode = getMode;\n  CodeMirror.modeExtensions = modeExtensions;\n  CodeMirror.extendMode = extendMode;\n  CodeMirror.copyState = copyState;\n  CodeMirror.startState = startState;\n  CodeMirror.innerMode = innerMode;\n  CodeMirror.commands = commands;\n  CodeMirror.keyMap = keyMap;\n  CodeMirror.keyName = keyName;\n  CodeMirror.isModifierKey = isModifierKey;\n  CodeMirror.lookupKey = lookupKey;\n  CodeMirror.normalizeKeyMap = normalizeKeyMap;\n  CodeMirror.StringStream = StringStream;\n  CodeMirror.SharedTextMarker = SharedTextMarker;\n  CodeMirror.TextMarker = TextMarker;\n  CodeMirror.LineWidget = LineWidget;\n  CodeMirror.e_preventDefault = e_preventDefault;\n  CodeMirror.e_stopPropagation = e_stopPropagation;\n  CodeMirror.e_stop = e_stop;\n  CodeMirror.addClass = addClass;\n  CodeMirror.contains = contains;\n  CodeMirror.rmClass = rmClass;\n  CodeMirror.keyNames = keyNames;\n}\n\n// EDITOR CONSTRUCTOR\n\ndefineOptions(CodeMirror$1);\n\naddEditorMethods(CodeMirror$1);\n\n// Set up methods on CodeMirror's prototype to redirect to the editor's document.\nvar dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\nfor (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n  { CodeMirror$1.prototype[prop] = (function(method) {\n    return function() {return method.apply(this.doc, arguments)}\n  })(Doc.prototype[prop]); } }\n\neventMixin(Doc);\n\n// INPUT HANDLING\n\nCodeMirror$1.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n// MODE DEFINITION AND QUERYING\n\n// Extra arguments are stored as the mode's dependencies, which is\n// used by (legacy) mechanisms like loadmode.js to automatically\n// load a mode. (Preferred mechanism is the require/define calls.)\nCodeMirror$1.defineMode = function(name/*, mode, */) {\n  if (!CodeMirror$1.defaults.mode && name != \"null\") { CodeMirror$1.defaults.mode = name; }\n  defineMode.apply(this, arguments);\n};\n\nCodeMirror$1.defineMIME = defineMIME;\n\n// Minimal default mode.\nCodeMirror$1.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\nCodeMirror$1.defineMIME(\"text/plain\", \"null\");\n\n// EXTENSIONS\n\nCodeMirror$1.defineExtension = function (name, func) {\n  CodeMirror$1.prototype[name] = func;\n};\nCodeMirror$1.defineDocExtension = function (name, func) {\n  Doc.prototype[name] = func;\n};\n\nCodeMirror$1.fromTextArea = fromTextArea;\n\naddLegacyProps(CodeMirror$1);\n\nCodeMirror$1.version = \"5.35.0\";\n\nreturn CodeMirror$1;\n\n})));\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"css\", function(config, parserConfig) {\n  var inline = parserConfig.inline\n  if (!parserConfig.propertyKeywords) parserConfig = CodeMirror.resolveMode(\"text/css\");\n\n  var indentUnit = config.indentUnit,\n      tokenHooks = parserConfig.tokenHooks,\n      documentTypes = parserConfig.documentTypes || {},\n      mediaTypes = parserConfig.mediaTypes || {},\n      mediaFeatures = parserConfig.mediaFeatures || {},\n      mediaValueKeywords = parserConfig.mediaValueKeywords || {},\n      propertyKeywords = parserConfig.propertyKeywords || {},\n      nonStandardPropertyKeywords = parserConfig.nonStandardPropertyKeywords || {},\n      fontProperties = parserConfig.fontProperties || {},\n      counterDescriptors = parserConfig.counterDescriptors || {},\n      colorKeywords = parserConfig.colorKeywords || {},\n      valueKeywords = parserConfig.valueKeywords || {},\n      allowNested = parserConfig.allowNested,\n      lineComment = parserConfig.lineComment,\n      supportsAtComponent = parserConfig.supportsAtComponent === true;\n\n  var type, override;\n  function ret(style, tp) { type = tp; return style; }\n\n  // Tokenizers\n\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (tokenHooks[ch]) {\n      var result = tokenHooks[ch](stream, state);\n      if (result !== false) return result;\n    }\n    if (ch == \"@\") {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"def\", stream.current());\n    } else if (ch == \"=\" || (ch == \"~\" || ch == \"|\") && stream.eat(\"=\")) {\n      return ret(null, \"compare\");\n    } else if (ch == \"\\\"\" || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \"#\") {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"atom\", \"hash\");\n    } else if (ch == \"!\") {\n      stream.match(/^\\s*\\w*/);\n      return ret(\"keyword\", \"important\");\n    } else if (/\\d/.test(ch) || ch == \".\" && stream.eat(/\\d/)) {\n      stream.eatWhile(/[\\w.%]/);\n      return ret(\"number\", \"unit\");\n    } else if (ch === \"-\") {\n      if (/[\\d.]/.test(stream.peek())) {\n        stream.eatWhile(/[\\w.%]/);\n        return ret(\"number\", \"unit\");\n      } else if (stream.match(/^-[\\w\\\\\\-]+/)) {\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        if (stream.match(/^\\s*:/, false))\n          return ret(\"variable-2\", \"variable-definition\");\n        return ret(\"variable-2\", \"variable\");\n      } else if (stream.match(/^\\w+-/)) {\n        return ret(\"meta\", \"meta\");\n      }\n    } else if (/[,+>*\\/]/.test(ch)) {\n      return ret(null, \"select-op\");\n    } else if (ch == \".\" && stream.match(/^-?[_a-z][_a-z0-9-]*/i)) {\n      return ret(\"qualifier\", \"qualifier\");\n    } else if (/[:;{}\\[\\]\\(\\)]/.test(ch)) {\n      return ret(null, ch);\n    } else if (((ch == \"u\" || ch == \"U\") && stream.match(/rl(-prefix)?\\(/i)) ||\n               ((ch == \"d\" || ch == \"D\") && stream.match(\"omain(\", true, true)) ||\n               ((ch == \"r\" || ch == \"R\") && stream.match(\"egexp(\", true, true))) {\n      stream.backUp(1);\n      state.tokenize = tokenParenthesized;\n      return ret(\"property\", \"word\");\n    } else if (/[\\w\\\\\\-]/.test(ch)) {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"property\", \"word\");\n    } else {\n      return ret(null, null);\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == quote && !escaped) {\n          if (quote == \")\") stream.backUp(1);\n          break;\n        }\n        escaped = !escaped && ch == \"\\\\\";\n      }\n      if (ch == quote || !escaped && quote != \")\") state.tokenize = null;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenParenthesized(stream, state) {\n    stream.next(); // Must be '('\n    if (!stream.match(/\\s*[\\\"\\')]/, false))\n      state.tokenize = tokenString(\")\");\n    else\n      state.tokenize = null;\n    return ret(null, \"(\");\n  }\n\n  // Context management\n\n  function Context(type, indent, prev) {\n    this.type = type;\n    this.indent = indent;\n    this.prev = prev;\n  }\n\n  function pushContext(state, stream, type, indent) {\n    state.context = new Context(type, stream.indentation() + (indent === false ? 0 : indentUnit), state.context);\n    return type;\n  }\n\n  function popContext(state) {\n    if (state.context.prev)\n      state.context = state.context.prev;\n    return state.context.type;\n  }\n\n  function pass(type, stream, state) {\n    return states[state.context.type](type, stream, state);\n  }\n  function popAndPass(type, stream, state, n) {\n    for (var i = n || 1; i > 0; i--)\n      state.context = state.context.prev;\n    return pass(type, stream, state);\n  }\n\n  // Parser\n\n  function wordAsValue(stream) {\n    var word = stream.current().toLowerCase();\n    if (valueKeywords.hasOwnProperty(word))\n      override = \"atom\";\n    else if (colorKeywords.hasOwnProperty(word))\n      override = \"keyword\";\n    else\n      override = \"variable\";\n  }\n\n  var states = {};\n\n  states.top = function(type, stream, state) {\n    if (type == \"{\") {\n      return pushContext(state, stream, \"block\");\n    } else if (type == \"}\" && state.context.prev) {\n      return popContext(state);\n    } else if (supportsAtComponent && /@component/i.test(type)) {\n      return pushContext(state, stream, \"atComponentBlock\");\n    } else if (/^@(-moz-)?document$/i.test(type)) {\n      return pushContext(state, stream, \"documentTypes\");\n    } else if (/^@(media|supports|(-moz-)?document|import)$/i.test(type)) {\n      return pushContext(state, stream, \"atBlock\");\n    } else if (/^@(font-face|counter-style)/i.test(type)) {\n      state.stateArg = type;\n      return \"restricted_atBlock_before\";\n    } else if (/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(type)) {\n      return \"keyframes\";\n    } else if (type && type.charAt(0) == \"@\") {\n      return pushContext(state, stream, \"at\");\n    } else if (type == \"hash\") {\n      override = \"builtin\";\n    } else if (type == \"word\") {\n      override = \"tag\";\n    } else if (type == \"variable-definition\") {\n      return \"maybeprop\";\n    } else if (type == \"interpolation\") {\n      return pushContext(state, stream, \"interpolation\");\n    } else if (type == \":\") {\n      return \"pseudo\";\n    } else if (allowNested && type == \"(\") {\n      return pushContext(state, stream, \"parens\");\n    }\n    return state.context.type;\n  };\n\n  states.block = function(type, stream, state) {\n    if (type == \"word\") {\n      var word = stream.current().toLowerCase();\n      if (propertyKeywords.hasOwnProperty(word)) {\n        override = \"property\";\n        return \"maybeprop\";\n      } else if (nonStandardPropertyKeywords.hasOwnProperty(word)) {\n        override = \"string-2\";\n        return \"maybeprop\";\n      } else if (allowNested) {\n        override = stream.match(/^\\s*:(?:\\s|$)/, false) ? \"property\" : \"tag\";\n        return \"block\";\n      } else {\n        override += \" error\";\n        return \"maybeprop\";\n      }\n    } else if (type == \"meta\") {\n      return \"block\";\n    } else if (!allowNested && (type == \"hash\" || type == \"qualifier\")) {\n      override = \"error\";\n      return \"block\";\n    } else {\n      return states.top(type, stream, state);\n    }\n  };\n\n  states.maybeprop = function(type, stream, state) {\n    if (type == \":\") return pushContext(state, stream, \"prop\");\n    return pass(type, stream, state);\n  };\n\n  states.prop = function(type, stream, state) {\n    if (type == \";\") return popContext(state);\n    if (type == \"{\" && allowNested) return pushContext(state, stream, \"propBlock\");\n    if (type == \"}\" || type == \"{\") return popAndPass(type, stream, state);\n    if (type == \"(\") return pushContext(state, stream, \"parens\");\n\n    if (type == \"hash\" && !/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())) {\n      override += \" error\";\n    } else if (type == \"word\") {\n      wordAsValue(stream);\n    } else if (type == \"interpolation\") {\n      return pushContext(state, stream, \"interpolation\");\n    }\n    return \"prop\";\n  };\n\n  states.propBlock = function(type, _stream, state) {\n    if (type == \"}\") return popContext(state);\n    if (type == \"word\") { override = \"property\"; return \"maybeprop\"; }\n    return state.context.type;\n  };\n\n  states.parens = function(type, stream, state) {\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n    if (type == \")\") return popContext(state);\n    if (type == \"(\") return pushContext(state, stream, \"parens\");\n    if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n    if (type == \"word\") wordAsValue(stream);\n    return \"parens\";\n  };\n\n  states.pseudo = function(type, stream, state) {\n    if (type == \"meta\") return \"pseudo\";\n\n    if (type == \"word\") {\n      override = \"variable-3\";\n      return state.context.type;\n    }\n    return pass(type, stream, state);\n  };\n\n  states.documentTypes = function(type, stream, state) {\n    if (type == \"word\" && documentTypes.hasOwnProperty(stream.current())) {\n      override = \"tag\";\n      return state.context.type;\n    } else {\n      return states.atBlock(type, stream, state);\n    }\n  };\n\n  states.atBlock = function(type, stream, state) {\n    if (type == \"(\") return pushContext(state, stream, \"atBlock_parens\");\n    if (type == \"}\" || type == \";\") return popAndPass(type, stream, state);\n    if (type == \"{\") return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\");\n\n    if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n\n    if (type == \"word\") {\n      var word = stream.current().toLowerCase();\n      if (word == \"only\" || word == \"not\" || word == \"and\" || word == \"or\")\n        override = \"keyword\";\n      else if (mediaTypes.hasOwnProperty(word))\n        override = \"attribute\";\n      else if (mediaFeatures.hasOwnProperty(word))\n        override = \"property\";\n      else if (mediaValueKeywords.hasOwnProperty(word))\n        override = \"keyword\";\n      else if (propertyKeywords.hasOwnProperty(word))\n        override = \"property\";\n      else if (nonStandardPropertyKeywords.hasOwnProperty(word))\n        override = \"string-2\";\n      else if (valueKeywords.hasOwnProperty(word))\n        override = \"atom\";\n      else if (colorKeywords.hasOwnProperty(word))\n        override = \"keyword\";\n      else\n        override = \"error\";\n    }\n    return state.context.type;\n  };\n\n  states.atComponentBlock = function(type, stream, state) {\n    if (type == \"}\")\n      return popAndPass(type, stream, state);\n    if (type == \"{\")\n      return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\", false);\n    if (type == \"word\")\n      override = \"error\";\n    return state.context.type;\n  };\n\n  states.atBlock_parens = function(type, stream, state) {\n    if (type == \")\") return popContext(state);\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state, 2);\n    return states.atBlock(type, stream, state);\n  };\n\n  states.restricted_atBlock_before = function(type, stream, state) {\n    if (type == \"{\")\n      return pushContext(state, stream, \"restricted_atBlock\");\n    if (type == \"word\" && state.stateArg == \"@counter-style\") {\n      override = \"variable\";\n      return \"restricted_atBlock_before\";\n    }\n    return pass(type, stream, state);\n  };\n\n  states.restricted_atBlock = function(type, stream, state) {\n    if (type == \"}\") {\n      state.stateArg = null;\n      return popContext(state);\n    }\n    if (type == \"word\") {\n      if ((state.stateArg == \"@font-face\" && !fontProperties.hasOwnProperty(stream.current().toLowerCase())) ||\n          (state.stateArg == \"@counter-style\" && !counterDescriptors.hasOwnProperty(stream.current().toLowerCase())))\n        override = \"error\";\n      else\n        override = \"property\";\n      return \"maybeprop\";\n    }\n    return \"restricted_atBlock\";\n  };\n\n  states.keyframes = function(type, stream, state) {\n    if (type == \"word\") { override = \"variable\"; return \"keyframes\"; }\n    if (type == \"{\") return pushContext(state, stream, \"top\");\n    return pass(type, stream, state);\n  };\n\n  states.at = function(type, stream, state) {\n    if (type == \";\") return popContext(state);\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n    if (type == \"word\") override = \"tag\";\n    else if (type == \"hash\") override = \"builtin\";\n    return \"at\";\n  };\n\n  states.interpolation = function(type, stream, state) {\n    if (type == \"}\") return popContext(state);\n    if (type == \"{\" || type == \";\") return popAndPass(type, stream, state);\n    if (type == \"word\") override = \"variable\";\n    else if (type != \"variable\" && type != \"(\" && type != \")\") override = \"error\";\n    return \"interpolation\";\n  };\n\n  return {\n    startState: function(base) {\n      return {tokenize: null,\n              state: inline ? \"block\" : \"top\",\n              stateArg: null,\n              context: new Context(inline ? \"block\" : \"top\", base || 0, null)};\n    },\n\n    token: function(stream, state) {\n      if (!state.tokenize && stream.eatSpace()) return null;\n      var style = (state.tokenize || tokenBase)(stream, state);\n      if (style && typeof style == \"object\") {\n        type = style[1];\n        style = style[0];\n      }\n      override = style;\n      if (type != \"comment\")\n        state.state = states[state.state](type, stream, state);\n      return override;\n    },\n\n    indent: function(state, textAfter) {\n      var cx = state.context, ch = textAfter && textAfter.charAt(0);\n      var indent = cx.indent;\n      if (cx.type == \"prop\" && (ch == \"}\" || ch == \")\")) cx = cx.prev;\n      if (cx.prev) {\n        if (ch == \"}\" && (cx.type == \"block\" || cx.type == \"top\" ||\n                          cx.type == \"interpolation\" || cx.type == \"restricted_atBlock\")) {\n          // Resume indentation from parent context.\n          cx = cx.prev;\n          indent = cx.indent;\n        } else if (ch == \")\" && (cx.type == \"parens\" || cx.type == \"atBlock_parens\") ||\n            ch == \"{\" && (cx.type == \"at\" || cx.type == \"atBlock\")) {\n          // Dedent relative to current context.\n          indent = Math.max(0, cx.indent - indentUnit);\n        }\n      }\n      return indent;\n    },\n\n    electricChars: \"}\",\n    blockCommentStart: \"/*\",\n    blockCommentEnd: \"*/\",\n    blockCommentContinue: \" * \",\n    lineComment: lineComment,\n    fold: \"brace\"\n  };\n});\n\n  function keySet(array) {\n    var keys = {};\n    for (var i = 0; i < array.length; ++i) {\n      keys[array[i].toLowerCase()] = true;\n    }\n    return keys;\n  }\n\n  var documentTypes_ = [\n    \"domain\", \"regexp\", \"url\", \"url-prefix\"\n  ], documentTypes = keySet(documentTypes_);\n\n  var mediaTypes_ = [\n    \"all\", \"aural\", \"braille\", \"handheld\", \"print\", \"projection\", \"screen\",\n    \"tty\", \"tv\", \"embossed\"\n  ], mediaTypes = keySet(mediaTypes_);\n\n  var mediaFeatures_ = [\n    \"width\", \"min-width\", \"max-width\", \"height\", \"min-height\", \"max-height\",\n    \"device-width\", \"min-device-width\", \"max-device-width\", \"device-height\",\n    \"min-device-height\", \"max-device-height\", \"aspect-ratio\",\n    \"min-aspect-ratio\", \"max-aspect-ratio\", \"device-aspect-ratio\",\n    \"min-device-aspect-ratio\", \"max-device-aspect-ratio\", \"color\", \"min-color\",\n    \"max-color\", \"color-index\", \"min-color-index\", \"max-color-index\",\n    \"monochrome\", \"min-monochrome\", \"max-monochrome\", \"resolution\",\n    \"min-resolution\", \"max-resolution\", \"scan\", \"grid\", \"orientation\",\n    \"device-pixel-ratio\", \"min-device-pixel-ratio\", \"max-device-pixel-ratio\",\n    \"pointer\", \"any-pointer\", \"hover\", \"any-hover\"\n  ], mediaFeatures = keySet(mediaFeatures_);\n\n  var mediaValueKeywords_ = [\n    \"landscape\", \"portrait\", \"none\", \"coarse\", \"fine\", \"on-demand\", \"hover\",\n    \"interlace\", \"progressive\"\n  ], mediaValueKeywords = keySet(mediaValueKeywords_);\n\n  var propertyKeywords_ = [\n    \"align-content\", \"align-items\", \"align-self\", \"alignment-adjust\",\n    \"alignment-baseline\", \"anchor-point\", \"animation\", \"animation-delay\",\n    \"animation-direction\", \"animation-duration\", \"animation-fill-mode\",\n    \"animation-iteration-count\", \"animation-name\", \"animation-play-state\",\n    \"animation-timing-function\", \"appearance\", \"azimuth\", \"backface-visibility\",\n    \"background\", \"background-attachment\", \"background-blend-mode\", \"background-clip\",\n    \"background-color\", \"background-image\", \"background-origin\", \"background-position\",\n    \"background-repeat\", \"background-size\", \"baseline-shift\", \"binding\",\n    \"bleed\", \"bookmark-label\", \"bookmark-level\", \"bookmark-state\",\n    \"bookmark-target\", \"border\", \"border-bottom\", \"border-bottom-color\",\n    \"border-bottom-left-radius\", \"border-bottom-right-radius\",\n    \"border-bottom-style\", \"border-bottom-width\", \"border-collapse\",\n    \"border-color\", \"border-image\", \"border-image-outset\",\n    \"border-image-repeat\", \"border-image-slice\", \"border-image-source\",\n    \"border-image-width\", \"border-left\", \"border-left-color\",\n    \"border-left-style\", \"border-left-width\", \"border-radius\", \"border-right\",\n    \"border-right-color\", \"border-right-style\", \"border-right-width\",\n    \"border-spacing\", \"border-style\", \"border-top\", \"border-top-color\",\n    \"border-top-left-radius\", \"border-top-right-radius\", \"border-top-style\",\n    \"border-top-width\", \"border-width\", \"bottom\", \"box-decoration-break\",\n    \"box-shadow\", \"box-sizing\", \"break-after\", \"break-before\", \"break-inside\",\n    \"caption-side\", \"caret-color\", \"clear\", \"clip\", \"color\", \"color-profile\", \"column-count\",\n    \"column-fill\", \"column-gap\", \"column-rule\", \"column-rule-color\",\n    \"column-rule-style\", \"column-rule-width\", \"column-span\", \"column-width\",\n    \"columns\", \"content\", \"counter-increment\", \"counter-reset\", \"crop\", \"cue\",\n    \"cue-after\", \"cue-before\", \"cursor\", \"direction\", \"display\",\n    \"dominant-baseline\", \"drop-initial-after-adjust\",\n    \"drop-initial-after-align\", \"drop-initial-before-adjust\",\n    \"drop-initial-before-align\", \"drop-initial-size\", \"drop-initial-value\",\n    \"elevation\", \"empty-cells\", \"fit\", \"fit-position\", \"flex\", \"flex-basis\",\n    \"flex-direction\", \"flex-flow\", \"flex-grow\", \"flex-shrink\", \"flex-wrap\",\n    \"float\", \"float-offset\", \"flow-from\", \"flow-into\", \"font\", \"font-feature-settings\",\n    \"font-family\", \"font-kerning\", \"font-language-override\", \"font-size\", \"font-size-adjust\",\n    \"font-stretch\", \"font-style\", \"font-synthesis\", \"font-variant\",\n    \"font-variant-alternates\", \"font-variant-caps\", \"font-variant-east-asian\",\n    \"font-variant-ligatures\", \"font-variant-numeric\", \"font-variant-position\",\n    \"font-weight\", \"grid\", \"grid-area\", \"grid-auto-columns\", \"grid-auto-flow\",\n    \"grid-auto-rows\", \"grid-column\", \"grid-column-end\", \"grid-column-gap\",\n    \"grid-column-start\", \"grid-gap\", \"grid-row\", \"grid-row-end\", \"grid-row-gap\",\n    \"grid-row-start\", \"grid-template\", \"grid-template-areas\", \"grid-template-columns\",\n    \"grid-template-rows\", \"hanging-punctuation\", \"height\", \"hyphens\",\n    \"icon\", \"image-orientation\", \"image-rendering\", \"image-resolution\",\n    \"inline-box-align\", \"justify-content\", \"justify-items\", \"justify-self\", \"left\", \"letter-spacing\",\n    \"line-break\", \"line-height\", \"line-stacking\", \"line-stacking-ruby\",\n    \"line-stacking-shift\", \"line-stacking-strategy\", \"list-style\",\n    \"list-style-image\", \"list-style-position\", \"list-style-type\", \"margin\",\n    \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\",\n    \"marks\", \"marquee-direction\", \"marquee-loop\",\n    \"marquee-play-count\", \"marquee-speed\", \"marquee-style\", \"max-height\",\n    \"max-width\", \"min-height\", \"min-width\", \"move-to\", \"nav-down\", \"nav-index\",\n    \"nav-left\", \"nav-right\", \"nav-up\", \"object-fit\", \"object-position\",\n    \"opacity\", \"order\", \"orphans\", \"outline\",\n    \"outline-color\", \"outline-offset\", \"outline-style\", \"outline-width\",\n    \"overflow\", \"overflow-style\", \"overflow-wrap\", \"overflow-x\", \"overflow-y\",\n    \"padding\", \"padding-bottom\", \"padding-left\", \"padding-right\", \"padding-top\",\n    \"page\", \"page-break-after\", \"page-break-before\", \"page-break-inside\",\n    \"page-policy\", \"pause\", \"pause-after\", \"pause-before\", \"perspective\",\n    \"perspective-origin\", \"pitch\", \"pitch-range\", \"place-content\", \"place-items\", \"place-self\", \"play-during\", \"position\",\n    \"presentation-level\", \"punctuation-trim\", \"quotes\", \"region-break-after\",\n    \"region-break-before\", \"region-break-inside\", \"region-fragment\",\n    \"rendering-intent\", \"resize\", \"rest\", \"rest-after\", \"rest-before\", \"richness\",\n    \"right\", \"rotation\", \"rotation-point\", \"ruby-align\", \"ruby-overhang\",\n    \"ruby-position\", \"ruby-span\", \"shape-image-threshold\", \"shape-inside\", \"shape-margin\",\n    \"shape-outside\", \"size\", \"speak\", \"speak-as\", \"speak-header\",\n    \"speak-numeral\", \"speak-punctuation\", \"speech-rate\", \"stress\", \"string-set\",\n    \"tab-size\", \"table-layout\", \"target\", \"target-name\", \"target-new\",\n    \"target-position\", \"text-align\", \"text-align-last\", \"text-decoration\",\n    \"text-decoration-color\", \"text-decoration-line\", \"text-decoration-skip\",\n    \"text-decoration-style\", \"text-emphasis\", \"text-emphasis-color\",\n    \"text-emphasis-position\", \"text-emphasis-style\", \"text-height\",\n    \"text-indent\", \"text-justify\", \"text-outline\", \"text-overflow\", \"text-shadow\",\n    \"text-size-adjust\", \"text-space-collapse\", \"text-transform\", \"text-underline-position\",\n    \"text-wrap\", \"top\", \"transform\", \"transform-origin\", \"transform-style\",\n    \"transition\", \"transition-delay\", \"transition-duration\",\n    \"transition-property\", \"transition-timing-function\", \"unicode-bidi\",\n    \"user-select\", \"vertical-align\", \"visibility\", \"voice-balance\", \"voice-duration\",\n    \"voice-family\", \"voice-pitch\", \"voice-range\", \"voice-rate\", \"voice-stress\",\n    \"voice-volume\", \"volume\", \"white-space\", \"widows\", \"width\", \"will-change\", \"word-break\",\n    \"word-spacing\", \"word-wrap\", \"z-index\",\n    // SVG-specific\n    \"clip-path\", \"clip-rule\", \"mask\", \"enable-background\", \"filter\", \"flood-color\",\n    \"flood-opacity\", \"lighting-color\", \"stop-color\", \"stop-opacity\", \"pointer-events\",\n    \"color-interpolation\", \"color-interpolation-filters\",\n    \"color-rendering\", \"fill\", \"fill-opacity\", \"fill-rule\", \"image-rendering\",\n    \"marker\", \"marker-end\", \"marker-mid\", \"marker-start\", \"shape-rendering\", \"stroke\",\n    \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\",\n    \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-rendering\",\n    \"baseline-shift\", \"dominant-baseline\", \"glyph-orientation-horizontal\",\n    \"glyph-orientation-vertical\", \"text-anchor\", \"writing-mode\"\n  ], propertyKeywords = keySet(propertyKeywords_);\n\n  var nonStandardPropertyKeywords_ = [\n    \"scrollbar-arrow-color\", \"scrollbar-base-color\", \"scrollbar-dark-shadow-color\",\n    \"scrollbar-face-color\", \"scrollbar-highlight-color\", \"scrollbar-shadow-color\",\n    \"scrollbar-3d-light-color\", \"scrollbar-track-color\", \"shape-inside\",\n    \"searchfield-cancel-button\", \"searchfield-decoration\", \"searchfield-results-button\",\n    \"searchfield-results-decoration\", \"zoom\"\n  ], nonStandardPropertyKeywords = keySet(nonStandardPropertyKeywords_);\n\n  var fontProperties_ = [\n    \"font-family\", \"src\", \"unicode-range\", \"font-variant\", \"font-feature-settings\",\n    \"font-stretch\", \"font-weight\", \"font-style\"\n  ], fontProperties = keySet(fontProperties_);\n\n  var counterDescriptors_ = [\n    \"additive-symbols\", \"fallback\", \"negative\", \"pad\", \"prefix\", \"range\",\n    \"speak-as\", \"suffix\", \"symbols\", \"system\"\n  ], counterDescriptors = keySet(counterDescriptors_);\n\n  var colorKeywords_ = [\n    \"aliceblue\", \"antiquewhite\", \"aqua\", \"aquamarine\", \"azure\", \"beige\",\n    \"bisque\", \"black\", \"blanchedalmond\", \"blue\", \"blueviolet\", \"brown\",\n    \"burlywood\", \"cadetblue\", \"chartreuse\", \"chocolate\", \"coral\", \"cornflowerblue\",\n    \"cornsilk\", \"crimson\", \"cyan\", \"darkblue\", \"darkcyan\", \"darkgoldenrod\",\n    \"darkgray\", \"darkgreen\", \"darkkhaki\", \"darkmagenta\", \"darkolivegreen\",\n    \"darkorange\", \"darkorchid\", \"darkred\", \"darksalmon\", \"darkseagreen\",\n    \"darkslateblue\", \"darkslategray\", \"darkturquoise\", \"darkviolet\",\n    \"deeppink\", \"deepskyblue\", \"dimgray\", \"dodgerblue\", \"firebrick\",\n    \"floralwhite\", \"forestgreen\", \"fuchsia\", \"gainsboro\", \"ghostwhite\",\n    \"gold\", \"goldenrod\", \"gray\", \"grey\", \"green\", \"greenyellow\", \"honeydew\",\n    \"hotpink\", \"indianred\", \"indigo\", \"ivory\", \"khaki\", \"lavender\",\n    \"lavenderblush\", \"lawngreen\", \"lemonchiffon\", \"lightblue\", \"lightcoral\",\n    \"lightcyan\", \"lightgoldenrodyellow\", \"lightgray\", \"lightgreen\", \"lightpink\",\n    \"lightsalmon\", \"lightseagreen\", \"lightskyblue\", \"lightslategray\",\n    \"lightsteelblue\", \"lightyellow\", \"lime\", \"limegreen\", \"linen\", \"magenta\",\n    \"maroon\", \"mediumaquamarine\", \"mediumblue\", \"mediumorchid\", \"mediumpurple\",\n    \"mediumseagreen\", \"mediumslateblue\", \"mediumspringgreen\", \"mediumturquoise\",\n    \"mediumvioletred\", \"midnightblue\", \"mintcream\", \"mistyrose\", \"moccasin\",\n    \"navajowhite\", \"navy\", \"oldlace\", \"olive\", \"olivedrab\", \"orange\", \"orangered\",\n    \"orchid\", \"palegoldenrod\", \"palegreen\", \"paleturquoise\", \"palevioletred\",\n    \"papayawhip\", \"peachpuff\", \"peru\", \"pink\", \"plum\", \"powderblue\",\n    \"purple\", \"rebeccapurple\", \"red\", \"rosybrown\", \"royalblue\", \"saddlebrown\",\n    \"salmon\", \"sandybrown\", \"seagreen\", \"seashell\", \"sienna\", \"silver\", \"skyblue\",\n    \"slateblue\", \"slategray\", \"snow\", \"springgreen\", \"steelblue\", \"tan\",\n    \"teal\", \"thistle\", \"tomato\", \"turquoise\", \"violet\", \"wheat\", \"white\",\n    \"whitesmoke\", \"yellow\", \"yellowgreen\"\n  ], colorKeywords = keySet(colorKeywords_);\n\n  var valueKeywords_ = [\n    \"above\", \"absolute\", \"activeborder\", \"additive\", \"activecaption\", \"afar\",\n    \"after-white-space\", \"ahead\", \"alias\", \"all\", \"all-scroll\", \"alphabetic\", \"alternate\",\n    \"always\", \"amharic\", \"amharic-abegede\", \"antialiased\", \"appworkspace\",\n    \"arabic-indic\", \"armenian\", \"asterisks\", \"attr\", \"auto\", \"auto-flow\", \"avoid\", \"avoid-column\", \"avoid-page\",\n    \"avoid-region\", \"background\", \"backwards\", \"baseline\", \"below\", \"bidi-override\", \"binary\",\n    \"bengali\", \"blink\", \"block\", \"block-axis\", \"bold\", \"bolder\", \"border\", \"border-box\",\n    \"both\", \"bottom\", \"break\", \"break-all\", \"break-word\", \"bullets\", \"button\", \"button-bevel\",\n    \"buttonface\", \"buttonhighlight\", \"buttonshadow\", \"buttontext\", \"calc\", \"cambodian\",\n    \"capitalize\", \"caps-lock-indicator\", \"caption\", \"captiontext\", \"caret\",\n    \"cell\", \"center\", \"checkbox\", \"circle\", \"cjk-decimal\", \"cjk-earthly-branch\",\n    \"cjk-heavenly-stem\", \"cjk-ideographic\", \"clear\", \"clip\", \"close-quote\",\n    \"col-resize\", \"collapse\", \"color\", \"color-burn\", \"color-dodge\", \"column\", \"column-reverse\",\n    \"compact\", \"condensed\", \"contain\", \"content\", \"contents\",\n    \"content-box\", \"context-menu\", \"continuous\", \"copy\", \"counter\", \"counters\", \"cover\", \"crop\",\n    \"cross\", \"crosshair\", \"currentcolor\", \"cursive\", \"cyclic\", \"darken\", \"dashed\", \"decimal\",\n    \"decimal-leading-zero\", \"default\", \"default-button\", \"dense\", \"destination-atop\",\n    \"destination-in\", \"destination-out\", \"destination-over\", \"devanagari\", \"difference\",\n    \"disc\", \"discard\", \"disclosure-closed\", \"disclosure-open\", \"document\",\n    \"dot-dash\", \"dot-dot-dash\",\n    \"dotted\", \"double\", \"down\", \"e-resize\", \"ease\", \"ease-in\", \"ease-in-out\", \"ease-out\",\n    \"element\", \"ellipse\", \"ellipsis\", \"embed\", \"end\", \"ethiopic\", \"ethiopic-abegede\",\n    \"ethiopic-abegede-am-et\", \"ethiopic-abegede-gez\", \"ethiopic-abegede-ti-er\",\n    \"ethiopic-abegede-ti-et\", \"ethiopic-halehame-aa-er\",\n    \"ethiopic-halehame-aa-et\", \"ethiopic-halehame-am-et\",\n    \"ethiopic-halehame-gez\", \"ethiopic-halehame-om-et\",\n    \"ethiopic-halehame-sid-et\", \"ethiopic-halehame-so-et\",\n    \"ethiopic-halehame-ti-er\", \"ethiopic-halehame-ti-et\", \"ethiopic-halehame-tig\",\n    \"ethiopic-numeric\", \"ew-resize\", \"exclusion\", \"expanded\", \"extends\", \"extra-condensed\",\n    \"extra-expanded\", \"fantasy\", \"fast\", \"fill\", \"fixed\", \"flat\", \"flex\", \"flex-end\", \"flex-start\", \"footnotes\",\n    \"forwards\", \"from\", \"geometricPrecision\", \"georgian\", \"graytext\", \"grid\", \"groove\",\n    \"gujarati\", \"gurmukhi\", \"hand\", \"hangul\", \"hangul-consonant\", \"hard-light\", \"hebrew\",\n    \"help\", \"hidden\", \"hide\", \"higher\", \"highlight\", \"highlighttext\",\n    \"hiragana\", \"hiragana-iroha\", \"horizontal\", \"hsl\", \"hsla\", \"hue\", \"icon\", \"ignore\",\n    \"inactiveborder\", \"inactivecaption\", \"inactivecaptiontext\", \"infinite\",\n    \"infobackground\", \"infotext\", \"inherit\", \"initial\", \"inline\", \"inline-axis\",\n    \"inline-block\", \"inline-flex\", \"inline-grid\", \"inline-table\", \"inset\", \"inside\", \"intrinsic\", \"invert\",\n    \"italic\", \"japanese-formal\", \"japanese-informal\", \"justify\", \"kannada\",\n    \"katakana\", \"katakana-iroha\", \"keep-all\", \"khmer\",\n    \"korean-hangul-formal\", \"korean-hanja-formal\", \"korean-hanja-informal\",\n    \"landscape\", \"lao\", \"large\", \"larger\", \"left\", \"level\", \"lighter\", \"lighten\",\n    \"line-through\", \"linear\", \"linear-gradient\", \"lines\", \"list-item\", \"listbox\", \"listitem\",\n    \"local\", \"logical\", \"loud\", \"lower\", \"lower-alpha\", \"lower-armenian\",\n    \"lower-greek\", \"lower-hexadecimal\", \"lower-latin\", \"lower-norwegian\",\n    \"lower-roman\", \"lowercase\", \"ltr\", \"luminosity\", \"malayalam\", \"match\", \"matrix\", \"matrix3d\",\n    \"media-controls-background\", \"media-current-time-display\",\n    \"media-fullscreen-button\", \"media-mute-button\", \"media-play-button\",\n    \"media-return-to-realtime-button\", \"media-rewind-button\",\n    \"media-seek-back-button\", \"media-seek-forward-button\", \"media-slider\",\n    \"media-sliderthumb\", \"media-time-remaining-display\", \"media-volume-slider\",\n    \"media-volume-slider-container\", \"media-volume-sliderthumb\", \"medium\",\n    \"menu\", \"menulist\", \"menulist-button\", \"menulist-text\",\n    \"menulist-textfield\", \"menutext\", \"message-box\", \"middle\", \"min-intrinsic\",\n    \"mix\", \"mongolian\", \"monospace\", \"move\", \"multiple\", \"multiply\", \"myanmar\", \"n-resize\",\n    \"narrower\", \"ne-resize\", \"nesw-resize\", \"no-close-quote\", \"no-drop\",\n    \"no-open-quote\", \"no-repeat\", \"none\", \"normal\", \"not-allowed\", \"nowrap\",\n    \"ns-resize\", \"numbers\", \"numeric\", \"nw-resize\", \"nwse-resize\", \"oblique\", \"octal\", \"opacity\", \"open-quote\",\n    \"optimizeLegibility\", \"optimizeSpeed\", \"oriya\", \"oromo\", \"outset\",\n    \"outside\", \"outside-shape\", \"overlay\", \"overline\", \"padding\", \"padding-box\",\n    \"painted\", \"page\", \"paused\", \"persian\", \"perspective\", \"plus-darker\", \"plus-lighter\",\n    \"pointer\", \"polygon\", \"portrait\", \"pre\", \"pre-line\", \"pre-wrap\", \"preserve-3d\",\n    \"progress\", \"push-button\", \"radial-gradient\", \"radio\", \"read-only\",\n    \"read-write\", \"read-write-plaintext-only\", \"rectangle\", \"region\",\n    \"relative\", \"repeat\", \"repeating-linear-gradient\",\n    \"repeating-radial-gradient\", \"repeat-x\", \"repeat-y\", \"reset\", \"reverse\",\n    \"rgb\", \"rgba\", \"ridge\", \"right\", \"rotate\", \"rotate3d\", \"rotateX\", \"rotateY\",\n    \"rotateZ\", \"round\", \"row\", \"row-resize\", \"row-reverse\", \"rtl\", \"run-in\", \"running\",\n    \"s-resize\", \"sans-serif\", \"saturation\", \"scale\", \"scale3d\", \"scaleX\", \"scaleY\", \"scaleZ\", \"screen\",\n    \"scroll\", \"scrollbar\", \"scroll-position\", \"se-resize\", \"searchfield\",\n    \"searchfield-cancel-button\", \"searchfield-decoration\",\n    \"searchfield-results-button\", \"searchfield-results-decoration\", \"self-start\", \"self-end\",\n    \"semi-condensed\", \"semi-expanded\", \"separate\", \"serif\", \"show\", \"sidama\",\n    \"simp-chinese-formal\", \"simp-chinese-informal\", \"single\",\n    \"skew\", \"skewX\", \"skewY\", \"skip-white-space\", \"slide\", \"slider-horizontal\",\n    \"slider-vertical\", \"sliderthumb-horizontal\", \"sliderthumb-vertical\", \"slow\",\n    \"small\", \"small-caps\", \"small-caption\", \"smaller\", \"soft-light\", \"solid\", \"somali\",\n    \"source-atop\", \"source-in\", \"source-out\", \"source-over\", \"space\", \"space-around\", \"space-between\", \"space-evenly\", \"spell-out\", \"square\",\n    \"square-button\", \"start\", \"static\", \"status-bar\", \"stretch\", \"stroke\", \"sub\",\n    \"subpixel-antialiased\", \"super\", \"sw-resize\", \"symbolic\", \"symbols\", \"system-ui\", \"table\",\n    \"table-caption\", \"table-cell\", \"table-column\", \"table-column-group\",\n    \"table-footer-group\", \"table-header-group\", \"table-row\", \"table-row-group\",\n    \"tamil\",\n    \"telugu\", \"text\", \"text-bottom\", \"text-top\", \"textarea\", \"textfield\", \"thai\",\n    \"thick\", \"thin\", \"threeddarkshadow\", \"threedface\", \"threedhighlight\",\n    \"threedlightshadow\", \"threedshadow\", \"tibetan\", \"tigre\", \"tigrinya-er\",\n    \"tigrinya-er-abegede\", \"tigrinya-et\", \"tigrinya-et-abegede\", \"to\", \"top\",\n    \"trad-chinese-formal\", \"trad-chinese-informal\", \"transform\",\n    \"translate\", \"translate3d\", \"translateX\", \"translateY\", \"translateZ\",\n    \"transparent\", \"ultra-condensed\", \"ultra-expanded\", \"underline\", \"unset\", \"up\",\n    \"upper-alpha\", \"upper-armenian\", \"upper-greek\", \"upper-hexadecimal\",\n    \"upper-latin\", \"upper-norwegian\", \"upper-roman\", \"uppercase\", \"urdu\", \"url\",\n    \"var\", \"vertical\", \"vertical-text\", \"visible\", \"visibleFill\", \"visiblePainted\",\n    \"visibleStroke\", \"visual\", \"w-resize\", \"wait\", \"wave\", \"wider\",\n    \"window\", \"windowframe\", \"windowtext\", \"words\", \"wrap\", \"wrap-reverse\", \"x-large\", \"x-small\", \"xor\",\n    \"xx-large\", \"xx-small\"\n  ], valueKeywords = keySet(valueKeywords_);\n\n  var allWords = documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_)\n    .concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_)\n    .concat(valueKeywords_);\n  CodeMirror.registerHelper(\"hintWords\", \"css\", allWords);\n\n  function tokenCComment(stream, state) {\n    var maybeEnd = false, ch;\n    while ((ch = stream.next()) != null) {\n      if (maybeEnd && ch == \"/\") {\n        state.tokenize = null;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return [\"comment\", \"comment\"];\n  }\n\n  CodeMirror.defineMIME(\"text/css\", {\n    documentTypes: documentTypes,\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    fontProperties: fontProperties,\n    counterDescriptors: counterDescriptors,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (!stream.eat(\"*\")) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      }\n    },\n    name: \"css\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-scss\", {\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    fontProperties: fontProperties,\n    allowNested: true,\n    lineComment: \"//\",\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return [\"comment\", \"comment\"];\n        } else if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        } else {\n          return [\"operator\", \"operator\"];\n        }\n      },\n      \":\": function(stream) {\n        if (stream.match(/\\s*\\{/, false))\n          return [null, null]\n        return false;\n      },\n      \"$\": function(stream) {\n        stream.match(/^[\\w-]+/);\n        if (stream.match(/^\\s*:/, false))\n          return [\"variable-2\", \"variable-definition\"];\n        return [\"variable-2\", \"variable\"];\n      },\n      \"#\": function(stream) {\n        if (!stream.eat(\"{\")) return false;\n        return [null, \"interpolation\"];\n      }\n    },\n    name: \"css\",\n    helperType: \"scss\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-less\", {\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    fontProperties: fontProperties,\n    allowNested: true,\n    lineComment: \"//\",\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return [\"comment\", \"comment\"];\n        } else if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        } else {\n          return [\"operator\", \"operator\"];\n        }\n      },\n      \"@\": function(stream) {\n        if (stream.eat(\"{\")) return [null, \"interpolation\"];\n        if (stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\\b/i, false)) return false;\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        if (stream.match(/^\\s*:/, false))\n          return [\"variable-2\", \"variable-definition\"];\n        return [\"variable-2\", \"variable\"];\n      },\n      \"&\": function() {\n        return [\"atom\", \"atom\"];\n      }\n    },\n    name: \"css\",\n    helperType: \"less\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-gss\", {\n    documentTypes: documentTypes,\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    fontProperties: fontProperties,\n    counterDescriptors: counterDescriptors,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    supportsAtComponent: true,\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (!stream.eat(\"*\")) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      }\n    },\n    name: \"css\",\n    helperType: \"gss\"\n  });\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../xml/xml\"), require(\"../javascript/javascript\"), require(\"../css/css\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../xml/xml\", \"../javascript/javascript\", \"../css/css\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var defaultTags = {\n    script: [\n      [\"lang\", /(javascript|babel)/i, \"javascript\"],\n      [\"type\", /^(?:text|application)\\/(?:x-)?(?:java|ecma)script$|^module$|^$/i, \"javascript\"],\n      [\"type\", /./, \"text/plain\"],\n      [null, null, \"javascript\"]\n    ],\n    style:  [\n      [\"lang\", /^css$/i, \"css\"],\n      [\"type\", /^(text\\/)?(x-)?(stylesheet|css)$/i, \"css\"],\n      [\"type\", /./, \"text/plain\"],\n      [null, null, \"css\"]\n    ]\n  };\n\n  function maybeBackup(stream, pat, style) {\n    var cur = stream.current(), close = cur.search(pat);\n    if (close > -1) {\n      stream.backUp(cur.length - close);\n    } else if (cur.match(/<\\/?$/)) {\n      stream.backUp(cur.length);\n      if (!stream.match(pat, false)) stream.match(cur);\n    }\n    return style;\n  }\n\n  var attrRegexpCache = {};\n  function getAttrRegexp(attr) {\n    var regexp = attrRegexpCache[attr];\n    if (regexp) return regexp;\n    return attrRegexpCache[attr] = new RegExp(\"\\\\s+\" + attr + \"\\\\s*=\\\\s*('|\\\")?([^'\\\"]+)('|\\\")?\\\\s*\");\n  }\n\n  function getAttrValue(text, attr) {\n    var match = text.match(getAttrRegexp(attr))\n    return match ? /^\\s*(.*?)\\s*$/.exec(match[2])[1] : \"\"\n  }\n\n  function getTagRegexp(tagName, anchored) {\n    return new RegExp((anchored ? \"^\" : \"\") + \"<\\/\\s*\" + tagName + \"\\s*>\", \"i\");\n  }\n\n  function addTags(from, to) {\n    for (var tag in from) {\n      var dest = to[tag] || (to[tag] = []);\n      var source = from[tag];\n      for (var i = source.length - 1; i >= 0; i--)\n        dest.unshift(source[i])\n    }\n  }\n\n  function findMatchingMode(tagInfo, tagText) {\n    for (var i = 0; i < tagInfo.length; i++) {\n      var spec = tagInfo[i];\n      if (!spec[0] || spec[1].test(getAttrValue(tagText, spec[0]))) return spec[2];\n    }\n  }\n\n  CodeMirror.defineMode(\"htmlmixed\", function (config, parserConfig) {\n    var htmlMode = CodeMirror.getMode(config, {\n      name: \"xml\",\n      htmlMode: true,\n      multilineTagIndentFactor: parserConfig.multilineTagIndentFactor,\n      multilineTagIndentPastTag: parserConfig.multilineTagIndentPastTag\n    });\n\n    var tags = {};\n    var configTags = parserConfig && parserConfig.tags, configScript = parserConfig && parserConfig.scriptTypes;\n    addTags(defaultTags, tags);\n    if (configTags) addTags(configTags, tags);\n    if (configScript) for (var i = configScript.length - 1; i >= 0; i--)\n      tags.script.unshift([\"type\", configScript[i].matches, configScript[i].mode])\n\n    function html(stream, state) {\n      var style = htmlMode.token(stream, state.htmlState), tag = /\\btag\\b/.test(style), tagName\n      if (tag && !/[<>\\s\\/]/.test(stream.current()) &&\n          (tagName = state.htmlState.tagName && state.htmlState.tagName.toLowerCase()) &&\n          tags.hasOwnProperty(tagName)) {\n        state.inTag = tagName + \" \"\n      } else if (state.inTag && tag && />$/.test(stream.current())) {\n        var inTag = /^([\\S]+) (.*)/.exec(state.inTag)\n        state.inTag = null\n        var modeSpec = stream.current() == \">\" && findMatchingMode(tags[inTag[1]], inTag[2])\n        var mode = CodeMirror.getMode(config, modeSpec)\n        var endTagA = getTagRegexp(inTag[1], true), endTag = getTagRegexp(inTag[1], false);\n        state.token = function (stream, state) {\n          if (stream.match(endTagA, false)) {\n            state.token = html;\n            state.localState = state.localMode = null;\n            return null;\n          }\n          return maybeBackup(stream, endTag, state.localMode.token(stream, state.localState));\n        };\n        state.localMode = mode;\n        state.localState = CodeMirror.startState(mode, htmlMode.indent(state.htmlState, \"\"));\n      } else if (state.inTag) {\n        state.inTag += stream.current()\n        if (stream.eol()) state.inTag += \" \"\n      }\n      return style;\n    };\n\n    return {\n      startState: function () {\n        var state = CodeMirror.startState(htmlMode);\n        return {token: html, inTag: null, localMode: null, localState: null, htmlState: state};\n      },\n\n      copyState: function (state) {\n        var local;\n        if (state.localState) {\n          local = CodeMirror.copyState(state.localMode, state.localState);\n        }\n        return {token: state.token, inTag: state.inTag,\n                localMode: state.localMode, localState: local,\n                htmlState: CodeMirror.copyState(htmlMode, state.htmlState)};\n      },\n\n      token: function (stream, state) {\n        return state.token(stream, state);\n      },\n\n      indent: function (state, textAfter, line) {\n        if (!state.localMode || /^\\s*<\\//.test(textAfter))\n          return htmlMode.indent(state.htmlState, textAfter);\n        else if (state.localMode.indent)\n          return state.localMode.indent(state.localState, textAfter, line);\n        else\n          return CodeMirror.Pass;\n      },\n\n      innerMode: function (state) {\n        return {state: state.localState || state.htmlState, mode: state.localMode || htmlMode};\n      }\n    };\n  }, \"xml\", \"javascript\", \"css\");\n\n  CodeMirror.defineMIME(\"text/html\", \"htmlmixed\");\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"javascript\", function(config, parserConfig) {\n  var indentUnit = config.indentUnit;\n  var statementIndent = parserConfig.statementIndent;\n  var jsonldMode = parserConfig.jsonld;\n  var jsonMode = parserConfig.json || jsonldMode;\n  var isTS = parserConfig.typescript;\n  var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n  // Tokenizer\n\n  var keywords = function(){\n    function kw(type) {return {type: type, style: \"keyword\"};}\n    var A = kw(\"keyword a\"), B = kw(\"keyword b\"), C = kw(\"keyword c\"), D = kw(\"keyword d\");\n    var operator = kw(\"operator\"), atom = {type: \"atom\", style: \"atom\"};\n\n    return {\n      \"if\": kw(\"if\"), \"while\": A, \"with\": A, \"else\": B, \"do\": B, \"try\": B, \"finally\": B,\n      \"return\": D, \"break\": D, \"continue\": D, \"new\": kw(\"new\"), \"delete\": C, \"void\": C, \"throw\": C,\n      \"debugger\": kw(\"debugger\"), \"var\": kw(\"var\"), \"const\": kw(\"var\"), \"let\": kw(\"var\"),\n      \"function\": kw(\"function\"), \"catch\": kw(\"catch\"),\n      \"for\": kw(\"for\"), \"switch\": kw(\"switch\"), \"case\": kw(\"case\"), \"default\": kw(\"default\"),\n      \"in\": operator, \"typeof\": operator, \"instanceof\": operator,\n      \"true\": atom, \"false\": atom, \"null\": atom, \"undefined\": atom, \"NaN\": atom, \"Infinity\": atom,\n      \"this\": kw(\"this\"), \"class\": kw(\"class\"), \"super\": kw(\"atom\"),\n      \"yield\": C, \"export\": kw(\"export\"), \"import\": kw(\"import\"), \"extends\": C,\n      \"await\": C\n    };\n  }();\n\n  var isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n  var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n  function readRegexp(stream) {\n    var escaped = false, next, inSet = false;\n    while ((next = stream.next()) != null) {\n      if (!escaped) {\n        if (next == \"/\" && !inSet) return;\n        if (next == \"[\") inSet = true;\n        else if (inSet && next == \"]\") inSet = false;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n  }\n\n  // Used as scratch variables to communicate multiple values without\n  // consing up tons of objects.\n  var type, content;\n  function ret(tp, style, cont) {\n    type = tp; content = cont;\n    return style;\n  }\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (ch == '\"' || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \".\" && stream.match(/^\\d+(?:[eE][+\\-]?\\d+)?/)) {\n      return ret(\"number\", \"number\");\n    } else if (ch == \".\" && stream.match(\"..\")) {\n      return ret(\"spread\", \"meta\");\n    } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n      return ret(ch);\n    } else if (ch == \"=\" && stream.eat(\">\")) {\n      return ret(\"=>\", \"operator\");\n    } else if (ch == \"0\" && stream.eat(/x/i)) {\n      stream.eatWhile(/[\\da-f]/i);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"0\" && stream.eat(/o/i)) {\n      stream.eatWhile(/[0-7]/i);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"0\" && stream.eat(/b/i)) {\n      stream.eatWhile(/[01]/i);\n      return ret(\"number\", \"number\");\n    } else if (/\\d/.test(ch)) {\n      stream.match(/^\\d*(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"/\") {\n      if (stream.eat(\"*\")) {\n        state.tokenize = tokenComment;\n        return tokenComment(stream, state);\n      } else if (stream.eat(\"/\")) {\n        stream.skipToEnd();\n        return ret(\"comment\", \"comment\");\n      } else if (expressionAllowed(stream, state, 1)) {\n        readRegexp(stream);\n        stream.match(/^\\b(([gimyu])(?![gimyu]*\\2))+\\b/);\n        return ret(\"regexp\", \"string-2\");\n      } else {\n        stream.eat(\"=\");\n        return ret(\"operator\", \"operator\", stream.current());\n      }\n    } else if (ch == \"`\") {\n      state.tokenize = tokenQuasi;\n      return tokenQuasi(stream, state);\n    } else if (ch == \"#\") {\n      stream.skipToEnd();\n      return ret(\"error\", \"error\");\n    } else if (isOperatorChar.test(ch)) {\n      if (ch != \">\" || !state.lexical || state.lexical.type != \">\") {\n        if (stream.eat(\"=\")) {\n          if (ch == \"!\" || ch == \"=\") stream.eat(\"=\")\n        } else if (/[<>*+\\-]/.test(ch)) {\n          stream.eat(ch)\n          if (ch == \">\") stream.eat(ch)\n        }\n      }\n      return ret(\"operator\", \"operator\", stream.current());\n    } else if (wordRE.test(ch)) {\n      stream.eatWhile(wordRE);\n      var word = stream.current()\n      if (state.lastType != \".\") {\n        if (keywords.propertyIsEnumerable(word)) {\n          var kw = keywords[word]\n          return ret(kw.type, kw.style, word)\n        }\n        if (word == \"async\" && stream.match(/^(\\s|\\/\\*.*?\\*\\/)*[\\(\\w]/, false))\n          return ret(\"async\", \"keyword\", word)\n      }\n      return ret(\"variable\", \"variable\", word)\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, next;\n      if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)){\n        state.tokenize = tokenBase;\n        return ret(\"jsonld-keyword\", \"meta\");\n      }\n      while ((next = stream.next()) != null) {\n        if (next == quote && !escaped) break;\n        escaped = !escaped && next == \"\\\\\";\n      }\n      if (!escaped) state.tokenize = tokenBase;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenComment(stream, state) {\n    var maybeEnd = false, ch;\n    while (ch = stream.next()) {\n      if (ch == \"/\" && maybeEnd) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return ret(\"comment\", \"comment\");\n  }\n\n  function tokenQuasi(stream, state) {\n    var escaped = false, next;\n    while ((next = stream.next()) != null) {\n      if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n    return ret(\"quasi\", \"string-2\", stream.current());\n  }\n\n  var brackets = \"([{}])\";\n  // This is a crude lookahead trick to try and notice that we're\n  // parsing the argument patterns for a fat-arrow function before we\n  // actually hit the arrow token. It only works if the arrow is on\n  // the same line as the arguments and there's no strange noise\n  // (comments) in between. Fallback is to only notice when we hit the\n  // arrow, and not declare the arguments as locals for the arrow\n  // body.\n  function findFatArrow(stream, state) {\n    if (state.fatArrowAt) state.fatArrowAt = null;\n    var arrow = stream.string.indexOf(\"=>\", stream.start);\n    if (arrow < 0) return;\n\n    if (isTS) { // Try to skip TypeScript return type declarations after the arguments\n      var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow))\n      if (m) arrow = m.index\n    }\n\n    var depth = 0, sawSomething = false;\n    for (var pos = arrow - 1; pos >= 0; --pos) {\n      var ch = stream.string.charAt(pos);\n      var bracket = brackets.indexOf(ch);\n      if (bracket >= 0 && bracket < 3) {\n        if (!depth) { ++pos; break; }\n        if (--depth == 0) { if (ch == \"(\") sawSomething = true; break; }\n      } else if (bracket >= 3 && bracket < 6) {\n        ++depth;\n      } else if (wordRE.test(ch)) {\n        sawSomething = true;\n      } else if (/[\"'\\/]/.test(ch)) {\n        return;\n      } else if (sawSomething && !depth) {\n        ++pos;\n        break;\n      }\n    }\n    if (sawSomething && !depth) state.fatArrowAt = pos;\n  }\n\n  // Parser\n\n  var atomicTypes = {\"atom\": true, \"number\": true, \"variable\": true, \"string\": true, \"regexp\": true, \"this\": true, \"jsonld-keyword\": true};\n\n  function JSLexical(indented, column, type, align, prev, info) {\n    this.indented = indented;\n    this.column = column;\n    this.type = type;\n    this.prev = prev;\n    this.info = info;\n    if (align != null) this.align = align;\n  }\n\n  function inScope(state, varname) {\n    for (var v = state.localVars; v; v = v.next)\n      if (v.name == varname) return true;\n    for (var cx = state.context; cx; cx = cx.prev) {\n      for (var v = cx.vars; v; v = v.next)\n        if (v.name == varname) return true;\n    }\n  }\n\n  function parseJS(state, style, type, content, stream) {\n    var cc = state.cc;\n    // Communicate our context to the combinators.\n    // (Less wasteful than consing up a hundred closures on every call.)\n    cx.state = state; cx.stream = stream; cx.marked = null, cx.cc = cc; cx.style = style;\n\n    if (!state.lexical.hasOwnProperty(\"align\"))\n      state.lexical.align = true;\n\n    while(true) {\n      var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n      if (combinator(type, content)) {\n        while(cc.length && cc[cc.length - 1].lex)\n          cc.pop()();\n        if (cx.marked) return cx.marked;\n        if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n        return style;\n      }\n    }\n  }\n\n  // Combinator utils\n\n  var cx = {state: null, column: null, marked: null, cc: null};\n  function pass() {\n    for (var i = arguments.length - 1; i >= 0; i--) cx.cc.push(arguments[i]);\n  }\n  function cont() {\n    pass.apply(null, arguments);\n    return true;\n  }\n  function register(varname) {\n    function inList(list) {\n      for (var v = list; v; v = v.next)\n        if (v.name == varname) return true;\n      return false;\n    }\n    var state = cx.state;\n    cx.marked = \"def\";\n    if (state.context) {\n      if (inList(state.localVars)) return;\n      state.localVars = {name: varname, next: state.localVars};\n    } else {\n      if (inList(state.globalVars)) return;\n      if (parserConfig.globalVars)\n        state.globalVars = {name: varname, next: state.globalVars};\n    }\n  }\n\n  function isModifier(name) {\n    return name == \"public\" || name == \"private\" || name == \"protected\" || name == \"abstract\" || name == \"readonly\"\n  }\n\n  // Combinators\n\n  var defaultVars = {name: \"this\", next: {name: \"arguments\"}};\n  function pushcontext() {\n    cx.state.context = {prev: cx.state.context, vars: cx.state.localVars};\n    cx.state.localVars = defaultVars;\n  }\n  function popcontext() {\n    cx.state.localVars = cx.state.context.vars;\n    cx.state.context = cx.state.context.prev;\n  }\n  function pushlex(type, info) {\n    var result = function() {\n      var state = cx.state, indent = state.indented;\n      if (state.lexical.type == \"stat\") indent = state.lexical.indented;\n      else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev)\n        indent = outer.indented;\n      state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n    };\n    result.lex = true;\n    return result;\n  }\n  function poplex() {\n    var state = cx.state;\n    if (state.lexical.prev) {\n      if (state.lexical.type == \")\")\n        state.indented = state.lexical.indented;\n      state.lexical = state.lexical.prev;\n    }\n  }\n  poplex.lex = true;\n\n  function expect(wanted) {\n    function exp(type) {\n      if (type == wanted) return cont();\n      else if (wanted == \";\") return pass();\n      else return cont(exp);\n    };\n    return exp;\n  }\n\n  function statement(type, value) {\n    if (type == \"var\") return cont(pushlex(\"vardef\", value.length), vardef, expect(\";\"), poplex);\n    if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n    if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n    if (type == \"keyword d\") return cx.stream.match(/^\\s*$/, false) ? cont() : cont(pushlex(\"stat\"), maybeexpression, expect(\";\"), poplex);\n    if (type == \"debugger\") return cont(expect(\";\"));\n    if (type == \"{\") return cont(pushlex(\"}\"), block, poplex);\n    if (type == \";\") return cont();\n    if (type == \"if\") {\n      if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex)\n        cx.state.cc.pop()();\n      return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n    }\n    if (type == \"function\") return cont(functiondef);\n    if (type == \"for\") return cont(pushlex(\"form\"), forspec, statement, poplex);\n    if (type == \"class\" || (isTS && value == \"interface\")) { cx.marked = \"keyword\"; return cont(pushlex(\"form\"), className, poplex); }\n    if (type == \"variable\") {\n      if (isTS && value == \"declare\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else if (isTS && (value == \"module\" || value == \"enum\" || value == \"type\") && cx.stream.match(/^\\s*\\w/, false)) {\n        cx.marked = \"keyword\"\n        if (value == \"enum\") return cont(enumdef);\n        else if (value == \"type\") return cont(typeexpr, expect(\"operator\"), typeexpr, expect(\";\"));\n        else return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex)\n      } else if (isTS && value == \"namespace\") {\n        cx.marked = \"keyword\"\n        return cont(pushlex(\"form\"), expression, block, poplex)\n      } else {\n        return cont(pushlex(\"stat\"), maybelabel);\n      }\n    }\n    if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"),\n                                      block, poplex, poplex);\n    if (type == \"case\") return cont(expression, expect(\":\"));\n    if (type == \"default\") return cont(expect(\":\"));\n    if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, expect(\"(\"), funarg, expect(\")\"),\n                                     statement, poplex, popcontext);\n    if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n    if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n    if (type == \"async\") return cont(statement)\n    if (value == \"@\") return cont(expression, statement)\n    return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n  }\n  function expression(type, value) {\n    return expressionInner(type, value, false);\n  }\n  function expressionNoComma(type, value) {\n    return expressionInner(type, value, true);\n  }\n  function parenExpr(type) {\n    if (type != \"(\") return pass()\n    return cont(pushlex(\")\"), expression, expect(\")\"), poplex)\n  }\n  function expressionInner(type, value, noComma) {\n    if (cx.state.fatArrowAt == cx.stream.start) {\n      var body = noComma ? arrowBodyNoComma : arrowBody;\n      if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, expect(\"=>\"), body, popcontext);\n      else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n    }\n\n    var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n    if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n    if (type == \"function\") return cont(functiondef, maybeop);\n    if (type == \"class\" || (isTS && value == \"interface\")) { cx.marked = \"keyword\"; return cont(pushlex(\"form\"), classExpression, poplex); }\n    if (type == \"keyword c\" || type == \"async\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n    if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n    if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n    if (type == \"quasi\") return pass(quasi, maybeop);\n    if (type == \"new\") return cont(maybeTarget(noComma));\n    if (type == \"import\") return cont(expression);\n    return cont();\n  }\n  function maybeexpression(type) {\n    if (type.match(/[;\\}\\)\\],]/)) return pass();\n    return pass(expression);\n  }\n\n  function maybeoperatorComma(type, value) {\n    if (type == \",\") return cont(expression);\n    return maybeoperatorNoComma(type, value, false);\n  }\n  function maybeoperatorNoComma(type, value, noComma) {\n    var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n    var expr = noComma == false ? expression : expressionNoComma;\n    if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n    if (type == \"operator\") {\n      if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n      if (isTS && value == \"<\" && cx.stream.match(/^([^>]|<.*?>)*>\\s*\\(/, false))\n        return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, me);\n      if (value == \"?\") return cont(expression, expect(\":\"), expr);\n      return cont(expr);\n    }\n    if (type == \"quasi\") { return pass(quasi, me); }\n    if (type == \";\") return;\n    if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n    if (type == \".\") return cont(property, me);\n    if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n    if (isTS && value == \"as\") { cx.marked = \"keyword\"; return cont(typeexpr, me) }\n    if (type == \"regexp\") {\n      cx.state.lastType = cx.marked = \"operator\"\n      cx.stream.backUp(cx.stream.pos - cx.stream.start - 1)\n      return cont(expr)\n    }\n  }\n  function quasi(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n    return cont(expression, continueQuasi);\n  }\n  function continueQuasi(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasi);\n    }\n  }\n  function arrowBody(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expression);\n  }\n  function arrowBodyNoComma(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expressionNoComma);\n  }\n  function maybeTarget(noComma) {\n    return function(type) {\n      if (type == \".\") return cont(noComma ? targetNoComma : target);\n      else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma)\n      else return pass(noComma ? expressionNoComma : expression);\n    };\n  }\n  function target(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorComma); }\n  }\n  function targetNoComma(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorNoComma); }\n  }\n  function maybelabel(type) {\n    if (type == \":\") return cont(poplex, statement);\n    return pass(maybeoperatorComma, expect(\";\"), poplex);\n  }\n  function property(type) {\n    if (type == \"variable\") {cx.marked = \"property\"; return cont();}\n  }\n  function objprop(type, value) {\n    if (type == \"async\") {\n      cx.marked = \"property\";\n      return cont(objprop);\n    } else if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      if (value == \"get\" || value == \"set\") return cont(getterSetter);\n      var m // Work around fat-arrow-detection complication for detecting typescript typed arrow params\n      if (isTS && cx.state.fatArrowAt == cx.stream.start && (m = cx.stream.match(/^\\s*:\\s*/, false)))\n        cx.state.fatArrowAt = cx.stream.pos + m[0].length\n      return cont(afterprop);\n    } else if (type == \"number\" || type == \"string\") {\n      cx.marked = jsonldMode ? \"property\" : (cx.style + \" property\");\n      return cont(afterprop);\n    } else if (type == \"jsonld-keyword\") {\n      return cont(afterprop);\n    } else if (isTS && isModifier(value)) {\n      cx.marked = \"keyword\"\n      return cont(objprop)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), afterprop);\n    } else if (type == \"spread\") {\n      return cont(expressionNoComma, afterprop);\n    } else if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(objprop);\n    } else if (type == \":\") {\n      return pass(afterprop)\n    }\n  }\n  function getterSetter(type) {\n    if (type != \"variable\") return pass(afterprop);\n    cx.marked = \"property\";\n    return cont(functiondef);\n  }\n  function afterprop(type) {\n    if (type == \":\") return cont(expressionNoComma);\n    if (type == \"(\") return pass(functiondef);\n  }\n  function commasep(what, end, sep) {\n    function proceed(type, value) {\n      if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n        var lex = cx.state.lexical;\n        if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n        return cont(function(type, value) {\n          if (type == end || value == end) return pass()\n          return pass(what)\n        }, proceed);\n      }\n      if (type == end || value == end) return cont();\n      return cont(expect(end));\n    }\n    return function(type, value) {\n      if (type == end || value == end) return cont();\n      return pass(what, proceed);\n    };\n  }\n  function contCommasep(what, end, info) {\n    for (var i = 3; i < arguments.length; i++)\n      cx.cc.push(arguments[i]);\n    return cont(pushlex(end, info), commasep(what, end), poplex);\n  }\n  function block(type) {\n    if (type == \"}\") return cont();\n    return pass(statement, block);\n  }\n  function maybetype(type, value) {\n    if (isTS) {\n      if (type == \":\") return cont(typeexpr);\n      if (value == \"?\") return cont(maybetype);\n    }\n  }\n  function mayberettype(type) {\n    if (isTS && type == \":\") {\n      if (cx.stream.match(/^\\s*\\w+\\s+is\\b/, false)) return cont(expression, isKW, typeexpr)\n      else return cont(typeexpr)\n    }\n  }\n  function isKW(_, value) {\n    if (value == \"is\") {\n      cx.marked = \"keyword\"\n      return cont()\n    }\n  }\n  function typeexpr(type, value) {\n    if (type == \"variable\" || value == \"void\") {\n      if (value == \"keyof\") {\n        cx.marked = \"keyword\"\n        return cont(typeexpr)\n      } else {\n        cx.marked = \"type\"\n        return cont(afterType)\n      }\n    }\n    if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n    if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType)\n    if (type == \"{\") return cont(pushlex(\"}\"), commasep(typeprop, \"}\", \",;\"), poplex, afterType)\n    if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType)\n  }\n  function maybeReturnType(type) {\n    if (type == \"=>\") return cont(typeexpr)\n  }\n  function typeprop(type, value) {\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\"\n      return cont(typeprop)\n    } else if (value == \"?\") {\n      return cont(typeprop)\n    } else if (type == \":\") {\n      return cont(typeexpr)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), typeprop)\n    }\n  }\n  function typearg(type) {\n    if (type == \"variable\") return cont(typearg)\n    else if (type == \":\") return cont(typeexpr)\n  }\n  function afterType(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n    if (value == \"|\" || type == \".\" || value == \"&\") return cont(typeexpr)\n    if (type == \"[\") return cont(expect(\"]\"), afterType)\n    if (value == \"extends\" || value == \"implements\") { cx.marked = \"keyword\"; return cont(typeexpr) }\n  }\n  function maybeTypeArgs(_, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n  }\n  function typeparam() {\n    return pass(typeexpr, maybeTypeDefault)\n  }\n  function maybeTypeDefault(_, value) {\n    if (value == \"=\") return cont(typeexpr)\n  }\n  function vardef(_, value) {\n    if (value == \"enum\") {cx.marked = \"keyword\"; return cont(enumdef)}\n    return pass(pattern, maybetype, maybeAssign, vardefCont);\n  }\n  function pattern(type, value) {\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(pattern) }\n    if (type == \"variable\") { register(value); return cont(); }\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"[\") return contCommasep(pattern, \"]\");\n    if (type == \"{\") return contCommasep(proppattern, \"}\");\n  }\n  function proppattern(type, value) {\n    if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n      register(value);\n      return cont(maybeAssign);\n    }\n    if (type == \"variable\") cx.marked = \"property\";\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"}\") return pass();\n    return cont(expect(\":\"), pattern, maybeAssign);\n  }\n  function maybeAssign(_type, value) {\n    if (value == \"=\") return cont(expressionNoComma);\n  }\n  function vardefCont(type) {\n    if (type == \",\") return cont(vardef);\n  }\n  function maybeelse(type, value) {\n    if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n  }\n  function forspec(type, value) {\n    if (value == \"await\") return cont(forspec);\n    if (type == \"(\") return cont(pushlex(\")\"), forspec1, expect(\")\"), poplex);\n  }\n  function forspec1(type) {\n    if (type == \"var\") return cont(vardef, expect(\";\"), forspec2);\n    if (type == \";\") return cont(forspec2);\n    if (type == \"variable\") return cont(formaybeinof);\n    return pass(expression, expect(\";\"), forspec2);\n  }\n  function formaybeinof(_type, value) {\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression); }\n    return cont(maybeoperatorComma, forspec2);\n  }\n  function forspec2(type, value) {\n    if (type == \";\") return cont(forspec3);\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression); }\n    return pass(expression, expect(\";\"), forspec3);\n  }\n  function forspec3(type) {\n    if (type != \")\") cont(expression);\n  }\n  function functiondef(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondef);}\n    if (type == \"variable\") {register(value); return cont(functiondef);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, statement, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondef)\n  }\n  function funarg(type, value) {\n    if (value == \"@\") cont(expression, funarg)\n    if (type == \"spread\") return cont(funarg);\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(funarg); }\n    return pass(pattern, maybetype, maybeAssign);\n  }\n  function classExpression(type, value) {\n    // Class expressions may have an optional name.\n    if (type == \"variable\") return className(type, value);\n    return classNameAfter(type, value);\n  }\n  function className(type, value) {\n    if (type == \"variable\") {register(value); return cont(classNameAfter);}\n  }\n  function classNameAfter(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, classNameAfter)\n    if (value == \"extends\" || value == \"implements\" || (isTS && type == \",\")) {\n      if (value == \"implements\") cx.marked = \"keyword\";\n      return cont(isTS ? typeexpr : expression, classNameAfter);\n    }\n    if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n  }\n  function classBody(type, value) {\n    if (type == \"async\" ||\n        (type == \"variable\" &&\n         (value == \"static\" || value == \"get\" || value == \"set\" || (isTS && isModifier(value))) &&\n         cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false))) {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      return cont(isTS ? classfield : functiondef, classBody);\n    }\n    if (type == \"[\")\n      return cont(expression, maybetype, expect(\"]\"), isTS ? classfield : functiondef, classBody)\n    if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \";\") return cont(classBody);\n    if (type == \"}\") return cont();\n    if (value == \"@\") return cont(expression, classBody)\n  }\n  function classfield(type, value) {\n    if (value == \"?\") return cont(classfield)\n    if (type == \":\") return cont(typeexpr, maybeAssign)\n    if (value == \"=\") return cont(expressionNoComma)\n    return pass(functiondef)\n  }\n  function afterExport(type, value) {\n    if (value == \"*\") { cx.marked = \"keyword\"; return cont(maybeFrom, expect(\";\")); }\n    if (value == \"default\") { cx.marked = \"keyword\"; return cont(expression, expect(\";\")); }\n    if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n    return pass(statement);\n  }\n  function exportField(type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(expect(\"variable\")); }\n    if (type == \"variable\") return pass(expressionNoComma, exportField);\n  }\n  function afterImport(type) {\n    if (type == \"string\") return cont();\n    if (type == \"(\") return pass(expression);\n    return pass(importSpec, maybeMoreImports, maybeFrom);\n  }\n  function importSpec(type, value) {\n    if (type == \"{\") return contCommasep(importSpec, \"}\");\n    if (type == \"variable\") register(value);\n    if (value == \"*\") cx.marked = \"keyword\";\n    return cont(maybeAs);\n  }\n  function maybeMoreImports(type) {\n    if (type == \",\") return cont(importSpec, maybeMoreImports)\n  }\n  function maybeAs(_type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(importSpec); }\n  }\n  function maybeFrom(_type, value) {\n    if (value == \"from\") { cx.marked = \"keyword\"; return cont(expression); }\n  }\n  function arrayLiteral(type) {\n    if (type == \"]\") return cont();\n    return pass(commasep(expressionNoComma, \"]\"));\n  }\n  function enumdef() {\n    return pass(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), commasep(enummember, \"}\"), poplex, poplex)\n  }\n  function enummember() {\n    return pass(pattern, maybeAssign);\n  }\n\n  function isContinuedStatement(state, textAfter) {\n    return state.lastType == \"operator\" || state.lastType == \",\" ||\n      isOperatorChar.test(textAfter.charAt(0)) ||\n      /[,.]/.test(textAfter.charAt(0));\n  }\n\n  function expressionAllowed(stream, state, backUp) {\n    return state.tokenize == tokenBase &&\n      /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(state.lastType) ||\n      (state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0))))\n  }\n\n  // Interface\n\n  return {\n    startState: function(basecolumn) {\n      var state = {\n        tokenize: tokenBase,\n        lastType: \"sof\",\n        cc: [],\n        lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n        localVars: parserConfig.localVars,\n        context: parserConfig.localVars && {vars: parserConfig.localVars},\n        indented: basecolumn || 0\n      };\n      if (parserConfig.globalVars && typeof parserConfig.globalVars == \"object\")\n        state.globalVars = parserConfig.globalVars;\n      return state;\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (!state.lexical.hasOwnProperty(\"align\"))\n          state.lexical.align = false;\n        state.indented = stream.indentation();\n        findFatArrow(stream, state);\n      }\n      if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n      var style = state.tokenize(stream, state);\n      if (type == \"comment\") return style;\n      state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n      return parseJS(state, style, type, content, stream);\n    },\n\n    indent: function(state, textAfter) {\n      if (state.tokenize == tokenComment) return CodeMirror.Pass;\n      if (state.tokenize != tokenBase) return 0;\n      var firstChar = textAfter && textAfter.charAt(0), lexical = state.lexical, top\n      // Kludge to prevent 'maybelse' from blocking lexical scope pops\n      if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n        var c = state.cc[i];\n        if (c == poplex) lexical = lexical.prev;\n        else if (c != maybeelse) break;\n      }\n      while ((lexical.type == \"stat\" || lexical.type == \"form\") &&\n             (firstChar == \"}\" || ((top = state.cc[state.cc.length - 1]) &&\n                                   (top == maybeoperatorComma || top == maybeoperatorNoComma) &&\n                                   !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))))\n        lexical = lexical.prev;\n      if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\")\n        lexical = lexical.prev;\n      var type = lexical.type, closing = firstChar == type;\n\n      if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info + 1 : 0);\n      else if (type == \"form\" && firstChar == \"{\") return lexical.indented;\n      else if (type == \"form\") return lexical.indented + indentUnit;\n      else if (type == \"stat\")\n        return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);\n      else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false)\n        return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);\n      else if (lexical.align) return lexical.column + (closing ? 0 : 1);\n      else return lexical.indented + (closing ? 0 : indentUnit);\n    },\n\n    electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n    blockCommentStart: jsonMode ? null : \"/*\",\n    blockCommentEnd: jsonMode ? null : \"*/\",\n    blockCommentContinue: jsonMode ? null : \" * \",\n    lineComment: jsonMode ? null : \"//\",\n    fold: \"brace\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n    helperType: jsonMode ? \"json\" : \"javascript\",\n    jsonldMode: jsonldMode,\n    jsonMode: jsonMode,\n\n    expressionAllowed: expressionAllowed,\n\n    skipExpression: function(state) {\n      var top = state.cc[state.cc.length - 1]\n      if (top == expression || top == expressionNoComma) state.cc.pop()\n    }\n  };\n});\n\nCodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\nCodeMirror.defineMIME(\"text/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/x-json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/ld+json\", {name: \"javascript\", jsonld: true});\nCodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\nCodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nvar htmlConfig = {\n  autoSelfClosers: {'area': true, 'base': true, 'br': true, 'col': true, 'command': true,\n                    'embed': true, 'frame': true, 'hr': true, 'img': true, 'input': true,\n                    'keygen': true, 'link': true, 'meta': true, 'param': true, 'source': true,\n                    'track': true, 'wbr': true, 'menuitem': true},\n  implicitlyClosed: {'dd': true, 'li': true, 'optgroup': true, 'option': true, 'p': true,\n                     'rp': true, 'rt': true, 'tbody': true, 'td': true, 'tfoot': true,\n                     'th': true, 'tr': true},\n  contextGrabbers: {\n    'dd': {'dd': true, 'dt': true},\n    'dt': {'dd': true, 'dt': true},\n    'li': {'li': true},\n    'option': {'option': true, 'optgroup': true},\n    'optgroup': {'optgroup': true},\n    'p': {'address': true, 'article': true, 'aside': true, 'blockquote': true, 'dir': true,\n          'div': true, 'dl': true, 'fieldset': true, 'footer': true, 'form': true,\n          'h1': true, 'h2': true, 'h3': true, 'h4': true, 'h5': true, 'h6': true,\n          'header': true, 'hgroup': true, 'hr': true, 'menu': true, 'nav': true, 'ol': true,\n          'p': true, 'pre': true, 'section': true, 'table': true, 'ul': true},\n    'rp': {'rp': true, 'rt': true},\n    'rt': {'rp': true, 'rt': true},\n    'tbody': {'tbody': true, 'tfoot': true},\n    'td': {'td': true, 'th': true},\n    'tfoot': {'tbody': true},\n    'th': {'td': true, 'th': true},\n    'thead': {'tbody': true, 'tfoot': true},\n    'tr': {'tr': true}\n  },\n  doNotIndent: {\"pre\": true},\n  allowUnquoted: true,\n  allowMissing: true,\n  caseFold: true\n}\n\nvar xmlConfig = {\n  autoSelfClosers: {},\n  implicitlyClosed: {},\n  contextGrabbers: {},\n  doNotIndent: {},\n  allowUnquoted: false,\n  allowMissing: false,\n  allowMissingTagName: false,\n  caseFold: false\n}\n\nCodeMirror.defineMode(\"xml\", function(editorConf, config_) {\n  var indentUnit = editorConf.indentUnit\n  var config = {}\n  var defaults = config_.htmlMode ? htmlConfig : xmlConfig\n  for (var prop in defaults) config[prop] = defaults[prop]\n  for (var prop in config_) config[prop] = config_[prop]\n\n  // Return variables for tokenizers\n  var type, setStyle;\n\n  function inText(stream, state) {\n    function chain(parser) {\n      state.tokenize = parser;\n      return parser(stream, state);\n    }\n\n    var ch = stream.next();\n    if (ch == \"<\") {\n      if (stream.eat(\"!\")) {\n        if (stream.eat(\"[\")) {\n          if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));\n          else return null;\n        } else if (stream.match(\"--\")) {\n          return chain(inBlock(\"comment\", \"-->\"));\n        } else if (stream.match(\"DOCTYPE\", true, true)) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          return chain(doctype(1));\n        } else {\n          return null;\n        }\n      } else if (stream.eat(\"?\")) {\n        stream.eatWhile(/[\\w\\._\\-]/);\n        state.tokenize = inBlock(\"meta\", \"?>\");\n        return \"meta\";\n      } else {\n        type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n        state.tokenize = inTag;\n        return \"tag bracket\";\n      }\n    } else if (ch == \"&\") {\n      var ok;\n      if (stream.eat(\"#\")) {\n        if (stream.eat(\"x\")) {\n          ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n        } else {\n          ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n        }\n      } else {\n        ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n      }\n      return ok ? \"atom\" : \"error\";\n    } else {\n      stream.eatWhile(/[^&<]/);\n      return null;\n    }\n  }\n  inText.isInText = true;\n\n  function inTag(stream, state) {\n    var ch = stream.next();\n    if (ch == \">\" || (ch == \"/\" && stream.eat(\">\"))) {\n      state.tokenize = inText;\n      type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n      return \"tag bracket\";\n    } else if (ch == \"=\") {\n      type = \"equals\";\n      return null;\n    } else if (ch == \"<\") {\n      state.tokenize = inText;\n      state.state = baseState;\n      state.tagName = state.tagStart = null;\n      var next = state.tokenize(stream, state);\n      return next ? next + \" tag error\" : \"tag error\";\n    } else if (/[\\'\\\"]/.test(ch)) {\n      state.tokenize = inAttribute(ch);\n      state.stringStartCol = stream.column();\n      return state.tokenize(stream, state);\n    } else {\n      stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n      return \"word\";\n    }\n  }\n\n  function inAttribute(quote) {\n    var closure = function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.next() == quote) {\n          state.tokenize = inTag;\n          break;\n        }\n      }\n      return \"string\";\n    };\n    closure.isInAttribute = true;\n    return closure;\n  }\n\n  function inBlock(style, terminator) {\n    return function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.match(terminator)) {\n          state.tokenize = inText;\n          break;\n        }\n        stream.next();\n      }\n      return style;\n    };\n  }\n  function doctype(depth) {\n    return function(stream, state) {\n      var ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == \"<\") {\n          state.tokenize = doctype(depth + 1);\n          return state.tokenize(stream, state);\n        } else if (ch == \">\") {\n          if (depth == 1) {\n            state.tokenize = inText;\n            break;\n          } else {\n            state.tokenize = doctype(depth - 1);\n            return state.tokenize(stream, state);\n          }\n        }\n      }\n      return \"meta\";\n    };\n  }\n\n  function Context(state, tagName, startOfLine) {\n    this.prev = state.context;\n    this.tagName = tagName;\n    this.indent = state.indented;\n    this.startOfLine = startOfLine;\n    if (config.doNotIndent.hasOwnProperty(tagName) || (state.context && state.context.noIndent))\n      this.noIndent = true;\n  }\n  function popContext(state) {\n    if (state.context) state.context = state.context.prev;\n  }\n  function maybePopContext(state, nextTagName) {\n    var parentTagName;\n    while (true) {\n      if (!state.context) {\n        return;\n      }\n      parentTagName = state.context.tagName;\n      if (!config.contextGrabbers.hasOwnProperty(parentTagName) ||\n          !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n        return;\n      }\n      popContext(state);\n    }\n  }\n\n  function baseState(type, stream, state) {\n    if (type == \"openTag\") {\n      state.tagStart = stream.column();\n      return tagNameState;\n    } else if (type == \"closeTag\") {\n      return closeTagNameState;\n    } else {\n      return baseState;\n    }\n  }\n  function tagNameState(type, stream, state) {\n    if (type == \"word\") {\n      state.tagName = stream.current();\n      setStyle = \"tag\";\n      return attrState;\n    } else if (config.allowMissingTagName && type == \"endTag\") {\n      setStyle = \"tag bracket\";\n      return attrState(type, stream, state);\n    } else {\n      setStyle = \"error\";\n      return tagNameState;\n    }\n  }\n  function closeTagNameState(type, stream, state) {\n    if (type == \"word\") {\n      var tagName = stream.current();\n      if (state.context && state.context.tagName != tagName &&\n          config.implicitlyClosed.hasOwnProperty(state.context.tagName))\n        popContext(state);\n      if ((state.context && state.context.tagName == tagName) || config.matchClosing === false) {\n        setStyle = \"tag\";\n        return closeState;\n      } else {\n        setStyle = \"tag error\";\n        return closeStateErr;\n      }\n    } else if (config.allowMissingTagName && type == \"endTag\") {\n      setStyle = \"tag bracket\";\n      return closeState(type, stream, state);\n    } else {\n      setStyle = \"error\";\n      return closeStateErr;\n    }\n  }\n\n  function closeState(type, _stream, state) {\n    if (type != \"endTag\") {\n      setStyle = \"error\";\n      return closeState;\n    }\n    popContext(state);\n    return baseState;\n  }\n  function closeStateErr(type, stream, state) {\n    setStyle = \"error\";\n    return closeState(type, stream, state);\n  }\n\n  function attrState(type, _stream, state) {\n    if (type == \"word\") {\n      setStyle = \"attribute\";\n      return attrEqState;\n    } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n      var tagName = state.tagName, tagStart = state.tagStart;\n      state.tagName = state.tagStart = null;\n      if (type == \"selfcloseTag\" ||\n          config.autoSelfClosers.hasOwnProperty(tagName)) {\n        maybePopContext(state, tagName);\n      } else {\n        maybePopContext(state, tagName);\n        state.context = new Context(state, tagName, tagStart == state.indented);\n      }\n      return baseState;\n    }\n    setStyle = \"error\";\n    return attrState;\n  }\n  function attrEqState(type, stream, state) {\n    if (type == \"equals\") return attrValueState;\n    if (!config.allowMissing) setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrValueState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    if (type == \"word\" && config.allowUnquoted) {setStyle = \"string\"; return attrState;}\n    setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrContinuedState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    return attrState(type, stream, state);\n  }\n\n  return {\n    startState: function(baseIndent) {\n      var state = {tokenize: inText,\n                   state: baseState,\n                   indented: baseIndent || 0,\n                   tagName: null, tagStart: null,\n                   context: null}\n      if (baseIndent != null) state.baseIndent = baseIndent\n      return state\n    },\n\n    token: function(stream, state) {\n      if (!state.tagName && stream.sol())\n        state.indented = stream.indentation();\n\n      if (stream.eatSpace()) return null;\n      type = null;\n      var style = state.tokenize(stream, state);\n      if ((style || type) && style != \"comment\") {\n        setStyle = null;\n        state.state = state.state(type || style, stream, state);\n        if (setStyle)\n          style = setStyle == \"error\" ? style + \" error\" : setStyle;\n      }\n      return style;\n    },\n\n    indent: function(state, textAfter, fullLine) {\n      var context = state.context;\n      // Indent multi-line strings (e.g. css).\n      if (state.tokenize.isInAttribute) {\n        if (state.tagStart == state.indented)\n          return state.stringStartCol + 1;\n        else\n          return state.indented + indentUnit;\n      }\n      if (context && context.noIndent) return CodeMirror.Pass;\n      if (state.tokenize != inTag && state.tokenize != inText)\n        return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n      // Indent the starts of attribute names.\n      if (state.tagName) {\n        if (config.multilineTagIndentPastTag !== false)\n          return state.tagStart + state.tagName.length + 2;\n        else\n          return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n      }\n      if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n      var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n      if (tagAfter && tagAfter[1]) { // Closing tag spotted\n        while (context) {\n          if (context.tagName == tagAfter[2]) {\n            context = context.prev;\n            break;\n          } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n            context = context.prev;\n          } else {\n            break;\n          }\n        }\n      } else if (tagAfter) { // Opening tag spotted\n        while (context) {\n          var grabbers = config.contextGrabbers[context.tagName];\n          if (grabbers && grabbers.hasOwnProperty(tagAfter[2]))\n            context = context.prev;\n          else\n            break;\n        }\n      }\n      while (context && context.prev && !context.startOfLine)\n        context = context.prev;\n      if (context) return context.indent + indentUnit;\n      else return state.baseIndent || 0;\n    },\n\n    electricInput: /<\\/[\\s\\w:]+>$/,\n    blockCommentStart: \"<!--\",\n    blockCommentEnd: \"-->\",\n\n    configuration: config.htmlMode ? \"html\" : \"xml\",\n    helperType: config.htmlMode ? \"html\" : \"xml\",\n\n    skipAttribute: function(state) {\n      if (state.state == attrValueState)\n        state.state = attrState\n    }\n  };\n});\n\nCodeMirror.defineMIME(\"text/xml\", \"xml\");\nCodeMirror.defineMIME(\"application/xml\", \"xml\");\nif (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\"))\n  CodeMirror.defineMIME(\"text/html\", {name: \"xml\", htmlMode: true});\n\n});\n","\nvar content = require(\"!!../../css-loader/index.js??ref--6-1!./base16-dark.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../css-loader/index.js??ref--6-1!./base16-dark.css\", function() {\n\t\tvar newContent = require(\"!!../../css-loader/index.js??ref--6-1!./base16-dark.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","exports = module.exports = require(\"../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".CodeMirror-simplescroll-horizontal div, .CodeMirror-simplescroll-vertical div {\\n  position: absolute;\\n  background: #ccc;\\n  -moz-box-sizing: border-box;\\n  box-sizing: border-box;\\n  border: 1px solid #bbb;\\n  border-radius: 2px;\\n}\\n\\n.CodeMirror-simplescroll-horizontal, .CodeMirror-simplescroll-vertical {\\n  position: absolute;\\n  z-index: 6;\\n  background: #eee;\\n}\\n\\n.CodeMirror-simplescroll-horizontal {\\n  bottom: 0; left: 0;\\n  height: 8px;\\n}\\n.CodeMirror-simplescroll-horizontal div {\\n  bottom: 0;\\n  height: 100%;\\n}\\n\\n.CodeMirror-simplescroll-vertical {\\n  right: 0; top: 0;\\n  width: 8px;\\n}\\n.CodeMirror-simplescroll-vertical div {\\n  right: 0;\\n  width: 100%;\\n}\\n\\n\\n.CodeMirror-overlayscroll .CodeMirror-scrollbar-filler, .CodeMirror-overlayscroll .CodeMirror-gutter-filler {\\n  display: none;\\n}\\n\\n.CodeMirror-overlayscroll-horizontal div, .CodeMirror-overlayscroll-vertical div {\\n  position: absolute;\\n  background: #bcd;\\n  border-radius: 3px;\\n}\\n\\n.CodeMirror-overlayscroll-horizontal, .CodeMirror-overlayscroll-vertical {\\n  position: absolute;\\n  z-index: 6;\\n}\\n\\n.CodeMirror-overlayscroll-horizontal {\\n  bottom: 0; left: 0;\\n  height: 6px;\\n}\\n.CodeMirror-overlayscroll-horizontal div {\\n  bottom: 0;\\n  height: 100%;\\n}\\n\\n.CodeMirror-overlayscroll-vertical {\\n  right: 0; top: 0;\\n  width: 6px;\\n}\\n.CodeMirror-overlayscroll-vertical div {\\n  right: 0;\\n  width: 100%;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/* BASICS */\\n\\n.CodeMirror {\\n  /* Set height, width, borders, and global font properties here */\\n  font-family: monospace;\\n  height: 300px;\\n  color: black;\\n  direction: ltr;\\n}\\n\\n/* PADDING */\\n\\n.CodeMirror-lines {\\n  padding: 4px 0; /* Vertical padding around content */\\n}\\n.CodeMirror pre {\\n  padding: 0 4px; /* Horizontal padding of content */\\n}\\n\\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\\n  background-color: white; /* The little square between H and V scrollbars */\\n}\\n\\n/* GUTTER */\\n\\n.CodeMirror-gutters {\\n  border-right: 1px solid #ddd;\\n  background-color: #f7f7f7;\\n  white-space: nowrap;\\n}\\n.CodeMirror-linenumbers {}\\n.CodeMirror-linenumber {\\n  padding: 0 3px 0 5px;\\n  min-width: 20px;\\n  text-align: right;\\n  color: #999;\\n  white-space: nowrap;\\n}\\n\\n.CodeMirror-guttermarker { color: black; }\\n.CodeMirror-guttermarker-subtle { color: #999; }\\n\\n/* CURSOR */\\n\\n.CodeMirror-cursor {\\n  border-left: 1px solid black;\\n  border-right: none;\\n  width: 0;\\n}\\n/* Shown when moving in bi-directional text */\\n.CodeMirror div.CodeMirror-secondarycursor {\\n  border-left: 1px solid silver;\\n}\\n.cm-fat-cursor .CodeMirror-cursor {\\n  width: auto;\\n  border: 0 !important;\\n  background: #7e7;\\n}\\n.cm-fat-cursor div.CodeMirror-cursors {\\n  z-index: 1;\\n}\\n.cm-fat-cursor-mark {\\n  background-color: rgba(20, 255, 20, 0.5);\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\n  -moz-animation: blink 1.06s steps(1) infinite;\\n  animation: blink 1.06s steps(1) infinite;\\n}\\n.cm-animate-fat-cursor {\\n  width: auto;\\n  border: 0;\\n  -webkit-animation: blink 1.06s steps(1) infinite;\\n  -moz-animation: blink 1.06s steps(1) infinite;\\n  animation: blink 1.06s steps(1) infinite;\\n  background-color: #7e7;\\n}\\n@-moz-keyframes blink {\\n  0% {}\\n  50% { background-color: transparent; }\\n  100% {}\\n}\\n@-webkit-keyframes blink {\\n  0% {}\\n  50% { background-color: transparent; }\\n  100% {}\\n}\\n@keyframes blink {\\n  0% {}\\n  50% { background-color: transparent; }\\n  100% {}\\n}\\n\\n/* Can style cursor different in overwrite (non-insert) mode */\\n.CodeMirror-overwrite .CodeMirror-cursor {}\\n\\n.cm-tab { display: inline-block; text-decoration: inherit; }\\n\\n.CodeMirror-rulers {\\n  position: absolute;\\n  left: 0; right: 0; top: -50px; bottom: -20px;\\n  overflow: hidden;\\n}\\n.CodeMirror-ruler {\\n  border-left: 1px solid #ccc;\\n  top: 0; bottom: 0;\\n  position: absolute;\\n}\\n\\n/* DEFAULT THEME */\\n\\n.cm-s-default .cm-header {color: blue;}\\n.cm-s-default .cm-quote {color: #090;}\\n.cm-negative {color: #d44;}\\n.cm-positive {color: #292;}\\n.cm-header, .cm-strong {font-weight: bold;}\\n.cm-em {font-style: italic;}\\n.cm-link {text-decoration: underline;}\\n.cm-strikethrough {text-decoration: line-through;}\\n\\n.cm-s-default .cm-keyword {color: #708;}\\n.cm-s-default .cm-atom {color: #219;}\\n.cm-s-default .cm-number {color: #164;}\\n.cm-s-default .cm-def {color: #00f;}\\n.cm-s-default .cm-variable,\\n.cm-s-default .cm-punctuation,\\n.cm-s-default .cm-property,\\n.cm-s-default .cm-operator {}\\n.cm-s-default .cm-variable-2 {color: #05a;}\\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\\n.cm-s-default .cm-comment {color: #a50;}\\n.cm-s-default .cm-string {color: #a11;}\\n.cm-s-default .cm-string-2 {color: #f50;}\\n.cm-s-default .cm-meta {color: #555;}\\n.cm-s-default .cm-qualifier {color: #555;}\\n.cm-s-default .cm-builtin {color: #30a;}\\n.cm-s-default .cm-bracket {color: #997;}\\n.cm-s-default .cm-tag {color: #170;}\\n.cm-s-default .cm-attribute {color: #00c;}\\n.cm-s-default .cm-hr {color: #999;}\\n.cm-s-default .cm-link {color: #00c;}\\n\\n.cm-s-default .cm-error {color: #f00;}\\n.cm-invalidchar {color: #f00;}\\n\\n.CodeMirror-composing { border-bottom: 2px solid; }\\n\\n/* Default styles for common addons */\\n\\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\\n.CodeMirror-activeline-background {background: #e8f2ff;}\\n\\n/* STOP */\\n\\n/* The rest of this file contains styles related to the mechanics of\\n   the editor. You probably shouldn't touch them. */\\n\\n.CodeMirror {\\n  position: relative;\\n  overflow: hidden;\\n  background: white;\\n}\\n\\n.CodeMirror-scroll {\\n  overflow: scroll !important; /* Things will break if this is overridden */\\n  /* 30px is the magic margin used to hide the element's real scrollbars */\\n  /* See overflow: hidden in .CodeMirror */\\n  margin-bottom: -30px; margin-right: -30px;\\n  padding-bottom: 30px;\\n  height: 100%;\\n  outline: none; /* Prevent dragging from highlighting the element */\\n  position: relative;\\n}\\n.CodeMirror-sizer {\\n  position: relative;\\n  border-right: 30px solid transparent;\\n}\\n\\n/* The fake, visible scrollbars. Used to force redraw during scrolling\\n   before actual scrolling happens, thus preventing shaking and\\n   flickering artifacts. */\\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\\n  position: absolute;\\n  z-index: 6;\\n  display: none;\\n}\\n.CodeMirror-vscrollbar {\\n  right: 0; top: 0;\\n  overflow-x: hidden;\\n  overflow-y: scroll;\\n}\\n.CodeMirror-hscrollbar {\\n  bottom: 0; left: 0;\\n  overflow-y: hidden;\\n  overflow-x: scroll;\\n}\\n.CodeMirror-scrollbar-filler {\\n  right: 0; bottom: 0;\\n}\\n.CodeMirror-gutter-filler {\\n  left: 0; bottom: 0;\\n}\\n\\n.CodeMirror-gutters {\\n  position: absolute; left: 0; top: 0;\\n  min-height: 100%;\\n  z-index: 3;\\n}\\n.CodeMirror-gutter {\\n  white-space: normal;\\n  height: 100%;\\n  display: inline-block;\\n  vertical-align: top;\\n  margin-bottom: -30px;\\n}\\n.CodeMirror-gutter-wrapper {\\n  position: absolute;\\n  z-index: 4;\\n  background: none !important;\\n  border: none !important;\\n}\\n.CodeMirror-gutter-background {\\n  position: absolute;\\n  top: 0; bottom: 0;\\n  z-index: 4;\\n}\\n.CodeMirror-gutter-elt {\\n  position: absolute;\\n  cursor: default;\\n  z-index: 4;\\n}\\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\\n\\n.CodeMirror-lines {\\n  cursor: text;\\n  min-height: 1px; /* prevents collapsing before first draw */\\n}\\n.CodeMirror pre {\\n  /* Reset some styles that the rest of the page might have set */\\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\\n  border-width: 0;\\n  background: transparent;\\n  font-family: inherit;\\n  font-size: inherit;\\n  margin: 0;\\n  white-space: pre;\\n  word-wrap: normal;\\n  line-height: inherit;\\n  color: inherit;\\n  z-index: 2;\\n  position: relative;\\n  overflow: visible;\\n  -webkit-tap-highlight-color: transparent;\\n  -webkit-font-variant-ligatures: contextual;\\n  font-variant-ligatures: contextual;\\n}\\n.CodeMirror-wrap pre {\\n  word-wrap: break-word;\\n  white-space: pre-wrap;\\n  word-break: normal;\\n}\\n\\n.CodeMirror-linebackground {\\n  position: absolute;\\n  left: 0; right: 0; top: 0; bottom: 0;\\n  z-index: 0;\\n}\\n\\n.CodeMirror-linewidget {\\n  position: relative;\\n  z-index: 2;\\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\\n}\\n\\n.CodeMirror-widget {}\\n\\n.CodeMirror-rtl pre { direction: rtl; }\\n\\n.CodeMirror-code {\\n  outline: none;\\n}\\n\\n/* Force content-box sizing for the elements where we expect it */\\n.CodeMirror-scroll,\\n.CodeMirror-sizer,\\n.CodeMirror-gutter,\\n.CodeMirror-gutters,\\n.CodeMirror-linenumber {\\n  -moz-box-sizing: content-box;\\n  box-sizing: content-box;\\n}\\n\\n.CodeMirror-measure {\\n  position: absolute;\\n  width: 100%;\\n  height: 0;\\n  overflow: hidden;\\n  visibility: hidden;\\n}\\n\\n.CodeMirror-cursor {\\n  position: absolute;\\n  pointer-events: none;\\n}\\n.CodeMirror-measure pre { position: static; }\\n\\ndiv.CodeMirror-cursors {\\n  visibility: hidden;\\n  position: relative;\\n  z-index: 3;\\n}\\ndiv.CodeMirror-dragcursors {\\n  visibility: visible;\\n}\\n\\n.CodeMirror-focused div.CodeMirror-cursors {\\n  visibility: visible;\\n}\\n\\n.CodeMirror-selected { background: #d9d9d9; }\\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\\n.CodeMirror-crosshair { cursor: crosshair; }\\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\\n\\n.cm-searching {\\n  background-color: #ffa;\\n  background-color: rgba(255, 255, 0, .4);\\n}\\n\\n/* Used to force a border model for a node */\\n.cm-force-border { padding-right: .1px; }\\n\\n@media print {\\n  /* Hide the cursor when printing */\\n  .CodeMirror div.CodeMirror-cursors {\\n    visibility: hidden;\\n  }\\n}\\n\\n/* See issue #2901 */\\n.cm-tab-wrap-hack:after { content: ''; }\\n\\n/* Help users use markselection to safely style text background */\\nspan.CodeMirror-selectedtext { background: none; }\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n\\n    Name:       Base16 Default Dark\\n    Author:     Chris Kempson (http://chriskempson.com)\\n\\n    CodeMirror template by Jan T. Sott (https://github.com/idleberg/base16-codemirror)\\n    Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16)\\n\\n*/\\n\\n.cm-s-base16-dark.CodeMirror { background: #151515; color: #e0e0e0; }\\n.cm-s-base16-dark div.CodeMirror-selected { background: #303030; }\\n.cm-s-base16-dark .CodeMirror-line::selection, .cm-s-base16-dark .CodeMirror-line > span::selection, .cm-s-base16-dark .CodeMirror-line > span > span::selection { background: rgba(48, 48, 48, .99); }\\n.cm-s-base16-dark .CodeMirror-line::-moz-selection, .cm-s-base16-dark .CodeMirror-line > span::-moz-selection, .cm-s-base16-dark .CodeMirror-line > span > span::-moz-selection { background: rgba(48, 48, 48, .99); }\\n.cm-s-base16-dark .CodeMirror-gutters { background: #151515; border-right: 0px; }\\n.cm-s-base16-dark .CodeMirror-guttermarker { color: #ac4142; }\\n.cm-s-base16-dark .CodeMirror-guttermarker-subtle { color: #505050; }\\n.cm-s-base16-dark .CodeMirror-linenumber { color: #505050; }\\n.cm-s-base16-dark .CodeMirror-cursor { border-left: 1px solid #b0b0b0; }\\n\\n.cm-s-base16-dark span.cm-comment { color: #8f5536; }\\n.cm-s-base16-dark span.cm-atom { color: #aa759f; }\\n.cm-s-base16-dark span.cm-number { color: #aa759f; }\\n\\n.cm-s-base16-dark span.cm-property, .cm-s-base16-dark span.cm-attribute { color: #90a959; }\\n.cm-s-base16-dark span.cm-keyword { color: #ac4142; }\\n.cm-s-base16-dark span.cm-string { color: #f4bf75; }\\n\\n.cm-s-base16-dark span.cm-variable { color: #90a959; }\\n.cm-s-base16-dark span.cm-variable-2 { color: #6a9fb5; }\\n.cm-s-base16-dark span.cm-def { color: #d28445; }\\n.cm-s-base16-dark span.cm-bracket { color: #e0e0e0; }\\n.cm-s-base16-dark span.cm-tag { color: #ac4142; }\\n.cm-s-base16-dark span.cm-link { color: #aa759f; }\\n.cm-s-base16-dark span.cm-error { background: #ac4142; color: #b0b0b0; }\\n\\n.cm-s-base16-dark .CodeMirror-activeline-background { background: #202020; }\\n.cm-s-base16-dark .CodeMirror-matchingbracket { text-decoration: underline; color: white !important; }\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.CodeMirror {\\n  /* Set height, width, borders, and global font properties here */\\n  min-width: 100%;\\n  width: fit-content;\\n\\n  min-height: 100%;\\n  height: fit-content;\\n\\n  font-family: monospace;\\n  color: black;\\n  direction: ltr;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.treefm {\\n  height: calc(100% - 34px);\\n}\\n\\n.global_local_switch {\\n  height: 30px;\\n}\\n\\n.webpack_button {\\n  color: transparent;\\n  border: 1px solid #0000;\\n  background-color: transparent;\\n  background-image: url('res/webpack.png');\\n  width: 30px;\\n  height: 30px;\\n  background-repeat: no-repeat;\\n  background-position: center center;\\n  background-size: contain;\\n}\\n\\n.webpack_button:hover {\\n  background-color: transparent;\\n  border: 1px solid #BBB;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.split_ui {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.split_ui_horizontal {\\n  display: inline-block;\\n  overflow: auto;\\n  height: 100%;\\n}\\n\\n.split_ui_horizontal_line {\\n  display: inline-block;\\n  background-color: #000;\\n  width: 3px;\\n  height: 100%;\\n  cursor: col-resize;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".tabs_ui_container {\\n  height: 100%;\\n}\\n\\n.tabs_ui_container .tabs_ui_menu {\\n  display: block;\\n  margin: 0 auto;\\n  list-style-type: none;\\n  padding: 0;\\n}\\n\\n.tabs_ui_display {\\n  overflow: auto;\\n}\\n\\n.tabs_ui_menu_item {\\n  display: inline-block;\\n  background-color: #111;\\n  color: #DDD;\\n\\n  cursor: default;\\n\\n  -webkit-touch-callout: none; /* iOS Safari */\\n  -webkit-user-select: none; /* Safari */\\n   -khtml-user-select: none; /* Konqueror HTML */\\n     -moz-user-select: none; /* Firefox */\\n      -ms-user-select: none; /* Internet Explorer/Edge */\\n          user-select: none; /* Non-prefixed version, currently\\n                                supported by Chrome and Opera */\\n}\\n\\n.tabs_ui_menu_item div {\\n  display: inline-block;\\n  padding: 3px 10px;\\n  font-size: 14px;\\n}\\n\\n.tabs_ui_menu_item button {\\n  display: inline-block;\\n  padding: 3px 5px;\\n  font-size: 14px;\\n  border: 0;\\n  color: #DDD;\\n  background-color: transparent;\\n}\\n\\n.tabs_ui_menu_item div:hover, .tabs_ui_menu_item button:hover {\\n  background-color: #222;\\n}\\n\\n.tabs_ui_selected {\\n  background-color: #151515;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"body {\\n  overflow: hidden;\\n}\\n\\n.tools {\\n  position: fixed;\\n  bottom: 0;\\n  right: 100px;\\n}\\n\\n.tools button {\\n  width: 64px;\\n  height: 32px;\\n}\\n\\nbutton {\\n  background-color: #222;\\n  color: #FFF;\\n  border: 1px solid #444;\\n}\\n\\nbutton:hover {\\n  background-color: #111;\\n}\\n\\n.edit_switch {\\n  display: inline-block;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".treefm {\\n  background-color: #111;\\n  font-size: 14px;\\n  padding: 2px;\\n  user-select: none;\\n}\\n\\n.treefm_dir_content {\\n  display: none;\\n}\\n\\n.treefm_item {\\n  color: #DDD;\\n  padding: 2px 10px;\\n  white-space: nowrap;\\n}\\n\\n.treefm_item:hover, .treefm_contexmenu div:hover {\\n  background-color: #1C1C1C;\\n  cursor: default;\\n}\\n\\n.treefm_contexmenu {\\n  display: none;\\n  position: fixed;\\n  background-color: #090909;\\n  color: #DDD;\\n  cursor: default;\\n  font-size: 15px;\\n  z-index: 2;\\n}\\n\\n.treefm_contexmenu div {\\n  padding: 2px 10px;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".window_mod {\\n  position: fixed;\\n  top: 100px;\\n  left: 100px;\\n  padding: 0;\\n\\n  background-color: #000000dd;\\n  border: 1px solid #333;\\n\\n  min-height: 150px;\\n  min-width: 250px;\\n}\\n\\n.window_mod header {\\n  color: rgb(0, 201, 255);\\n  height: 25px;\\n  cursor: default;\\n  -moz-user-select: none;\\n  -khtml-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  line-height: 25px;\\n}\\n\\n.window_mod_titlebar {\\n  float:left;\\n  line-height: 25px;\\n  display: inline-block;\\n  padding: 0px 10px;\\n  height: 100%;\\n  width: calc(100% - 72px);\\n}\\n\\n.window_mod header .window_mod_actions {\\n  display: inline-block;\\n  vertical-align: middle;\\n  margin-right: 10px;\\n  height: 100%;\\n  line-height: 25px;\\n  float:right;\\n}\\n\\n.window_mod header button {\\n  display: inline-block;\\n  background-color: #111;\\n  color: #FFF;\\n  border: 1px solid #333;\\n  margin: 0;\\n  padding: 0;\\n  width: 18px;\\n  height: 18px;\\n}\\n\\n.window_mod header button:hover {\\n  background-color: #050505;\\n}\\n\\n.window_mod .window_mod_content {\\n  height: calc(100% - 25px);\\n  overflow: auto;\\n}\\n\\n/* Resz */\\n\\n.resizeN {\\n  cursor: n-resize;\\n  width: calc(100% - 16px);\\n  height: 10px;\\n  top: -10px;\\n  left: 8px;\\n}\\n\\n.resizeNE {\\n  cursor: ne-resize;\\n  width: 20px;\\n  height: 20px;\\n  right: -10px;\\n  top: -10px;\\n}\\n\\n.resizeE {\\n  cursor: e-resize;\\n  width: 10px;\\n  height: calc(100% - 16px);\\n  right: -10px;\\n  top: 8px;\\n}\\n\\n.resizeSE {\\n  cursor: se-resize;\\n  width: 20px;\\n  height: 20px;\\n  right: -10px;\\n  bottom: -10px;\\n}\\n\\n.resizeS {\\n  cursor: s-resize;\\n  width: calc(100% - 16px);\\n  height: 10px;\\n  bottom: -10px;\\n  left: 8px;\\n}\\n\\n.resizeSW {\\n  cursor: sw-resize;\\n  width: 20px;\\n  height: 20px;\\n  left: -10px;\\n  bottom: -10px;\\n}\\n\\n.resizeW {\\n  cursor: w-resize;\\n  width: 10px;\\n  height: calc(100% - 16px);\\n  left: -10px;\\n  top: 8px;\\n}\\n\\n.resizeNW {\\n  cursor: nw-resize;\\n  width: 20px;\\n  height: 20px;\\n  left: -10px;\\n  top: -10px;\\n}\\n\\n.resize {\\n  position: absolute;\\n/*  background-color: red;*/\\n  z-index: 1;\\n}\\n\\n.mouse_div {\\n  position: absolute;\\n  left: 0; top: 0; right: 0; bottom: 0;\\n  z-index: 99;\\n\\n  display: none;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (global.location && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (global.location ? location.hostname : 'localhost');\n  this.port = opts.port || (global.location && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // other options for Node.js client\n  var freeGlobal = typeof global === 'object' && global;\n  if (freeGlobal.global === freeGlobal) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0)\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","\n/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    if (!global.___eio) global.___eio = [];\n    callbacks = global.___eio;\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (global.document && global.addEventListener) {\n    global.addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname !== global.location.hostname ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    if (this.supportsBinary) {\n      xhr.responseType = 'arraybuffer';\n    }\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (contentType !== 'application/octet-stream') {\n              xhr.responseType = 'text';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      if (this.xhr.responseType === 'arraybuffer') {\n        data = this.xhr.response || this.xhr.responseText;\n      } else {\n        data = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response));\n      }\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (global.document) {\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\nvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\nvar NodeWebSocket;\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocket = BrowserWebSocket;\nif (!WebSocket && typeof window === 'undefined') {\n  WebSocket = NodeWebSocket;\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocket = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n  var opts = {\n    agent: this.agent,\n    perMessageDeflate: this.perMessageDeflate\n  };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws = this.usingBrowserWebSocket ? (protocols ? new WebSocket(uri, protocols) : new WebSocket(uri)) : new WebSocket(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? global.Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n};\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new global[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (global && global.ArrayBuffer) {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (Blob && data instanceof global.Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    packet.data = fr.result;\n    exports.encodePacket(packet, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (Blob && packet.data instanceof global.Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += global.btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint, strict) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tif (strict) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t\t' is not a scalar value'\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint, strict) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\t\tcodePoint = 0xFFFD;\n\t\t\t}\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string, opts) {\n\t\topts = opts || {};\n\t\tvar strict = false !== opts.strict;\n\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, its not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol(strict) {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString, opts) {\n\t\topts = opts || {};\n\t\tvar strict = false !== opts.strict;\n\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.1.2',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof global.Blob === 'function' || toString.call(global.Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof global.File === 'function' || toString.call(global.File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof global.Buffer === 'function' && global.Buffer.isBuffer && global.Buffer.isBuffer(obj)) ||\n     (typeof global.ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n     (withNativeBlob && obj instanceof Blob) ||\n     (withNativeFile && obj instanceof File)\n    ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/**\r\n * Compiles a querystring\r\n * Returns string representation of the object\r\n *\r\n * @param {Object}\r\n * @api private\r\n */\r\n\r\nexports.encode = function (obj) {\r\n  var str = '';\r\n\r\n  for (var i in obj) {\r\n    if (obj.hasOwnProperty(i)) {\r\n      if (str.length) str += '&';\r\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\r\n    }\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\n/**\r\n * Parses a simple querystring into an object\r\n *\r\n * @param {String} qs\r\n * @api private\r\n */\r\n\r\nexports.decode = function(qs){\r\n  var qry = {};\r\n  var pairs = qs.split('&');\r\n  for (var i = 0, l = pairs.length; i < l; i++) {\r\n    var pair = pairs[i].split('=');\r\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\r\n  }\r\n  return qry;\r\n};\r\n","/**\r\n * Parses an URI\r\n *\r\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\r\n * @api private\r\n */\r\n\r\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\r\n\r\nvar parts = [\r\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\r\n];\r\n\r\nmodule.exports = function parseuri(str) {\r\n    var src = str,\r\n        b = str.indexOf('['),\r\n        e = str.indexOf(']');\r\n\r\n    if (b != -1 && e != -1) {\r\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\r\n    }\r\n\r\n    var m = re.exec(str || ''),\r\n        uri = {},\r\n        i = 14;\r\n\r\n    while (i--) {\r\n        uri[parts[i]] = m[i] || '';\r\n    }\r\n\r\n    if (b != -1 && e != -1) {\r\n        uri.source = src;\r\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\r\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\r\n        uri.ipv6uri = true;\r\n    }\r\n\r\n    return uri;\r\n};\r\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = { type: parser.EVENT, data: args };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  delete this.flags;\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  if (packet.nsp !== this.nsp) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags = this.flags || {};\n  this.flags.compress = compress;\n  return this;\n};\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof global.Blob === 'function' || toString.call(global.Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof global.File === 'function' || toString.call(global.File) === '[object FileConstructor]';\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar hasBin = require('has-binary2');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  if ((obj.type === exports.EVENT || obj.type === exports.ACK) && hasBin(obj.data)) {\n    obj.type = obj.type === exports.EVENT ? exports.BINARY_EVENT : exports.BINARY_ACK;\n  }\n\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  }\n  else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    str += JSON.stringify(obj.data);\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an ecoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  }\n  else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  }\n  else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var buf = '';\n    while (str.charAt(++i) !== '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      p.nsp += c;\n      if (i === str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i === str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","\nmodule.exports = isBuf;\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n         (global.ArrayBuffer && (obj instanceof ArrayBuffer || ArrayBuffer.isView(obj)));\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","module.exports = \"<button class=\\\"editor_btn\\\">&lt;&sol;&gt;</button>\\n\";","'use strict'\n\n//require(\"./style.css\");\n\nconst CodeMirror = require('codemirror');\n\nrequire('codemirror/lib/codemirror.css');\nrequire('codemirror/theme/base16-dark.css');\n\nrequire('codemirror/mode/javascript/javascript');\nrequire('codemirror/mode/css/css');\nrequire('codemirror/addon/edit/closebrackets');\nrequire('codemirror/addon/edit/matchbrackets');\n\nrequire('codemirror/mode/xml/xml');\nrequire('codemirror/mode/htmlmixed/htmlmixed');\n\nrequire('codemirror/addon/edit/closetag');\nrequire('codemirror/addon/edit/matchtags');\n\nrequire('codemirror/addon/scroll/simplescrollbars.css');\nrequire('codemirror/addon/scroll/simplescrollbars.js');\n\n\nvar XHR = require(\"../../utils/xhr.js\");\n\nmodule.exports = class {\n  constructor(text, mode, readonly, init_cfg) {\n    this.element = document.createElement(\"div\");\n    this.element.style.height = \"100%\";\n\n    console.log(\"CODEMIRROR INITIALIZED\");\n\n  //  parent.appendChild(this.element);\n\n    var textarea = document.createElement(\"textarea\");\n    this.element.appendChild(textarea);\n\n    var this_class = this;\n\n    textarea.innerHTML = text;\n\n    var cfg = {\n      lineNumbers: true,\n      theme: \"base16-dark\",\n      indentWithTabs: true,\n      tabSize: 2,\n      scrollbarStyle: \"native\",\n      smartIndent: false,\n      readOnly: readonly,\n      viewportMargin: Infinity\n  //  matchTags: true\n    };\n\n    if (init_cfg) {\n      if (init_cfg.disable_scrollbar) {\n        cfg.scrollbarStyle = \"null\";\n        require('./noscroll.css');\n      }\n    }\n\n    if (readonly) {\n      cfg.cursorBlinkRate = -1;\n    }\n\n    switch (mode) {\n      case 'html':\n        cfg.mode = \"htmlmixed\";\n        cfg.autoCloseTags = true;\n    //  matchTags: true\n        break;\n      case 'css':\n        cfg.mode = \"css\";\n        cfg.autoCloseBrackets = true;\n        cfg.matchBrackets = true;\n        break;\n      case 'less':\n        cfg.mode = \"text/x-less\";\n        cfg.autoCloseBrackets = true;\n        cfg.matchBrackets = true;\n        break;\n      case 'js':\n        cfg.mode = \"javascript\";\n        cfg.autoCloseBrackets = true;\n        cfg.matchBrackets = true;\n        break;\n      default:\n        cfg.mode = \"htmlmixed\";\n        cfg.autoCloseTags = true;\n    //  matchTags: true\n    }\n    console.log(\"mode:\", cfg.mode);\n    this_class.cm = CodeMirror.fromTextArea(textarea, cfg);\n    this_class.cm.refresh();\n  }\n}\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./noscroll.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./noscroll.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./noscroll.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","const XHR = require(\"../../utils/xhr.js\");\nconst XHRA = require(\"../../utils/xhr_async.js\");\nconst WindowUI = require(\"../window.ui/index.js\");\nconst SplitUI = require(\"../split.ui/index.js\");\n\nrequire(\"./theme.css\")\n\nconst Session = require(\"./session.js\");\n\nmodule.exports = class {\n  constructor(target, dir, iframe, pathname) {\n\n    var socket = require('socket.io-client')('http://127.0.0.1:9639');\n    console.log(\"CONNECTING TO http://127.0.0.1:9369\");\n    socket.on('connect', function(){\n      console.log(\"CONNECTED\");\n    });\n\n    socket.on('webpack-done', function(stats){\n      console.log(\"WEBPACK DONE\", stats);\n      iframe.contentWindow.location.replace(pathname);\n    });\n\n    socket.on('webpack-err', function(err){\n      console.error(err);\n    });\n\n    socket.on('disconnect', function(){\n      console.log(\"DISCONNETED\");\n    });\n\n    this.window = new WindowUI({\n      DOM: document.body,\n      title: \"Editor\",\n      resize_cb: function() {\n        split.auto_resize();\n      }\n    });\n    global.editor_window = this.window;\n    this.window.content.style.overflow = \"hidden\";\n\n    var split = this.split = new SplitUI(this.window.content, \"horizontal\");\n    split.split(2);\n\n    var global_local_switch = document.createElement(\"button\");\n    global_local_switch.innerHTML = \"Global\";\n    global_local_switch.classList.add('global_local_switch');\n    this.split.list[0].appendChild(global_local_switch);\n\n    var webpack_button = document.createElement(\"button\");\n    webpack_button.innerHTML = \".\";\n    webpack_button.classList.add('webpack_button');\n    this.split.list[0].appendChild(webpack_button);\n\n    var state = false;\n    webpack_button.style.border = \"solid 1px #FF0000\";\n\n    webpack_button.addEventListener('click', async function(e) {\n      var chstate = (state != true);\n      console.log({\n        command: \"webpack-watch\",\n        value: chstate,\n        name: dir\n      });\n      state = await XHRA.post(\"pages.io\", {\n        command: \"webpack-watch\",\n        value: chstate,\n        name: dir\n      });\n\n      if (state) {\n        webpack_button.style.border = \"solid 1px #00FF00\";\n      } else {\n        webpack_button.style.border = \"solid 1px #FF0000\";\n      }\n    })\n    var local_session = new Session(target, dir, iframe, pathname);\n    this.append_session_elements(local_session);\n    var global_session = new Session(\"globals\", \".\", iframe, pathname);\n\n    var this_class = this;\n    global_local_switch.addEventListener(\"click\", function(e) {\n      if (global_local_switch.innerHTML == \"Global\") {\n        local_session.destroy();\n        this_class.append_session_elements(global_session);\n        global_local_switch.innerHTML = \"Local\";\n      } else {\n        global_session.destroy();\n        this_class.append_session_elements(local_session);\n        global_local_switch.innerHTML = \"Global\";\n      }\n    });\n  }\n\n  append_session_elements(session) {\n    var treefm = session.treefm;\n    var tabs = session.tabs;\n\n    this.split.list[0].appendChild(treefm.element);\n    this.split.list[1].style.overflow = \"hidden\";\n    this.split.list[1].appendChild(tabs.element);\n  }\n\n  destroy() {\n    this.window.destroy();\n  }\n}\n","\nconst TreeFM = require(\"../treefm.ui\");\nconst TabsUI = require(\"../tabs.ui/index.js\");\nconst CodeMirror = require(\"../codemirror.ui/index.js\");\n\nconst template_prefix = \"/cmb_admin/t/\";\nconst page_prefix = \"/p/\";\n\nconst XHR = require(\"../../utils/xhr.js\");\n\nmodule.exports = class {\n  constructor(target, dir, iframe, refresh_path) {\n\n    var tabs = this.tabs = new TabsUI();\n\n    var last_save_callback = false;\n\n    var treefm = this.treefm = new TreeFM({\n      target: target,\n      dir: dir,\n      file_cb: function(file) {\n        var tab = tabs.select(file.rel_path);\n        if (tab) {\n          tab.display();\n        } else {\n          treefm.read_file(file.rel_path, function(file_content) {\n            var extension = file.rel_path.substr(file.rel_path.lastIndexOf('.')+1);\n            let original_extension = extension;\n            if (extension == \"json\") extension = \"js\";\n            var html_editor = new CodeMirror(file_content, extension, false, {\n              disable_scrollbar: true\n            });\n            tabs.add({\n              text: file.name,\n              cb: function(display) {\n                display.appendChild(html_editor.element);\n                html_editor.cm.refresh();\n                if (last_save_callback) {\n                  document.body.removeEventListener(\"keydown\", last_save_callback);\n                }\n                document.body.addEventListener(\"keydown\", save_cur_file);\n                last_save_callback = save_cur_file;\n              },\n              id: file.rel_path\n            });\n            function save_cur_file(e) {\n              if (e.keyCode == 83 && (navigator.platform.match(\"Mac\") ? e.metaKey : e.ctrlKey)) {\n                e.preventDefault();\n                treefm.write_file(file.rel_path, html_editor.cm.getValue(), function() {\n                  if (original_extension != \"js\") {\n                    iframe.src = iframe.src;\n                  }\n\n                  XHR.post(\"pages.io\", {\n                    command: \"webpack\",\n                    name: dir\n                  }, function(response) {\n                    console.log(\"WEBPACK RES\", response);\n                    iframe.contentWindow.location.replace(refresh_path);\n                  });\n                });\n              }\n            }\n          });\n        }\n      }\n    });\n  }\n\n  destroy() {\n    this.tabs.destroy();\n    this.treefm.destroy();\n  }\n}\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./theme.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./theme.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./theme.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","require(\"./theme.css\")\n\nconst XHR = require(\"../utils/xhr.js\");\nconst Editor = require(\"./editor.ui/index.js\");\n\nconst template = XHR.getParamByName('template');\nconst page = XHR.getParamByName('page');\n\nlet target_name = encodeURIComponent(template || page);\n\nconsole.log(page);\n\nvar tools = document.createElement(\"div\");\ntools.classList.add(\"tools\");\ntools.innerHTML = require(\"./body.html\");\ndocument.body.appendChild(tools);\n\nvar editor_btn = tools.querySelector(\".editor_btn\");\nfunction editor_replaced(n_window) {\n  editor_btn.removeEventListener(\"click\", listener);\n  editor_btn.addEventListener(\"click\", listener);\n  function listener(e) {\n    if (n_window.visible) {\n      n_window.hide();\n    } else {\n      n_window.dipslay();\n    }\n  }\n}\n\nvar iframe = document.getElementById(\"cmb_page_display\");\nvar target;\nif (template) {\n  iframe.src = '/t/'+target_name;\n  target = \"templates\";\n} else if (page) {\n  iframe.src = '/'+target_name;\n  target = \"pages\";\n}\n\n\niframe.addEventListener(\"load\", firstLoad);\nvar floadID = setTimeout(firstLoad, 1000);\nfunction firstLoad() {\n  clearTimeout(floadID);\n  var editor = new Editor(target, template || page, iframe, iframe.contentWindow.location.pathname);\n  editor_replaced(editor.window);\n  iframe.removeEventListener(\"load\", firstLoad);\n\n  var last_pathname = iframe.contentWindow.location.pathname;\n\n  iframe.addEventListener(\"load\", socondLoad);\n  var sloadID = setTimeout(socondLoad, 1000);\n  function socondLoad(e) {\n    clearTimeout(sloadID);\n    var new_pathname = iframe.contentWindow.location.pathname;\n    console.log(last_pathname, new_pathname);\n    console.log(last_pathname != new_pathname);\n    if (last_pathname != new_pathname) {\n      editor.destroy();\n      var new_root_dir = decodeURIComponent(iframe.contentWindow.location.pathname).substr(1).slice(0, -1);\n      console.log(\"NEDITOR\", new_root_dir, iframe.contentWindow.location.pathname);\n      editor = new Editor(target, new_root_dir, iframe);\n      editor_replaced(editor.window);\n    }\n    last_pathname = new_pathname;\n  }\n}\n","require(\"./theme.css\");\n\nmodule.exports = class {\n  constructor(dom, direction) {\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"split_ui\");\n    dom.appendChild(this.element);\n\n    this.width = this.element.offsetWidth;\n    this.height = this.element.offsetHeight;\n\n    this.min_piece_width = 50;\n    this.min_piece_height = 50;\n\n    this.list = [];\n    this.direction = direction;\n  }\n\n  split(pieces) {\n    if (this.direction == \"horizontal\") {\n      this.pieces = pieces;\n      var split_div_width = Math.floor(this.width/pieces);\n      for (var p = 0; p < pieces; p++) {\n        var piece_width = split_div_width;\n        if (p > 0) {\n          let resize_line = document.createElement(\"div\");\n          resize_line.classList.add(\"split_ui_horizontal_line\");\n          this.element.appendChild(resize_line);\n          piece_width -= 3;\n\n          var startX;\n\n          var this_class = this;\n\n          resize_line.addEventListener(\"mousedown\", function(e) {\n            startX = e.clientX;\n            this_class.element.addEventListener('mousemove', resize_drag);\n          });\n\n          this.element.addEventListener('mouseup', function(e) {\n            this_class.element.removeEventListener('mousemove', resize_drag);\n          });\n\n          function resize_drag(e) {\n            var deltaX = e.clientX-startX;\n            startX = e.clientX;\n\n            var target_left = resize_line.previousSibling;\n            var target_right = resize_line.nextSibling;\n            if (target_left.offsetWidth+deltaX > 0 && target_right.offsetWidth-deltaX > 0) {\n              var left_width = target_left.offsetWidth+deltaX;\n              var right_width_dec = 0;\n              if (left_width < this_class.min_piece_width) {\n                right_width_dec = this_class.min_piece_width-left_width;\n                left_width = this_class.min_piece_width;\n              }\n\n              var right_width = target_right.offsetWidth-deltaX;\n              var left_width_dec = 0;\n              if (right_width < this_class.min_piece_width) {\n                left_width_dec = this_class.min_piece_width-right_width;\n                right_width = this_class.min_piece_width;\n              }\n\n              target_left.style.width = left_width-left_width_dec+\"px\";\n              target_right.style.width = right_width-right_width_dec+\"px\";\n            } else {\n              startX -= deltaX;\n            }\n          }\n        }\n        var split_div = document.createElement(\"div\");\n        split_div.classList.add(\"split_ui_horizontal\");\n        split_div.style.width = piece_width+\"px\";\n        this.element.appendChild(split_div);\n        this.list.push(split_div);\n      }\n    }\n  }\n\n  auto_resize() {\n    var old_width = this.width;\n    this.width = this.element.offsetWidth;\n    var delta_width = this.width - old_width;\n    this.height = this.element.offsetHeight;\n\n    if (this.direction == \"horizontal\") {\n      var piece_delta_width = delta_width/this.pieces;\n      var next_delta = 0;\n      for (var p = 0; p < this.pieces; p++) {\n        var new_width;\n        if (piece_delta_width > 0) {\n          if (p == this.pieces-1) {\n            new_width = this.list[p].offsetWidth+Math.ceil(piece_delta_width);\n          } else {\n            new_width = this.list[p].offsetWidth+Math.floor(piece_delta_width);\n          }\n        } else if (piece_delta_width < 0) {\n          if (p == this.pieces-1) {\n            new_width = this.list[p].offsetWidth+Math.floor(piece_delta_width);\n          } else {\n            new_width = this.list[p].offsetWidth+Math.ceil(piece_delta_width);\n          }\n        } else {\n          new_width = this.list[p].offsetWidth;\n        }\n\n        this.list[p].style.width = new_width+\"px\";\n\n        if (new_width < this.min_piece_width) {\n          next_delta = this.min_piece_width-new_width;\n          new_width = this.min_piece_width;\n          this.list[p].style.width = new_width+\"px\";\n        } else {\n          this.list[p].style.width = new_width-next_delta+\"px\";\n          next_delta = 0;\n        }\n      }\n\n      if (next_delta > 0) {\n        for (var p = 0; p < this.pieces; p++) {\n          var new_width = this.list[p].offsetWidth-next_delta;\n\n          if (new_width < this.min_piece_width) {\n            next_delta = this.min_piece_width-new_width;\n            new_width = this.min_piece_width;\n            this.list[p].style.width = new_width+\"px\";\n          } else {\n            this.list[p].style.width = new_width+\"px\";\n            next_delta = 0;\n            break;\n          }\n        }\n      }\n    }\n  }\n}\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./theme.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./theme.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./theme.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./horz.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./horz.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./horz.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","require('./horz.css');\n\nvar Tab = require(\"./tab.js\");\n\nmodule.exports = class {\n  constructor() {\n    this.element = document.createElement('div');\n    this.element.classList.add('tabs_ui_container');\n\n    this.menu = document.createElement('div');\n    this.menu.classList.add('tabs_ui_menu');\n    this.element.appendChild(this.menu);\n\n    this.display_div = document.createElement('div');\n    this.display_div.classList.add('tabs_ui_display');\n    this.display_div.style.height = \"calc(100% - 21px)\";\n    this.element.appendChild(this.display_div);\n\n    this.list = [];\n  }\n\n  add(data) {\n    var tab = new Tab(data, this);\n    this.menu.appendChild(tab.element);\n    this.list.push(tab);\n    tab.display();\n  }\n\n  remove(tab) {\n    this.menu.removeChild(tab.element);\n    this.list.splice(this.list.indexOf(tab), 1);\n    if (tab.element == this.displayed_tab) {\n      if (this.list.length > 0) {\n        this.display(this.list[this.list.length-1]);\n      } else {\n        this.display_div.innerHTML = \"\";\n      }\n    }\n  }\n\n  select(id) {\n    var result = false;\n    for (var t = 0; t < this.list.length; t++) {\n      if (this.list[t].id == id) {\n        result = this.list[t];\n        break;\n      }\n    }\n    return result;\n  }\n\n  display(tab) {\n    var this_class = this;\n    tab.cb(function() {\n      if (this_class.displayed_tab) {\n        this_class.displayed_tab.classList.remove(\"tabs_ui_selected\");\n      }\n      this_class.displayed_tab = tab.element;\n      this_class.displayed_tab.classList.add(\"tabs_ui_selected\");\n\n      this_class.display_div.innerHTML = \"\";\n      return this_class.display_div;\n    }());\n  }\n\n  destroy() {\n    this.element.parentNode.removeChild(this.element);\n  }\n}\n","\n\nmodule.exports = class {\n  constructor(data, tabs) {\n    this.id = data.id;\n    this.cb = data.cb;\n    this.tabs = tabs;\n\n    this.element = document.createElement('div');\n    this.element.classList.add(\"tabs_ui_menu_item\");\n\n    var text = document.createElement('div');\n    text.innerHTML = data.text;\n    this.element.appendChild(text);\n\n    var this_class = this;\n\n    text.addEventListener(\"click\", function(e) {\n      this_class.display();\n    });\n\n    var close = document.createElement('button');\n    close.innerHTML = \"\";\n    this.element.appendChild(close);\n\n    close.addEventListener(\"click\", function(e) {\n      this_class.tabs.remove(this_class);\n    });\n  }\n\n  display() {\n    this.tabs.display(this);\n  }\n}\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--6-1!./theme.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js??ref--6-1!./theme.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js??ref--6-1!./theme.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","module.exports = \"<div name=\\\"new_file\\\">New File</div>\\n<div name=\\\"new_folder\\\">New Folder</div>\\n<div name=\\\"upload\\\">Upload</div>\\n<div name=\\\"rename\\\">Rename</div>\\n<div name=\\\"delete\\\">Delete</div>\\n\";","var html = require(\"./contextmenu.html\");\n\nmodule.exports = class {\n  constructor() {\n    this.element = document.createElement('div');\n    this.element.classList.add(\"treefm_contexmenu\");\n    document.body.appendChild(this.element);\n  }\n\n  display(x, y, callbacks) {\n    console.log(callbacks);\n    this.element.innerHTML = html;\n\n    for (let name in callbacks) {\n      var item = this.element.querySelector('div[name=\"'+name+'\"]');\n      if (!callbacks[name]) {\n        item.style.display = \"none\";\n      } else {\n        item.addEventListener(\"click\", function(e) {\n          callbacks[name]();\n        });\n      }\n    }\n\n    this.element.style.display = \"block\";\n    this.element.style.left = x+\"px\";\n    this.element.style.top = y+\"px\";\n  }\n\n  hide() {\n    this.element.style.display = \"none\";\n  }\n}\n","const File = require(\"./file.js\");\n\nvar padding_left = 10;\n\nvar Dir = module.exports = class {\n  constructor(data, treefm) {\n    this.element = document.createElement('div');\n    this.path = data.rel_path;\n    this.name = data.name;\n    this.padding_index = data.padding_index;\n\n    var this_class = this;\n\n    var name_div = document.createElement(\"div\");\n    name_div.classList.add(\"treefm_item\");\n    name_div.innerHTML = \" \"+data.name;\n    name_div.style.paddingLeft = this.padding_index*padding_left+padding_left+\"px\";\n\n    name_div.addEventListener(\"click\", function(e) {\n      if (content_div.displayed) {\n        var str = name_div.innerHTML;\n        name_div.innerHTML = \" \"+str.substring(2);\n        content_div.style.display = \"none\";\n        content_div.displayed = false;\n      } else {\n        var str = name_div.innerHTML;\n        name_div.innerHTML = \" \"+str.substring(2);\n        content_div.style.display = \"block\";\n        content_div.displayed = true;\n      }\n    });\n\n    name_div.addEventListener('contextmenu', function(e) {\n      e.preventDefault();\n      var callbacks = {\n        new_file: function() {\n          content_div.style.display = \"block\";\n          content_div.displayed = true;\n\n          var name_input = document.createElement(\"input\");\n          name_input.type = \"text\";\n          name_input.placeholder = \"new file name\";\n          content_div.appendChild(name_input);\n          name_input.focus();\n          treefm.contextmenu.hide();\n          name_input.addEventListener('keyup', function (e) {\n            if (e.keyCode == 13) {\n              var file_path = this_class.path+\"/\"+name_input.value;\n              treefm.write_file(file_path, \"\", function() {\n                var new_file = new File({\n                  name: name_input.value,\n                  rel_path: this_class.path+\"/\"+name_input.value,\n                  padding_index: this_class.padding_index+1,\n                  type: \"txt\"\n                }, treefm);\n                content_div.replaceChild(new_file.element, name_input);\n              });\n            }\n          });\n        },\n        new_folder: function() {\n          content_div.style.display = \"block\";\n          content_div.displayed = true;\n\n          var name_input = document.createElement(\"input\");\n          name_input.type = \"text\";\n          name_input.placeholder = \"new folder name\";\n          content_div.appendChild(name_input);\n          name_input.focus();\n          treefm.contextmenu.hide();\n          name_input.addEventListener('keyup', function(e) {\n            if (e.keyCode == 13) {\n              var file_path = this_class.path+\"/\"+name_input.value;\n              treefm.mkdir(file_path, function() {\n                var new_file = new Dir({\n                  name: name_input.value,\n                  rel_path: this_class.path+\"/\"+name_input.value,\n                  type: \"dir\",\n                  padding_index: this_class.padding_index+1,\n                  content: []\n                }, treefm);\n                content_div.replaceChild(new_file.element, name_input);\n              });\n            }\n          });\n        },\n        upload: function() {\n          treefm.contextmenu.hide();\n\n          var form = document.createElement('form');\n          form.enctype = \"multipart/form-data\";\n          this_class.element.appendChild(form);\n\n          var target_input = document.createElement(\"input\");\n          target_input.type = \"hidden\";\n          target_input.name = \"target\";\n          target_input.value = treefm.target;\n          form.appendChild(target_input);\n\n          var path_input = document.createElement(\"input\");\n          path_input.type = \"hidden\";\n          path_input.name = \"path\";\n          path_input.value = this_class.path;\n          form.appendChild(path_input);\n\n          var upload_input = document.createElement(\"input\");\n          upload_input.type = \"file\";\n          upload_input.name = \"filei\";\n          upload_input.multiple = \"multiple\";\n          upload_input.style.display = \"none\";\n          form.appendChild(upload_input);\n\n          upload_input.click();\n          upload_input.addEventListener(\"change\", function(e) {\n            var files = this.files;\n\n            var formData = new FormData(form);\n\n            for (var [key, value] of formData.entries()) {\n              console.log(key, value);\n            }\n\n            treefm.upload_files(formData, function() {\n              for (var f = 0; f < files.length; f++) {\n                var new_file = new File({\n                  name: files[f].name,\n                  rel_path: this_class.path+\"/\"+files[f].name,\n                  padding_index: this_class.padding_index+1,\n                  type: files[f].type\n                }, treefm);\n                content_div.appendChild(new_file.element);\n              }\n            });\n          }, false);\n        },\n        rename: function() {\n          treefm.contextmenu.hide();\n          var name_input = document.createElement(\"input\");\n          name_input.type = \"text\";\n          name_input.value = this_class.name;\n          this_class.element.replaceChild(name_input, name_div);\n          name_input.focus();\n          name_input.addEventListener('keyup', function(e) {\n            if (e.keyCode == 13) {\n              var dir_arr = this_class.path.split('/');\n              dir_arr.pop();\n              var file_path = dir_arr.join('/')+\"/\"+name_input.value;\n              treefm.rename(this_class.path, file_path, function() {\n                name_div.innerHTML = name_input.value;\n                this_class.element.replaceChild(name_div, name_input);\n              });\n            }\n          });\n        },\n        delete: function() {\n          treefm.contextmenu.hide();\n          treefm.rm_dir(this_class.path, function() {\n            this_class.element.parentNode.removeChild(this_class.element);\n          });\n        }\n      };\n      if (data.root) {\n        callbacks[\"rename\"] = false;\n        callbacks[\"delete\"] = false;\n      }\n      treefm.contextmenu.display(e.clientX, e.clientY, callbacks);\n\n      global.editor_window.element.addEventListener(\"click\", hide_contextmenu);\n\n      function hide_contextmenu(e) {\n        treefm.contextmenu.hide();\n        global.editor_window.element.removeEventListener(\"click\", hide_contextmenu);\n      }\n    });\n    this.element.appendChild(name_div);\n\n    var content_div = document.createElement(\"div\");\n    content_div.displayed = false;\n    content_div.classList.add(\"treefm_dir_content\");\n    for (var f = 0; f < data.content.length; f++) {\n      let child_file = data.content[f];\n      if (child_file.type == \"dir\") {\n        child_file.padding_index = this_class.padding_index+1;\n        var child_dir = new Dir(child_file, treefm);\n        content_div.appendChild(child_dir.element);\n      } else if (child_file.type == \"txt\") {\n        child_file.padding_index = this_class.padding_index+1;\n        var file = new File(child_file, treefm);\n        content_div.appendChild(file.element);\n      } else {\n        console.error(\"TreeFM: Unknown file type\", child_file.type);\n      }\n    }\n\n    if (data.root) {\n      var str = name_div.innerHTML;\n      name_div.innerHTML = \" \"+str.substring(2);\n      content_div.style.display = \"block\";\n      content_div.displayed = true;\n    }\n\n    this.element.appendChild(content_div);\n  }\n}\n","\nvar padding_left = 10;\n\nmodule.exports = class {\n  constructor(data, treefm) {\n    this.path = data.rel_path;\n    this.name = data.name;\n    this.padding_index = data.padding_index;\n\n    this.element = document.createElement(\"div\");\n    this.element.innerHTML = \" \"+data.name;\n    this.element.style.paddingLeft = this.padding_index*padding_left+padding_left+\"px\";\n    this.element.classList.add(\"treefm_item\");\n    this.element.addEventListener(\"click\", function(e) {\n      treefm.file_cb(data);\n    });\n\n    var this_class = this;\n    this.element.addEventListener('contextmenu', function(e) {\n      e.preventDefault();\n\n      var callbacks = {\n        new_file: false,\n        new_folder: false,\n        rename: function() {\n          treefm.contextmenu.hide();\n          var name_input = document.createElement(\"input\");\n          name_input.type = \"text\";\n          name_input.value = this_class.name;\n          this_class.element.parentNode.replaceChild(name_input, this_class.element);\n          name_input.focus();\n          name_input.addEventListener('keyup', function(e) {\n            if (e.keyCode == 13) {\n              var dir_arr = this_class.path.split('/');\n              dir_arr.pop();\n              var file_path = dir_arr.join('/')+\"/\"+name_input.value;\n              treefm.rename(this_class.path, file_path, function() {\n                this_class.element.innerHTML = name_input.value;\n                name_input.parentNode.replaceChild(this_class.element, name_input);\n              });\n            }\n          });\n        },\n        delete: function() {\n          treefm.contextmenu.hide();\n          treefm.rm_file(this_class.path, function() {\n            this_class.element.parentNode.removeChild(this_class.element);\n          });\n        }\n      };\n\n      treefm.contextmenu.display(e.clientX, e.clientY, callbacks);\n\n      global.editor_window.element.addEventListener(\"click\", hide_contextmenu);\n\n      function hide_contextmenu(e) {\n        treefm.contextmenu.hide();\n        global.editor_window.element.removeEventListener(\"click\", hide_contextmenu);\n      }\n    });\n  }\n}\n","const XHR = require(\"../../utils/xhr.js\");\nconst Dir = require(\"./dir.js\");\nconst ContextMenu = require(\"./contextmenu.js\");\nrequire(\"./style.css\");\n\n\nmodule.exports = class {\n  constructor(cfg) {\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"treefm\");\n    this.file_cb = cfg.file_cb;\n\n    this.target = cfg.target;\n    this.dir = cfg.dir;\n\n    this.contextmenu = new ContextMenu();\n\n    var this_class = this;\n\n    console.log(\"treefm.io read\", cfg.target, cfg.dir);\n    XHR.get('treefm.io', {\n      target: cfg.target,\n      command: \"read\",\n      path: cfg.dir\n    }, function() {\n      var dir_tree = JSON.parse(this.responseText);\n      console.log(\"RESPONSE\", dir_tree);\n      dir_tree.root = true;\n      dir_tree.padding_index = 0;\n      var root_dir = new Dir(dir_tree, this_class);\n      this_class.element.appendChild(root_dir.element);\n    });\n  }\n\n  read_file(file_path, cb) {\n    XHR.get('treefm.io', {\n      target: this.target,\n      command: \"read\",\n      path: file_path\n    }, function() {\n      var file_content = JSON.parse(this.responseText);\n      cb(file_content);\n    });\n  }\n\n  write_file(file_path, content, cb) {\n    XHR.get('treefm.io', {\n      target: this.target,\n      command: \"write\",\n      path: file_path,\n      data: content\n    }, function() {\n      var response = JSON.parse(this.responseText);\n      if (response == \"success\") {\n        cb();\n      };\n    });\n  }\n\n  upload_files(formData, cb) {\n    XHR.post('treefm.io', {\n      formData: formData\n    }, function() {\n      var response = JSON.parse(this.responseText);\n      if (response == \"success\") {\n        cb();\n      };\n    });\n  }\n\n  rm_file(file_path, cb) {\n    XHR.get('treefm.io', {\n      target: this.target,\n      command: \"rm\",\n      path: file_path\n    }, function() {\n      var response = JSON.parse(this.responseText);\n      if (response == \"success\") {\n        cb();\n      };\n    });\n  }\n\n  mkdir(file_path, cb) {\n    XHR.get('treefm.io', {\n      target: this.target,\n      command: \"mkdir\",\n      path: file_path\n    }, function() {\n      var response = JSON.parse(this.responseText);\n      if (response == \"success\") {\n        cb();\n      };\n    });\n  }\n\n  rm_dir(file_path, cb) {\n    XHR.get('treefm.io', {\n      target: this.target,\n      command: \"rmdir\",\n      path: file_path\n    }, function() {\n      var response = JSON.parse(this.responseText);\n      if (response == \"success\") {\n        cb();\n      };\n    });\n  }\n\n  rename(file_path, new_path, cb) {\n    XHR.get('treefm.io', {\n      target: this.target,\n      command: \"rename\",\n      path: file_path,\n      data: new_path\n    }, function() {\n      var response = JSON.parse(this.responseText);\n      if (response == \"success\") {\n        cb();\n      };\n    });\n  }\n\n  destroy() {\n    this.element.parentNode.removeChild(this.element);\n  }\n}\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","module.exports = \"<header class=\\\"window_mod_header\\\">\\n  <div class=\\\"window_mod_titlebar\\\">New Window</div>\\n  <div class=\\\"window_mod_actions\\\">\\n    <button class=\\\"window_mod_hide\\\">-</button>\\n    <button class=\\\"window_mod_min_max_imize\\\">+</button>\\n  </div>\\n</header>\\n<div class=\\\"window_mod_content\\\">\\n\\n</div>\\n\\n<div class=\\\"window_mod_resize_controls\\\">\\n  <div class=\\\"resizeN resize\\\"></div>\\n  <div class=\\\"resizeNE resize\\\"></div>\\n  <div class=\\\"resizeE resize\\\"></div>\\n  <div class=\\\"resizeSE resize\\\"></div>\\n  <div class=\\\"resizeS resize\\\"></div>\\n  <div class=\\\"resizeSW resize\\\"></div>\\n  <div class=\\\"resizeW resize\\\"></div>\\n  <div class=\\\"resizeNW resize\\\"></div>\\n</div>\\n\";","\n\nrequire(\"./sheet.css\");\nvar html = require(__dirname+\"/body.html\");\n\n\nvar min_width = 181;\nvar min_height = 65;\n\nvar init_width = 680;\nvar init_height = 360;\n\nmodule.exports = class {\n  constructor(cfg) {\n    this.element = document.createElement(\"div\");\n    this.element.innerHTML = html;\n    this.element.style.minWidth = min_width+\"px\";\n    this.element.style.minHeight = min_height+\"px\";\n    this.element.style.width = init_width+\"px\";\n    this.element.style.height = init_height+\"px\";\n    this.element.classList.add('window_mod');\n    this.element.classList.add('container_rgb');\n    cfg.DOM.appendChild(this.element);\n\n    this.visible = true;\n    this.DOM = cfg.DOM;\n    this.resize_cb = cfg.resize_cb;\n\n    var this_class = this;\n\n    this.titlebar = this.element.querySelector('.window_mod_titlebar');\n    this.titlebar.innerHTML = cfg.title;\n    this.titlebar.addEventListener('mousedown', function(e) {\n      if (!this_class.maximized) {\n        window_mod_move(e);\n      }\n    });\n\n\n    var minimize = this.element.querySelector('.window_mod_hide');\n    minimize.addEventListener(\"click\", function(e) {\n      this_class.hide();\n    });\n\n    var maximize = this.element.querySelector('.window_mod_min_max_imize');\n    maximize.addEventListener(\"click\", function(e) {\n      if (this_class.maximized) {\n        this_class.minimize();\n      } else {\n        this_class.maximize();\n      }\n    });\n\n\n    this.content = this.element.querySelector('.window_mod_content');\n\n    this.resize_controls = this.element.querySelector('.window_mod_resize_controls');\n\n    this.element.N = this.element.querySelector('.resizeN');\n    this.element.NE = this.element.querySelector('.resizeNE');\n    this.element.E = this.element.querySelector('.resizeE');\n    this.element.SE = this.element.querySelector('.resizeSE');\n    this.element.S = this.element.querySelector('.resizeS');\n    this.element.SW = this.element.querySelector('.resizeSW');\n    this.element.W = this.element.querySelector('.resizeW');\n    this.element.NW = this.element.querySelector('.resizeNW');\n\n    this.mouse_div = document.createElement('div');\n    this.mouse_div.classList.add('mouse_div');\n\n    cfg.DOM.appendChild(this.mouse_div);\n\n\n    var fresh = true;\n    function window_mod_init(win) {\n      if (fresh) {\n        this_class.element = win;\n\n        fresh = false;\n      }\n\n    }\n\n    function div_up(next) {\n      let up_cb = function(e) {\n        this_class.mouse_div.style.display = \"none\";\n        next();\n        this_class.mouse_div.removeEventListener('mouseup', up_cb);\n      }\n\n      this_class.mouse_div.addEventListener('mouseup', up_cb);\n    }\n\n    function window_mod_move(event) {\n      var title = event.target;\n\n      this_class.element.startX = event.clientX - this_class.element.offsetLeft;\n      this_class.element.startY = event.clientY - this_class.element.offsetTop;\n      document.documentElement.addEventListener('mousemove', drag);\n      this_class.mouse_div.style.display = \"block\";\n      div_up(stopDrag);\n\n      function drag(e) {\n        var eClientX = e.clientX;\n        var eClientY = e.clientY;\n\n        var nX = (eClientX - this_class.element.startX);\n        var nX2 = nX + this_class.element.offsetWidth;\n\n        if (nX < 0) nX = 0;\n        if (nX2 > window.innerWidth) {\n          nX = window.innerWidth - this_class.element.offsetWidth;\n        }\n\n        this_class.element.style.left = nX + 'px';\n\n        var nY = (eClientY - this_class.element.startY);\n        var nY2 = nY + this_class.element.offsetHeight;\n\n        if (nY < 0) nY = 0;\n        if (nY2 > window.innerHeight) {\n          nY = window.innerHeight - this_class.element.offsetHeight;\n        }\n\n        this_class.element.style.top = nY + 'px';\n      }\n\n      function stopDrag(e) {\n        console.log('stop');\n        document.documentElement.removeEventListener('mousemove', drag);\n      }\n\n    }\n\n    // RESZ\n\n    var startX, startY, startWidth, startHeight, curTarget, curFollower;\n    var make = function(target, directions, cb) {\n      if (directions == '*') {\n        makeN(target);\n        makeNE(target);\n        makeE(target);\n        makeSE(target);\n        makeS(target);\n        makeSW(target);\n        makeW(target);\n        makeNW(target);\n      } else if (Array.isArray(directions)) {\n        directions.forEach(function(d) {\n          switch (d) {\n            case 'N':\n              makeN(target);\n              break;\n            case 'NE':\n              makeNE(target);\n              break;\n            case 'E':\n              makeE(target);\n              break;\n            case 'SE':\n              makeSE(target);\n              break;\n            case 'S':\n              makeS(target);\n              break;\n            case 'SW':\n              makeSW(target);\n              break;\n            case 'W':\n              makeW(target);\n              break;\n            case 'NW':\n              makeNW(target);\n              break;\n            default:\n              console.log('cmResizable: Invalid direction: \"'+d+'\"');\n              console.log('NW N NE');\n              console.log('W  +  E');\n              console.log('SW S SE');\n          }\n        });\n      }\n\n      var screen_padding = 10;\n\n    //.-'-.-'-.-'-.-'-.-'-.-'-.-'-.-'\n      function makeN(target) {\n        var element = this_class.element.N;\n\n        element.addEventListener('mousedown', function(e) {\n          curTarget = target;\n          startY = target.offsetTop;\n          startHeight = target.offsetHeight;\n          document.documentElement.addEventListener('mousemove', dragN);\n          this_class.mouse_div.style.display = \"block\";\n          div_up(stopDragN);\n        });\n\n        function dragN(e) {\n          var eClientY = e.clientY;\n          if (eClientY < screen_padding) eClientY = 0;\n\n          var nHeight = (startHeight + startY - eClientY);\n          if (nHeight > min_height) {\n            curTarget.style.top = (startY + eClientY - startY) + 'px';\n            curTarget.style.height = nHeight + 'px';\n            if (curFollower) {\n              curFollower.style.top = (startY + eClientY - startY) + 'px';\n              curFollower.style.height = (startHeight + startY - eClientY) + 'px';\n            }\n          }\n\n          cb();\n        }\n\n        function stopDragN(e) {\n          document.documentElement.removeEventListener('mousemove', dragN);\n          curFollower = 0;\n        }\n      }\n\n    //.-'-.-'-.-'-.-'-.-'-.-'-.-'-.-'\n      function makeNE(target) {\n        var element = this_class.element.NE;\n\n        element.addEventListener('mousedown', function(e) {\n          curTarget = target;\n          startY = target.offsetTop;\n          startX = target.offsetLeft + target.offsetWidth;\n          startHeight = target.offsetHeight;\n          startWidth = target.offsetWidth;\n          document.documentElement.addEventListener('mousemove', dragNE);\n          this_class.mouse_div.style.display = \"block\";\n          div_up(stopDragNE);\n        });\n\n        function dragNE(e) {\n          var eClientX = e.clientX;\n          if (eClientX < screen_padding) eClientX = 0;\n          if (eClientX > window.innerWidth-screen_padding) {\n            eClientX = window.innerWidth;\n          };\n          var eClientY = e.clientY;\n          if (eClientY < screen_padding) eClientY = 0;\n\n          var nHeight = (startHeight + startY - eClientY);\n          if (nHeight > min_height) {\n            curTarget.style.top = (startY + eClientY - startY) + 'px';\n            curTarget.style.height = (startHeight + startY - eClientY) + 'px';\n            if (curFollower) {\n              curFollower.style.top = (startY + eClientY - startY) + 'px';\n              curFollower.style.height = (startHeight + startY - eClientY) + 'px';\n            }\n          }\n\n          curTarget.style.width = (startWidth + eClientX - startX) + 'px';\n          if (curFollower) {\n            curFollower.style.width = (startWidth + eClientX - startX) + 'px';\n          }\n\n          cb();\n        }\n\n        function stopDragNE(e) {\n          document.documentElement.removeEventListener('mousemove', dragNE);\n          curFollower = 0;\n        }\n      }\n\n    //.-'-.-'-.-'-.-'-.-'-.-'-.-'-.-'\n      function makeE(target) {\n        var element = this_class.element.E;\n\n        element.addEventListener('mousedown', function(e) {\n          curTarget = target;\n          startX = target.offsetLeft + target.offsetWidth;\n          startWidth = target.offsetWidth;\n          document.documentElement.addEventListener('mousemove', dragE);\n          this_class.mouse_div.style.display = \"block\";\n          div_up(stopDragE);\n        });\n\n        function dragE(e) {\n          var eClientX = e.clientX;\n          if (eClientX < screen_padding) eClientX = 0;\n          if (eClientX > window.innerWidth-screen_padding) {\n            eClientX = window.innerWidth;\n          };\n\n          curTarget.style.width = (startWidth + eClientX - startX) + 'px';\n          if (curFollower) {\n            curFollower.style.width = (startWidth + eClientX - startX) + 'px';\n          }\n          cb();\n        }\n\n        function stopDragE(e) {\n          document.documentElement.removeEventListener('mousemove', dragE);\n          curFollower = 0;\n        }\n      }\n\n    //.-'-.-'-.-'-.-'-.-'-.-'-.-'-.-'\n      function makeSE(target) {\n        var element = this_class.element.SE;\n\n        element.addEventListener('mousedown', function(e) {\n          curTarget = target;\n          startY = target.offsetTop + target.offsetHeight;\n          startX = target.offsetLeft + target.offsetWidth;\n          startHeight = target.offsetHeight;\n          startWidth = target.offsetWidth;\n          document.documentElement.addEventListener('mousemove', dragSE);\n          this_class.mouse_div.style.display = \"block\";\n          div_up(stopDragSE);\n        });\n\n        function dragSE(e) {\n          var eClientX = e.clientX;\n          if (eClientX < screen_padding) eClientX = 0;\n          if (eClientX > window.innerWidth-screen_padding) {\n            eClientX = window.innerWidth;\n          };\n          var eClientY = e.clientY;\n          if (eClientY < screen_padding) eClientY = 0;\n          if (eClientY > window.innerHeight-screen_padding) {\n            eClientY = window.innerHeight;\n          };\n\n          curTarget.style.height = (startHeight + eClientY - startY) + 'px';\n          curTarget.style.width = (startWidth + eClientX - startX) + 'px';\n          if (curFollower) {\n            curFollower.style.height = (startHeight + eClientY - startY) + 'px';\n            curFollower.style.width = (startWidth + eClientX - startX) + 'px';\n          }\n          cb();\n        }\n\n        function stopDragSE(e) {\n          document.documentElement.removeEventListener('mousemove', dragSE);\n          curFollower = 0;\n        }\n      }\n\n    //.-'-.-'-.-'-.-'-.-'-.-'-.-'-.-'\n      function makeS(target) {\n        var element = this_class.element.S;\n\n        element.addEventListener('mousedown', function(e) {\n          curTarget = target;\n          startY = target.offsetTop + target.offsetHeight;\n          startHeight = target.offsetHeight;\n          document.documentElement.addEventListener('mousemove', dragS);\n          this_class.mouse_div.style.display = \"block\";\n          div_up(stopDragS);\n        });\n\n        function dragS(e) {\n          var eClientY = e.clientY;\n          if (eClientY < screen_padding) eClientY = 0;\n          if (eClientY > window.innerHeight-screen_padding) {\n            eClientY = window.innerHeight;\n          };\n\n          curTarget.style.height = (startHeight + eClientY - startY) + 'px';\n          if (curFollower) {\n            curFollower.style.height = (startHeight + eClientY - startY) + 'px';\n          }\n\n          cb();\n        }\n\n        function stopDragS(e) {\n          document.documentElement.removeEventListener('mousemove', dragS);\n          curFollower = 0;\n        }\n      }\n\n    //.-'-.-'-.-'-.-'-.-'-.-'-.-'-.-'\n      function makeSW(target) {\n        var element = this_class.element.SW;\n\n        element.addEventListener('mousedown', function(e) {\n          curTarget = target;\n          startY = target.offsetTop + target.offsetHeight;\n          startX = target.offsetLeft;\n          startHeight = target.offsetHeight;\n          startWidth = target.offsetWidth;\n          document.documentElement.addEventListener('mousemove', dragSW);\n          this_class.mouse_div.style.display = \"block\";\n          div_up(stopDragSW);\n        });\n\n        function dragSW(e) {\n          var eClientX = e.clientX;\n          if (eClientX < screen_padding) eClientX = 0;\n          var eClientY = e.clientY;\n          if (eClientY < screen_padding) eClientY = 0;\n          if (eClientY > window.innerHeight-screen_padding) {\n            eClientY = window.innerHeight;\n          };\n\n          curTarget.style.height = (startHeight + eClientY - startY) + 'px';\n          if (curFollower) {\n            curFollower.style.height = (startHeight + eClientY - startY) + 'px';\n          }\n\n          var nWidth = (startWidth + startX - eClientX);\n          if (nWidth > min_width) {\n            curTarget.style.width = (startWidth + startX -eClientX) + 'px';\n            curTarget.style.left = (startX + eClientX - startX) + 'px';\n            if (curFollower) {\n              curFollower.style.width = (startWidth + startX -eClientX) + 'px';\n              curFollower.style.left = (startX + eClientX - startX) + 'px';\n            }\n          }\n\n          cb();\n        }\n\n        function stopDragSW(e) {\n          document.documentElement.removeEventListener('mousemove', dragSW);\n          curFollower = 0;\n        }\n      }\n\n    //.-'-.-'-.-'-.-'-.-'-.-'-.-'-.-'\n      function makeW(target) {\n        var element = this_class.element.W;\n\n        element.addEventListener('mousedown', function(e) {\n          curTarget = target;\n          startX = target.offsetLeft;\n          startWidth = target.offsetWidth;\n          document.documentElement.addEventListener('mousemove', dragW);\n          this_class.mouse_div.style.display = \"block\";\n          div_up(stopDragW);\n        });\n\n        function dragW(e) {\n          var eClientX = e.clientX;\n          if (eClientX < screen_padding) eClientX = 0;\n\n          var nWidth = (startWidth + startX - eClientX);\n          if (nWidth > min_width) {\n            curTarget.style.width = (startWidth + startX - eClientX) + 'px';\n            curTarget.style.left = (startX + eClientX - startX) + 'px';\n            if (curFollower) {\n              curFollower.style.width = (startWidth + startX -eClientX) + 'px';\n              curFollower.style.left = (startX + eClientX - startX) + 'px';\n            }\n          }\n          cb();\n        }\n\n        function stopDragW(e) {\n          document.documentElement.removeEventListener('mousemove', dragW);\n          curFollower = 0;\n        }\n      }\n\n    //.-'-.-'-.-'-.-'-.-'-.-'-.-'-.-'\n      function makeNW(target) {\n        var element = this_class.element.NW;\n\n        element.addEventListener('mousedown', function(e) {\n          curTarget = target;\n          startY = target.offsetTop;\n          startHeight = target.offsetHeight;\n          startX = target.offsetLeft;\n          startWidth = target.offsetWidth;\n          document.documentElement.addEventListener('mousemove', dragNW);\n          this_class.mouse_div.style.display = \"block\";\n          div_up(stopDragNW);\n        });\n\n        function dragNW(e) {\n          var eClientX = e.clientX;\n          if (eClientX < screen_padding) eClientX = 0;\n          var eClientY = e.clientY;\n          if (eClientY < screen_padding) eClientY = 0;\n\n          var nHeight = (startHeight + startY - eClientY);\n          if (nHeight > min_height) {\n            curTarget.style.top = (startY + eClientY - startY) + 'px';\n            curTarget.style.height = (startHeight + startY - eClientY) + 'px';\n            if (curFollower) {\n              curFollower.style.top = (startY + eClientY - startY) + 'px';\n              curFollower.style.height = (startHeight + startY - eClientY) + 'px';\n            }\n          }\n\n          var nWidth = (startWidth + startX - eClientX);\n          if (nWidth > min_width) {\n            curTarget.style.width = (startWidth + startX -eClientX) + 'px';\n            curTarget.style.left = (startX + eClientX - startX) + 'px';\n            if (curFollower) {\n              curFollower.style.width = (startWidth + startX -eClientX) + 'px';\n              curFollower.style.left = (startX + eClientX - startX) + 'px';\n            }\n          }\n\n          cb();\n        }\n\n        function stopDragNW(e) {\n          document.documentElement.removeEventListener('mousemove', dragNW);\n          curFollower = 0;\n        }\n      }\n    }\n\n    //+++ NodeList forEach hack.\n    var arrayMethods = Object.getOwnPropertyNames( Array.prototype );\n\n    arrayMethods.forEach( attachArrayMethodsToNodeList );\n\n    function attachArrayMethodsToNodeList(methodName) {\n      if(methodName !== 'length') {\n        NodeList.prototype[methodName] = Array.prototype[methodName];\n      }\n    };\n\n    //+++ isArray Check\n    if (!Array.isArray) {\n      Array.isArray = function(arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n      };\n    }\n\n    make(this_class.element, '*', cfg.resize_cb);\n  }\n\n  maximize() {\n    if (!this.maximized) {\n      this.mem_layout = {\n        width: this.element.offsetWidth,\n        height: this.element.offsetHeight,\n        top: this.element.offsetTop,\n        left: this.element.offsetLeft\n      }\n        console.log(this.mem_layout);\n\n      this.element.style.width = \"auto\";\n      this.element.style.height = \"auto\";\n      this.element.style.top = 0;\n      this.element.style.left = 0;\n      this.element.style.right = 0;\n      this.element.style.bottom = 0;\n\n      this.element.removeChild(this.resize_controls);\n\n      this.maximized = true;\n\n      this.resize_cb();\n    }\n  }\n\n  minimize() {\n    if (this.maximized) {\n      console.log(this.mem_layout);\n      this.element.style.width = this.mem_layout.width+\"px\";\n      this.element.style.height = this.mem_layout.height+\"px\";\n      this.element.style.top = this.mem_layout.top+\"px\";\n      this.element.style.left = this.mem_layout.left+\"px\";\n      this.element.style.right = \"auto\";\n      this.element.style.bottom = \"auto\";\n\n      this.element.appendChild(this.resize_controls);\n\n      this.resize_controls.style.display = \"auto\";\n\n      this.maximized = false;\n\n      this.resize_cb();\n    }\n  }\n\n  dipslay() {\n    if (!this.visible) {\n      this.DOM.appendChild(this.element);\n      this.visible = true;\n    }\n  }\n\n  hide() {\n    if (this.visible) {\n      this.DOM.removeChild(this.element);\n      this.visible = false;\n    }\n  }\n\n  destroy() {\n    this.element.parentNode.removeChild(this.element);\n  }\n}\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./sheet.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./sheet.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-1!./sheet.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict'\n\nmodule.exports = class {\n  static get(url, params, callback) {\n    if (params) {\n      url += \"?data=\"+encodeURIComponent(JSON.stringify(params));\n    }\n\n    var xhr = new XMLHttpRequest();\n    xhr.addEventListener(\"load\", callback);\n    xhr.open(\"GET\", url);\n    xhr.send();\n\n    console.log(url);\n  }\n\n  static post(url, params, callback) {\n    if (params.formData) {\n      console.log(\"FORM DATA\");\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"POST\", url);\n    //  xhr.setRequestHeader(\"Content-Type\",\"multipart/form-data\");\n      xhr.send(params.formData);\n      xhr.addEventListener(\"load\", callback);\n      console.log(url);\n    } else {\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"POST\", url, true);\n\n      //Send the proper header information along with the request\n      xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n      xhr.onreadystatechange = function() {//Call a function when the state changes.\n        if(xhr.readyState == 4 && xhr.status == 200) {\n          callback(xhr.responseText);\n        }\n      }\n\n      var json = JSON.stringify(params);\n      var param_str = 'data='+encodeURIComponent(json);\n      xhr.send(param_str);\n    }\n  }\n\n  static getParamByName(name, url) {\n    if (!url) url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n  }\n}\n","'use strict'\n\nmodule.exports = class {\n  static async get(url, params) {\n    try {\n      return await new Promise(function (resolve) {\n        if (params) {\n          url += \"?data=\"+encodeURIComponent(JSON.stringify(params));\n        }\n\n        var xhr = new XMLHttpRequest();\n\n        xhr.addEventListener(\"load\", function() {\n          resolve(JSON.parse(this.responseText));\n        });\n        xhr.open(\"GET\", url);\n        xhr.send();\n      });\n    } catch(e) {\n      console.error(e);\n      return undefined;\n    }\n  }\n\n  static async post(url, params) {\n    try {\n      return await new Promise(function (resolve) {\n        if (params.formData) {\n          console.log(\"FORM DATA\");\n          var xhr = new XMLHttpRequest();\n          xhr.open(\"POST\", url);\n        //  xhr.setRequestHeader(\"Content-Type\",\"multipart/form-data\");\n          xhr.send(params.formData);\n          xhr.addEventListener(\"load\", function() {\n            resolve(JSON.parse(xhr.responseText));\n          });\n          console.log(url);\n        } else {\n          var xhr = new XMLHttpRequest();\n          xhr.open(\"POST\", url, true);\n\n          //Send the proper header information along with the request\n          xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n          xhr.onreadystatechange = function() {//Call a function when the state changes.\n            if(xhr.readyState == 4 && xhr.status == 200) {\n              resolve(JSON.parse(xhr.responseText));\n            }\n          }\n\n          var json = JSON.stringify(params);\n          var param_str = 'data='+encodeURIComponent(json);\n          xhr.send(param_str);\n        }\n      });\n    } catch(e) {\n      console.error(e);\n      return undefined;\n    }\n  }\n\n  static getParamByName(name, url) {\n    if (!url) url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n  }\n}\n","/* (ignored) */"],"sourceRoot":""}